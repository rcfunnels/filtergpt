function sx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ox(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VI={exports:{}},yh={},FI={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gl=Symbol.for("react.element"),ax=Symbol.for("react.portal"),ux=Symbol.for("react.fragment"),lx=Symbol.for("react.strict_mode"),cx=Symbol.for("react.profiler"),dx=Symbol.for("react.provider"),hx=Symbol.for("react.context"),fx=Symbol.for("react.forward_ref"),px=Symbol.for("react.suspense"),mx=Symbol.for("react.memo"),gx=Symbol.for("react.lazy"),b0=Symbol.iterator;function vx(t){return t===null||typeof t!="object"?null:(t=b0&&t[b0]||t["@@iterator"],typeof t=="function"?t:null)}var LI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MI=Object.assign,$I={};function Yo(t,e,n){this.props=t,this.context=e,this.refs=$I,this.updater=n||LI}Yo.prototype.isReactComponent={};Yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function UI(){}UI.prototype=Yo.prototype;function yv(t,e,n){this.props=t,this.context=e,this.refs=$I,this.updater=n||LI}var _v=yv.prototype=new UI;_v.constructor=yv;MI(_v,Yo.prototype);_v.isPureReactComponent=!0;var k0=Array.isArray,BI=Object.prototype.hasOwnProperty,Ev={current:null},jI={key:!0,ref:!0,__self:!0,__source:!0};function zI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)BI.call(e,r)&&!jI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:gl,type:t,key:s,ref:o,props:i,_owner:Ev.current}}function yx(t,e){return{$$typeof:gl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wv(t){return typeof t=="object"&&t!==null&&t.$$typeof===gl}function _x(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var x0=/\/+/g;function Zf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_x(""+t.key):e.toString(36)}function Nc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gl:case ax:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Zf(o,0):r,k0(i)?(n="",t!=null&&(n=t.replace(x0,"$&/")+"/"),Nc(i,e,n,"",function(l){return l})):i!=null&&(wv(i)&&(i=yx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(x0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",k0(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Zf(s,a);o+=Nc(s,e,n,u,i)}else if(u=vx(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Zf(s,a++),o+=Nc(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xl(t,e,n){if(t==null)return t;var r=[],i=0;return Nc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ex(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},Oc={transition:null},wx={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Oc,ReactCurrentOwner:Ev};ee.Children={map:Xl,forEach:function(t,e,n){Xl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xl(t,function(){e++}),e},toArray:function(t){return Xl(t,function(e){return e})||[]},only:function(t){if(!wv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Yo;ee.Fragment=ux;ee.Profiler=cx;ee.PureComponent=yv;ee.StrictMode=lx;ee.Suspense=px;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wx;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=MI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ev.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)BI.call(e,u)&&!jI.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:gl,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:hx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dx,_context:t},t.Consumer=t};ee.createElement=zI;ee.createFactory=function(t){var e=zI.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:fx,render:t}};ee.isValidElement=wv;ee.lazy=function(t){return{$$typeof:gx,_payload:{_status:-1,_result:t},_init:Ex}};ee.memo=function(t,e){return{$$typeof:mx,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Oc.transition;Oc.transition={};try{t()}finally{Oc.transition=e}};ee.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ee.useCallback=function(t,e){return Ht.current.useCallback(t,e)};ee.useContext=function(t){return Ht.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};ee.useEffect=function(t,e){return Ht.current.useEffect(t,e)};ee.useId=function(){return Ht.current.useId()};ee.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return Ht.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};ee.useRef=function(t){return Ht.current.useRef(t)};ee.useState=function(t){return Ht.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return Ht.current.useTransition()};ee.version="18.2.0";FI.exports=ee;var w=FI.exports;const qI=ox(w),lm=sx({__proto__:null,default:qI},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix=w,Tx=Symbol.for("react.element"),Sx=Symbol.for("react.fragment"),Ax=Object.prototype.hasOwnProperty,Cx=Ix.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rx={key:!0,ref:!0,__self:!0,__source:!0};function HI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ax.call(e,r)&&!Rx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Tx,type:t,key:s,ref:o,props:i,_owner:Cx.current}}yh.Fragment=Sx;yh.jsx=HI;yh.jsxs=HI;VI.exports=yh;var R=VI.exports,cm={},WI={exports:{}},gn={},GI={exports:{}},KI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,K){var Q=V.length;V.push(K);e:for(;0<Q;){var ce=Q-1>>>1,te=V[ce];if(0<i(te,K))V[ce]=K,V[Q]=te,Q=ce;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var K=V[0],Q=V.pop();if(Q!==K){V[0]=Q;e:for(var ce=0,te=V.length,Qe=te>>>1;ce<Qe;){var At=2*(ce+1)-1,_n=V[At],nt=At+1,Vt=V[nt];if(0>i(_n,Q))nt<te&&0>i(Vt,_n)?(V[ce]=Vt,V[nt]=Q,ce=nt):(V[ce]=_n,V[At]=Q,ce=At);else if(nt<te&&0>i(Vt,Q))V[ce]=Vt,V[nt]=Q,ce=nt;else break e}}return K}function i(V,K){var Q=V.sortIndex-K.sortIndex;return Q!==0?Q:V.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,d=null,h=3,f=!1,m=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(V){for(var K=n(l);K!==null;){if(K.callback===null)r(l);else if(K.startTime<=V)r(l),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(l)}}function E(V){if(g=!1,y(V),!m)if(n(u)!==null)m=!0,Ot(T);else{var K=n(l);K!==null&&Gt(E,K.startTime-V)}}function T(V,K){m=!1,g&&(g=!1,p(k),k=-1),f=!0;var Q=h;try{for(y(K),d=n(u);d!==null&&(!(d.expirationTime>K)||V&&!ve());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,h=d.priorityLevel;var te=ce(d.expirationTime<=K);K=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(u)&&r(u),y(K)}else r(u);d=n(u)}if(d!==null)var Qe=!0;else{var At=n(l);At!==null&&Gt(E,At.startTime-K),Qe=!1}return Qe}finally{d=null,h=Q,f=!1}}var I=!1,A=null,k=-1,U=5,M=-1;function ve(){return!(t.unstable_now()-M<U)}function je(){if(A!==null){var V=t.unstable_now();M=V;var K=!0;try{K=A(!0,V)}finally{K?St():(I=!1,A=null)}}else I=!1}var St;if(typeof v=="function")St=function(){v(je)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,ze=Fe.port2;Fe.port1.onmessage=je,St=function(){ze.postMessage(null)}}else St=function(){_(je,0)};function Ot(V){A=V,I||(I=!0,St())}function Gt(V,K){k=_(function(){V(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,Ot(T))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var Q=h;h=K;try{return V()}finally{h=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=h;h=V;try{return K()}finally{h=Q}},t.unstable_scheduleCallback=function(V,K,Q){var ce=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ce+Q:ce):Q=ce,V){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Q+te,V={id:c++,callback:K,priorityLevel:V,startTime:Q,expirationTime:te,sortIndex:-1},Q>ce?(V.sortIndex=Q,e(l,V),n(u)===null&&V===n(l)&&(g?(p(k),k=-1):g=!0,Gt(E,Q-ce))):(V.sortIndex=te,e(u,V),m||f||(m=!0,Ot(T))),V},t.unstable_shouldYield=ve,t.unstable_wrapCallback=function(V){var K=h;return function(){var Q=h;h=K;try{return V.apply(this,arguments)}finally{h=Q}}}})(KI);GI.exports=KI;var Px=GI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI=w,fn=Px;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YI=new Set,_u={};function ks(t,e){Co(t,e),Co(t+"Capture",e)}function Co(t,e){for(_u[t]=e,t=0;t<e.length;t++)YI.add(e[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dm=Object.prototype.hasOwnProperty,bx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D0={},N0={};function kx(t){return dm.call(N0,t)?!0:dm.call(D0,t)?!1:bx.test(t)?N0[t]=!0:(D0[t]=!0,!1)}function xx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Dx(t,e,n,r){if(e===null||typeof e>"u"||xx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Iv=/[\-:]([a-z])/g;function Tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Iv,Tv);It[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Iv,Tv);It[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Iv,Tv);It[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sv(t,e,n,r){var i=It.hasOwnProperty(e)?It[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Dx(e,n,i,r)&&(n=null),r||i===null?kx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nr=QI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),Ys=Symbol.for("react.portal"),Js=Symbol.for("react.fragment"),Av=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),JI=Symbol.for("react.provider"),XI=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),fm=Symbol.for("react.suspense"),pm=Symbol.for("react.suspense_list"),Rv=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),ZI=Symbol.for("react.offscreen"),O0=Symbol.iterator;function ya(t){return t===null||typeof t!="object"?null:(t=O0&&t[O0]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,ep;function Ua(t){if(ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function np(t,e){if(!t||tp)return"";tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{tp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ua(t):""}function Nx(t){switch(t.tag){case 5:return Ua(t.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 2:case 15:return t=np(t.type,!1),t;case 11:return t=np(t.type.render,!1),t;case 1:return t=np(t.type,!0),t;default:return""}}function mm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Js:return"Fragment";case Ys:return"Portal";case hm:return"Profiler";case Av:return"StrictMode";case fm:return"Suspense";case pm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XI:return(t.displayName||"Context")+".Consumer";case JI:return(t._context.displayName||"Context")+".Provider";case Cv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rv:return e=t.displayName||null,e!==null?e:mm(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return mm(t(e))}catch{}}return null}function Ox(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mm(e);case 8:return e===Av?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vx(t){var e=eT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ec(t){t._valueTracker||(t._valueTracker=Vx(t))}function tT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gm(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function V0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nT(t,e){e=e.checked,e!=null&&Sv(t,"checked",e,!1)}function vm(t,e){nT(t,e);var n=fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&ym(t,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ym(t,e,n){(e!=="number"||cd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ba=Array.isArray;function co(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _m(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function L0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Ba(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fi(n)}}function rT(t,e){var n=fi(e.value),r=fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function M0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tc,sT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fx=["Webkit","ms","Moz","O"];Object.keys(eu).forEach(function(t){Fx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eu[e]=eu[t]})});function oT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eu.hasOwnProperty(t)&&eu[t]?(""+e).trim():e+"px"}function aT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Lx=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wm(t,e){if(e){if(Lx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Im(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tm=null;function Pv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sm=null,ho=null,fo=null;function $0(t){if(t=_l(t)){if(typeof Sm!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Th(e),Sm(t.stateNode,t.type,e))}}function uT(t){ho?fo?fo.push(t):fo=[t]:ho=t}function lT(){if(ho){var t=ho,e=fo;if(fo=ho=null,$0(t),e)for(t=0;t<e.length;t++)$0(e[t])}}function cT(t,e){return t(e)}function dT(){}var rp=!1;function hT(t,e,n){if(rp)return t(e,n);rp=!0;try{return cT(t,e,n)}finally{rp=!1,(ho!==null||fo!==null)&&(dT(),lT())}}function wu(t,e){var n=t.stateNode;if(n===null)return null;var r=Th(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Am=!1;if(Cr)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){Am=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{Am=!1}function Mx(t,e,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var tu=!1,dd=null,hd=!1,Cm=null,$x={onError:function(t){tu=!0,dd=t}};function Ux(t,e,n,r,i,s,o,a,u){tu=!1,dd=null,Mx.apply($x,arguments)}function Bx(t,e,n,r,i,s,o,a,u){if(Ux.apply(this,arguments),tu){if(tu){var l=dd;tu=!1,dd=null}else throw Error(D(198));hd||(hd=!0,Cm=l)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U0(t){if(xs(t)!==t)throw Error(D(188))}function jx(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return U0(i),t;if(s===r)return U0(i),e;s=s.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function pT(t){return t=jx(t),t!==null?mT(t):null}function mT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mT(t);if(e!==null)return e;t=t.sibling}return null}var gT=fn.unstable_scheduleCallback,B0=fn.unstable_cancelCallback,zx=fn.unstable_shouldYield,qx=fn.unstable_requestPaint,Le=fn.unstable_now,Hx=fn.unstable_getCurrentPriorityLevel,bv=fn.unstable_ImmediatePriority,vT=fn.unstable_UserBlockingPriority,fd=fn.unstable_NormalPriority,Wx=fn.unstable_LowPriority,yT=fn.unstable_IdlePriority,_h=null,ir=null;function Gx(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(_h,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:Yx,Kx=Math.log,Qx=Math.LN2;function Yx(t){return t>>>=0,t===0?32:31-(Kx(t)/Qx|0)|0}var nc=64,rc=4194304;function ja(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ja(a):(s&=o,s!==0&&(r=ja(s)))}else o=n&~i,o!==0?r=ja(o):s!==0&&(r=ja(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),i=1<<n,r|=t[n],e&=~i;return r}function Jx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Jx(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Rm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _T(){var t=nc;return nc<<=1,!(nc&4194240)&&(nc=64),t}function ip(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function Zx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function kv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var he=0;function ET(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wT,xv,IT,TT,ST,Pm=!1,ic=[],ri=null,ii=null,si=null,Iu=new Map,Tu=new Map,Kr=[],eD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j0(t,e){switch(t){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ii=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Iu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(e.pointerId)}}function Ea(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_l(e),e!==null&&xv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tD(t,e,n,r,i){switch(e){case"focusin":return ri=Ea(ri,t,e,n,r,i),!0;case"dragenter":return ii=Ea(ii,t,e,n,r,i),!0;case"mouseover":return si=Ea(si,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Iu.set(s,Ea(Iu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Tu.set(s,Ea(Tu.get(s)||null,t,e,n,r,i)),!0}return!1}function AT(t){var e=Qi(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=fT(n),e!==null){t.blockedOn=e,ST(t.priority,function(){IT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Tm=r,n.target.dispatchEvent(r),Tm=null}else return e=_l(n),e!==null&&xv(e),t.blockedOn=n,!1;e.shift()}return!0}function z0(t,e,n){Vc(t)&&n.delete(e)}function nD(){Pm=!1,ri!==null&&Vc(ri)&&(ri=null),ii!==null&&Vc(ii)&&(ii=null),si!==null&&Vc(si)&&(si=null),Iu.forEach(z0),Tu.forEach(z0)}function wa(t,e){t.blockedOn===e&&(t.blockedOn=null,Pm||(Pm=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,nD)))}function Su(t){function e(i){return wa(i,t)}if(0<ic.length){wa(ic[0],t);for(var n=1;n<ic.length;n++){var r=ic[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ri!==null&&wa(ri,t),ii!==null&&wa(ii,t),si!==null&&wa(si,t),Iu.forEach(e),Tu.forEach(e),n=0;n<Kr.length;n++)r=Kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)AT(n),n.blockedOn===null&&Kr.shift()}var po=Nr.ReactCurrentBatchConfig,md=!0;function rD(t,e,n,r){var i=he,s=po.transition;po.transition=null;try{he=1,Dv(t,e,n,r)}finally{he=i,po.transition=s}}function iD(t,e,n,r){var i=he,s=po.transition;po.transition=null;try{he=4,Dv(t,e,n,r)}finally{he=i,po.transition=s}}function Dv(t,e,n,r){if(md){var i=bm(t,e,n,r);if(i===null)pp(t,e,r,gd,n),j0(t,r);else if(tD(i,t,e,n,r))r.stopPropagation();else if(j0(t,r),e&4&&-1<eD.indexOf(t)){for(;i!==null;){var s=_l(i);if(s!==null&&wT(s),s=bm(t,e,n,r),s===null&&pp(t,e,r,gd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else pp(t,e,r,null,n)}}var gd=null;function bm(t,e,n,r){if(gd=null,t=Pv(r),t=Qi(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gd=t,null}function CT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hx()){case bv:return 1;case vT:return 4;case fd:case Wx:return 16;case yT:return 536870912;default:return 16}default:return 16}}var Xr=null,Nv=null,Fc=null;function RT(){if(Fc)return Fc;var t,e=Nv,n=e.length,r,i="value"in Xr?Xr.value:Xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Fc=i.slice(t,1<r?1-r:void 0)}function Lc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function q0(){return!1}function vn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sc:q0,this.isPropagationStopped=q0,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ov=vn(Jo),yl=be({},Jo,{view:0,detail:0}),sD=vn(yl),sp,op,Ia,Eh=be({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ia&&(Ia&&t.type==="mousemove"?(sp=t.screenX-Ia.screenX,op=t.screenY-Ia.screenY):op=sp=0,Ia=t),sp)},movementY:function(t){return"movementY"in t?t.movementY:op}}),H0=vn(Eh),oD=be({},Eh,{dataTransfer:0}),aD=vn(oD),uD=be({},yl,{relatedTarget:0}),ap=vn(uD),lD=be({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),cD=vn(lD),dD=be({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hD=vn(dD),fD=be({},Jo,{data:0}),W0=vn(fD),pD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gD[t])?!!e[t]:!1}function Vv(){return vD}var yD=be({},yl,{key:function(t){if(t.key){var e=pD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vv,charCode:function(t){return t.type==="keypress"?Lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_D=vn(yD),ED=be({},Eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G0=vn(ED),wD=be({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vv}),ID=vn(wD),TD=be({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),SD=vn(TD),AD=be({},Eh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CD=vn(AD),RD=[9,13,27,32],Fv=Cr&&"CompositionEvent"in window,nu=null;Cr&&"documentMode"in document&&(nu=document.documentMode);var PD=Cr&&"TextEvent"in window&&!nu,PT=Cr&&(!Fv||nu&&8<nu&&11>=nu),K0=String.fromCharCode(32),Q0=!1;function bT(t,e){switch(t){case"keyup":return RD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function bD(t,e){switch(t){case"compositionend":return kT(e);case"keypress":return e.which!==32?null:(Q0=!0,K0);case"textInput":return t=e.data,t===K0&&Q0?null:t;default:return null}}function kD(t,e){if(Xs)return t==="compositionend"||!Fv&&bT(t,e)?(t=RT(),Fc=Nv=Xr=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PT&&e.locale!=="ko"?null:e.data;default:return null}}var xD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xD[t.type]:e==="textarea"}function xT(t,e,n,r){uT(r),e=vd(e,"onChange"),0<e.length&&(n=new Ov("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ru=null,Au=null;function DD(t){jT(t,0)}function wh(t){var e=to(t);if(tT(e))return t}function ND(t,e){if(t==="change")return e}var DT=!1;if(Cr){var up;if(Cr){var lp="oninput"in document;if(!lp){var J0=document.createElement("div");J0.setAttribute("oninput","return;"),lp=typeof J0.oninput=="function"}up=lp}else up=!1;DT=up&&(!document.documentMode||9<document.documentMode)}function X0(){ru&&(ru.detachEvent("onpropertychange",NT),Au=ru=null)}function NT(t){if(t.propertyName==="value"&&wh(Au)){var e=[];xT(e,Au,t,Pv(t)),hT(DD,e)}}function OD(t,e,n){t==="focusin"?(X0(),ru=e,Au=n,ru.attachEvent("onpropertychange",NT)):t==="focusout"&&X0()}function VD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wh(Au)}function FD(t,e){if(t==="click")return wh(e)}function LD(t,e){if(t==="input"||t==="change")return wh(e)}function MD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:MD;function Cu(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!dm.call(e,i)||!Mn(t[i],e[i]))return!1}return!0}function Z0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eE(t,e){var n=Z0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z0(n)}}function OT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VT(){for(var t=window,e=cd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cd(t.document)}return e}function Lv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $D(t){var e=VT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OT(n.ownerDocument.documentElement,n)){if(r!==null&&Lv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=eE(n,s);var o=eE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UD=Cr&&"documentMode"in document&&11>=document.documentMode,Zs=null,km=null,iu=null,xm=!1;function tE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xm||Zs==null||Zs!==cd(r)||(r=Zs,"selectionStart"in r&&Lv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),iu&&Cu(iu,r)||(iu=r,r=vd(km,"onSelect"),0<r.length&&(e=new Ov("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zs)))}function oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var eo={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},cp={},FT={};Cr&&(FT=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function Ih(t){if(cp[t])return cp[t];if(!eo[t])return t;var e=eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FT)return cp[t]=e[n];return t}var LT=Ih("animationend"),MT=Ih("animationiteration"),$T=Ih("animationstart"),UT=Ih("transitionend"),BT=new Map,nE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(t,e){BT.set(t,e),ks(e,[t])}for(var dp=0;dp<nE.length;dp++){var hp=nE[dp],BD=hp.toLowerCase(),jD=hp[0].toUpperCase()+hp.slice(1);Pi(BD,"on"+jD)}Pi(LT,"onAnimationEnd");Pi(MT,"onAnimationIteration");Pi($T,"onAnimationStart");Pi("dblclick","onDoubleClick");Pi("focusin","onFocus");Pi("focusout","onBlur");Pi(UT,"onTransitionEnd");Co("onMouseEnter",["mouseout","mouseover"]);Co("onMouseLeave",["mouseout","mouseover"]);Co("onPointerEnter",["pointerout","pointerover"]);Co("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zD=new Set("cancel close invalid load scroll toggle".split(" ").concat(za));function rE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Bx(r,e,void 0,t),t.currentTarget=null}function jT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;rE(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;rE(i,a,l),s=u}}}if(hd)throw t=Cm,hd=!1,Cm=null,t}function ye(t,e){var n=e[Fm];n===void 0&&(n=e[Fm]=new Set);var r=t+"__bubble";n.has(r)||(zT(e,t,2,!1),n.add(r))}function fp(t,e,n){var r=0;e&&(r|=4),zT(n,t,r,e)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Ru(t){if(!t[ac]){t[ac]=!0,YI.forEach(function(n){n!=="selectionchange"&&(zD.has(n)||fp(n,!1,t),fp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ac]||(e[ac]=!0,fp("selectionchange",!1,e))}}function zT(t,e,n,r){switch(CT(e)){case 1:var i=rD;break;case 4:i=iD;break;default:i=Dv}n=i.bind(null,e,n,t),i=void 0,!Am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function pp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Qi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hT(function(){var l=s,c=Pv(n),d=[];e:{var h=BT.get(t);if(h!==void 0){var f=Ov,m=t;switch(t){case"keypress":if(Lc(n)===0)break e;case"keydown":case"keyup":f=_D;break;case"focusin":m="focus",f=ap;break;case"focusout":m="blur",f=ap;break;case"beforeblur":case"afterblur":f=ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=H0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=aD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=ID;break;case LT:case MT:case $T:f=cD;break;case UT:f=SD;break;case"scroll":f=sD;break;case"wheel":f=CD;break;case"copy":case"cut":case"paste":f=hD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=G0}var g=(e&4)!==0,_=!g&&t==="scroll",p=g?h!==null?h+"Capture":null:h;g=[];for(var v=l,y;v!==null;){y=v;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,p!==null&&(E=wu(v,p),E!=null&&g.push(Pu(v,E,y)))),_)break;v=v.return}0<g.length&&(h=new f(h,m,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Tm&&(m=n.relatedTarget||n.fromElement)&&(Qi(m)||m[Rr]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=l,m=m?Qi(m):null,m!==null&&(_=xs(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=l),f!==m)){if(g=H0,E="onMouseLeave",p="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=G0,E="onPointerLeave",p="onPointerEnter",v="pointer"),_=f==null?h:to(f),y=m==null?h:to(m),h=new g(E,v+"leave",f,n,c),h.target=_,h.relatedTarget=y,E=null,Qi(c)===l&&(g=new g(p,v+"enter",m,n,c),g.target=y,g.relatedTarget=_,E=g),_=E,f&&m)t:{for(g=f,p=m,v=0,y=g;y;y=Bs(y))v++;for(y=0,E=p;E;E=Bs(E))y++;for(;0<v-y;)g=Bs(g),v--;for(;0<y-v;)p=Bs(p),y--;for(;v--;){if(g===p||p!==null&&g===p.alternate)break t;g=Bs(g),p=Bs(p)}g=null}else g=null;f!==null&&iE(d,h,f,g,!1),m!==null&&_!==null&&iE(d,_,m,g,!0)}}e:{if(h=l?to(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var T=ND;else if(Y0(h))if(DT)T=LD;else{T=VD;var I=OD}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=FD);if(T&&(T=T(t,l))){xT(d,T,n,c);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&ym(h,"number",h.value)}switch(I=l?to(l):window,t){case"focusin":(Y0(I)||I.contentEditable==="true")&&(Zs=I,km=l,iu=null);break;case"focusout":iu=km=Zs=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,tE(d,n,c);break;case"selectionchange":if(UD)break;case"keydown":case"keyup":tE(d,n,c)}var A;if(Fv)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Xs?bT(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(PT&&n.locale!=="ko"&&(Xs||k!=="onCompositionStart"?k==="onCompositionEnd"&&Xs&&(A=RT()):(Xr=c,Nv="value"in Xr?Xr.value:Xr.textContent,Xs=!0)),I=vd(l,k),0<I.length&&(k=new W0(k,t,null,n,c),d.push({event:k,listeners:I}),A?k.data=A:(A=kT(n),A!==null&&(k.data=A)))),(A=PD?bD(t,n):kD(t,n))&&(l=vd(l,"onBeforeInput"),0<l.length&&(c=new W0("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:l}),c.data=A))}jT(d,e)})}function Pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=wu(t,n),s!=null&&r.unshift(Pu(t,s,i)),s=wu(t,e),s!=null&&r.push(Pu(t,s,i))),t=t.return}return r}function Bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=wu(n,s),u!=null&&o.unshift(Pu(n,u,a))):i||(u=wu(n,s),u!=null&&o.push(Pu(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qD=/\r\n?/g,HD=/\u0000|\uFFFD/g;function sE(t){return(typeof t=="string"?t:""+t).replace(qD,`
`).replace(HD,"")}function uc(t,e,n){if(e=sE(e),sE(t)!==e&&n)throw Error(D(425))}function yd(){}var Dm=null,Nm=null;function Om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vm=typeof setTimeout=="function"?setTimeout:void 0,WD=typeof clearTimeout=="function"?clearTimeout:void 0,oE=typeof Promise=="function"?Promise:void 0,GD=typeof queueMicrotask=="function"?queueMicrotask:typeof oE<"u"?function(t){return oE.resolve(null).then(t).catch(KD)}:Vm;function KD(t){setTimeout(function(){throw t})}function mp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Su(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Su(e)}function oi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Xo,bu="__reactProps$"+Xo,Rr="__reactContainer$"+Xo,Fm="__reactEvents$"+Xo,QD="__reactListeners$"+Xo,YD="__reactHandles$"+Xo;function Qi(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rr]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aE(t);t!==null;){if(n=t[Wn])return n;t=aE(t)}return e}t=n,n=t.parentNode}return null}function _l(t){return t=t[Wn]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function to(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Th(t){return t[bu]||null}var Lm=[],no=-1;function bi(t){return{current:t}}function we(t){0>no||(t.current=Lm[no],Lm[no]=null,no--)}function me(t,e){no++,Lm[no]=t.current,t.current=e}var pi={},Nt=bi(pi),tn=bi(!1),ds=pi;function Ro(t,e){var n=t.type.contextTypes;if(!n)return pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nn(t){return t=t.childContextTypes,t!=null}function _d(){we(tn),we(Nt)}function uE(t,e,n){if(Nt.current!==pi)throw Error(D(168));me(Nt,e),me(tn,n)}function qT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,Ox(t)||"Unknown",i));return be({},n,r)}function Ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pi,ds=Nt.current,me(Nt,t),me(tn,tn.current),!0}function lE(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=qT(t,e,ds),r.__reactInternalMemoizedMergedChildContext=t,we(tn),we(Nt),me(Nt,t)):we(tn),me(tn,n)}var mr=null,Sh=!1,gp=!1;function HT(t){mr===null?mr=[t]:mr.push(t)}function JD(t){Sh=!0,HT(t)}function ki(){if(!gp&&mr!==null){gp=!0;var t=0,e=he;try{var n=mr;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mr=null,Sh=!1}catch(i){throw mr!==null&&(mr=mr.slice(t+1)),gT(bv,ki),i}finally{he=e,gp=!1}}return null}var ro=[],io=0,wd=null,Id=0,En=[],wn=0,hs=null,gr=1,vr="";function Ui(t,e){ro[io++]=Id,ro[io++]=wd,wd=t,Id=e}function WT(t,e,n){En[wn++]=gr,En[wn++]=vr,En[wn++]=hs,hs=t;var r=gr;t=vr;var i=32-Vn(r)-1;r&=~(1<<i),n+=1;var s=32-Vn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,gr=1<<32-Vn(e)+i|n<<i|r,vr=s+t}else gr=1<<s|n<<i|r,vr=t}function Mv(t){t.return!==null&&(Ui(t,1),WT(t,1,0))}function $v(t){for(;t===wd;)wd=ro[--io],ro[io]=null,Id=ro[--io],ro[io]=null;for(;t===hs;)hs=En[--wn],En[wn]=null,vr=En[--wn],En[wn]=null,gr=En[--wn],En[wn]=null}var dn=null,ln=null,Te=!1,Nn=null;function GT(t,e){var n=Tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,ln=oi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:gr,overflow:vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,ln=null,!0):!1;default:return!1}}function Mm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $m(t){if(Te){var e=ln;if(e){var n=e;if(!cE(t,e)){if(Mm(t))throw Error(D(418));e=oi(n.nextSibling);var r=dn;e&&cE(t,e)?GT(r,n):(t.flags=t.flags&-4097|2,Te=!1,dn=t)}}else{if(Mm(t))throw Error(D(418));t.flags=t.flags&-4097|2,Te=!1,dn=t}}}function dE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function lc(t){if(t!==dn)return!1;if(!Te)return dE(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Om(t.type,t.memoizedProps)),e&&(e=ln)){if(Mm(t))throw KT(),Error(D(418));for(;e;)GT(t,e),e=oi(e.nextSibling)}if(dE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=oi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=dn?oi(t.stateNode.nextSibling):null;return!0}function KT(){for(var t=ln;t;)t=oi(t.nextSibling)}function Po(){ln=dn=null,Te=!1}function Uv(t){Nn===null?Nn=[t]:Nn.push(t)}var XD=Nr.ReactCurrentBatchConfig;function xn(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Td=bi(null),Sd=null,so=null,Bv=null;function jv(){Bv=so=Sd=null}function zv(t){var e=Td.current;we(Td),t._currentValue=e}function Um(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function mo(t,e){Sd=t,Bv=so=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jt=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(Bv!==t)if(t={context:t,memoizedValue:e,next:null},so===null){if(Sd===null)throw Error(D(308));so=t,Sd.dependencies={lanes:0,firstContext:t}}else so=so.next=t;return e}var Yi=null;function qv(t){Yi===null?Yi=[t]:Yi.push(t)}function QT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,qv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pr(t,r)}function Pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gr=!1;function Hv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pr(t,n)}return i=r.interleaved,i===null?(e.next=e,qv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pr(t,n)}function Mc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kv(t,n)}}function hE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ad(t,e,n,r){var i=t.updateQueue;Gr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var d=i.baseState;o=0,c=l=u=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(h=e,f=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=be({},d,h);break e;case 2:Gr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=f,u=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ps|=o,t.lanes=o,t.memoizedState=d}}function fE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var JT=new QI.Component().refs;function Bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ah={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=li(t),s=wr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ai(t,s,i),e!==null&&(Fn(e,t,i,r),Mc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=li(t),s=wr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ai(t,s,i),e!==null&&(Fn(e,t,i,r),Mc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=li(t),i=wr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ai(t,i,r),e!==null&&(Fn(e,t,r,n),Mc(e,t,r))}};function pE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Cu(n,r)||!Cu(i,s):!0}function XT(t,e,n){var r=!1,i=pi,s=e.contextType;return typeof s=="object"&&s!==null?s=Rn(s):(i=nn(e)?ds:Nt.current,r=e.contextTypes,s=(r=r!=null)?Ro(t,i):pi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ah,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function mE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ah.enqueueReplaceState(e,e.state,null)}function jm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=JT,Hv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rn(s):(s=nn(e)?ds:Nt.current,i.context=Ro(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ah.enqueueReplaceState(i,i.state,null),Ad(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===JT&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function cc(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gE(t){var e=t._init;return e(t._payload)}function ZT(t){function e(p,v){if(t){var y=p.deletions;y===null?(p.deletions=[v],p.flags|=16):y.push(v)}}function n(p,v){if(!t)return null;for(;v!==null;)e(p,v),v=v.sibling;return null}function r(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=ci(p,v),p.index=0,p.sibling=null,p}function s(p,v,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<v?(p.flags|=2,v):y):(p.flags|=2,v)):(p.flags|=1048576,v)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,v,y,E){return v===null||v.tag!==6?(v=Tp(y,p.mode,E),v.return=p,v):(v=i(v,y),v.return=p,v)}function u(p,v,y,E){var T=y.type;return T===Js?c(p,v,y.props.children,E,y.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wr&&gE(T)===v.type)?(E=i(v,y.props),E.ref=Ta(p,v,y),E.return=p,E):(E=qc(y.type,y.key,y.props,null,p.mode,E),E.ref=Ta(p,v,y),E.return=p,E)}function l(p,v,y,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Sp(y,p.mode,E),v.return=p,v):(v=i(v,y.children||[]),v.return=p,v)}function c(p,v,y,E,T){return v===null||v.tag!==7?(v=is(y,p.mode,E,T),v.return=p,v):(v=i(v,y),v.return=p,v)}function d(p,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Tp(""+v,p.mode,y),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zl:return y=qc(v.type,v.key,v.props,null,p.mode,y),y.ref=Ta(p,null,v),y.return=p,y;case Ys:return v=Sp(v,p.mode,y),v.return=p,v;case Wr:var E=v._init;return d(p,E(v._payload),y)}if(Ba(v)||ya(v))return v=is(v,p.mode,y,null),v.return=p,v;cc(p,v)}return null}function h(p,v,y,E){var T=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(p,v,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zl:return y.key===T?u(p,v,y,E):null;case Ys:return y.key===T?l(p,v,y,E):null;case Wr:return T=y._init,h(p,v,T(y._payload),E)}if(Ba(y)||ya(y))return T!==null?null:c(p,v,y,E,null);cc(p,y)}return null}function f(p,v,y,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return p=p.get(y)||null,a(v,p,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Zl:return p=p.get(E.key===null?y:E.key)||null,u(v,p,E,T);case Ys:return p=p.get(E.key===null?y:E.key)||null,l(v,p,E,T);case Wr:var I=E._init;return f(p,v,y,I(E._payload),T)}if(Ba(E)||ya(E))return p=p.get(y)||null,c(v,p,E,T,null);cc(v,E)}return null}function m(p,v,y,E){for(var T=null,I=null,A=v,k=v=0,U=null;A!==null&&k<y.length;k++){A.index>k?(U=A,A=null):U=A.sibling;var M=h(p,A,y[k],E);if(M===null){A===null&&(A=U);break}t&&A&&M.alternate===null&&e(p,A),v=s(M,v,k),I===null?T=M:I.sibling=M,I=M,A=U}if(k===y.length)return n(p,A),Te&&Ui(p,k),T;if(A===null){for(;k<y.length;k++)A=d(p,y[k],E),A!==null&&(v=s(A,v,k),I===null?T=A:I.sibling=A,I=A);return Te&&Ui(p,k),T}for(A=r(p,A);k<y.length;k++)U=f(A,p,k,y[k],E),U!==null&&(t&&U.alternate!==null&&A.delete(U.key===null?k:U.key),v=s(U,v,k),I===null?T=U:I.sibling=U,I=U);return t&&A.forEach(function(ve){return e(p,ve)}),Te&&Ui(p,k),T}function g(p,v,y,E){var T=ya(y);if(typeof T!="function")throw Error(D(150));if(y=T.call(y),y==null)throw Error(D(151));for(var I=T=null,A=v,k=v=0,U=null,M=y.next();A!==null&&!M.done;k++,M=y.next()){A.index>k?(U=A,A=null):U=A.sibling;var ve=h(p,A,M.value,E);if(ve===null){A===null&&(A=U);break}t&&A&&ve.alternate===null&&e(p,A),v=s(ve,v,k),I===null?T=ve:I.sibling=ve,I=ve,A=U}if(M.done)return n(p,A),Te&&Ui(p,k),T;if(A===null){for(;!M.done;k++,M=y.next())M=d(p,M.value,E),M!==null&&(v=s(M,v,k),I===null?T=M:I.sibling=M,I=M);return Te&&Ui(p,k),T}for(A=r(p,A);!M.done;k++,M=y.next())M=f(A,p,k,M.value,E),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?k:M.key),v=s(M,v,k),I===null?T=M:I.sibling=M,I=M);return t&&A.forEach(function(je){return e(p,je)}),Te&&Ui(p,k),T}function _(p,v,y,E){if(typeof y=="object"&&y!==null&&y.type===Js&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Zl:e:{for(var T=y.key,I=v;I!==null;){if(I.key===T){if(T=y.type,T===Js){if(I.tag===7){n(p,I.sibling),v=i(I,y.props.children),v.return=p,p=v;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wr&&gE(T)===I.type){n(p,I.sibling),v=i(I,y.props),v.ref=Ta(p,I,y),v.return=p,p=v;break e}n(p,I);break}else e(p,I);I=I.sibling}y.type===Js?(v=is(y.props.children,p.mode,E,y.key),v.return=p,p=v):(E=qc(y.type,y.key,y.props,null,p.mode,E),E.ref=Ta(p,v,y),E.return=p,p=E)}return o(p);case Ys:e:{for(I=y.key;v!==null;){if(v.key===I)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(p,v.sibling),v=i(v,y.children||[]),v.return=p,p=v;break e}else{n(p,v);break}else e(p,v);v=v.sibling}v=Sp(y,p.mode,E),v.return=p,p=v}return o(p);case Wr:return I=y._init,_(p,v,I(y._payload),E)}if(Ba(y))return m(p,v,y,E);if(ya(y))return g(p,v,y,E);cc(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(p,v.sibling),v=i(v,y),v.return=p,p=v):(n(p,v),v=Tp(y,p.mode,E),v.return=p,p=v),o(p)):n(p,v)}return _}var bo=ZT(!0),eS=ZT(!1),El={},sr=bi(El),ku=bi(El),xu=bi(El);function Ji(t){if(t===El)throw Error(D(174));return t}function Wv(t,e){switch(me(xu,e),me(ku,t),me(sr,El),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Em(e,t)}we(sr),me(sr,e)}function ko(){we(sr),we(ku),we(xu)}function tS(t){Ji(xu.current);var e=Ji(sr.current),n=Em(e,t.type);e!==n&&(me(ku,t),me(sr,n))}function Gv(t){ku.current===t&&(we(sr),we(ku))}var Ce=bi(0);function Cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vp=[];function Kv(){for(var t=0;t<vp.length;t++)vp[t]._workInProgressVersionPrimary=null;vp.length=0}var $c=Nr.ReactCurrentDispatcher,yp=Nr.ReactCurrentBatchConfig,fs=0,Re=null,Ye=null,it=null,Rd=!1,su=!1,Du=0,ZD=0;function Ct(){throw Error(D(321))}function Qv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Yv(t,e,n,r,i,s){if(fs=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$c.current=t===null||t.memoizedState===null?rN:iN,t=n(r,i),su){s=0;do{if(su=!1,Du=0,25<=s)throw Error(D(301));s+=1,it=Ye=null,e.updateQueue=null,$c.current=sN,t=n(r,i)}while(su)}if($c.current=Pd,e=Ye!==null&&Ye.next!==null,fs=0,it=Ye=Re=null,Rd=!1,e)throw Error(D(300));return t}function Jv(){var t=Du!==0;return Du=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Re.memoizedState=it=t:it=it.next=t,it}function Pn(){if(Ye===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=it===null?Re.memoizedState:it.next;if(e!==null)it=e,Ye=t;else{if(t===null)throw Error(D(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},it===null?Re.memoizedState=it=t:it=it.next=t}return it}function Nu(t,e){return typeof e=="function"?e(t):e}function _p(t){var e=Pn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((fs&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,Re.lanes|=c,ps|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Mn(r,e.memoizedState)||(Jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Re.lanes|=s,ps|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ep(t){var e=Pn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Mn(s,e.memoizedState)||(Jt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function nS(){}function rS(t,e){var n=Re,r=Pn(),i=e(),s=!Mn(r.memoizedState,i);if(s&&(r.memoizedState=i,Jt=!0),r=r.queue,Xv(oS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Ou(9,sS.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(D(349));fs&30||iS(n,e,i)}return i}function iS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sS(t,e,n,r){e.value=n,e.getSnapshot=r,aS(e)&&uS(t)}function oS(t,e,n){return n(function(){aS(e)&&uS(t)})}function aS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function uS(t){var e=Pr(t,1);e!==null&&Fn(e,t,1,-1)}function vE(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:t},e.queue=t,t=t.dispatch=nN.bind(null,Re,t),[e.memoizedState,t]}function Ou(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lS(){return Pn().memoizedState}function Uc(t,e,n,r){var i=zn();Re.flags|=t,i.memoizedState=Ou(1|e,n,void 0,r===void 0?null:r)}function Ch(t,e,n,r){var i=Pn();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var o=Ye.memoizedState;if(s=o.destroy,r!==null&&Qv(r,o.deps)){i.memoizedState=Ou(e,n,s,r);return}}Re.flags|=t,i.memoizedState=Ou(1|e,n,s,r)}function yE(t,e){return Uc(8390656,8,t,e)}function Xv(t,e){return Ch(2048,8,t,e)}function cS(t,e){return Ch(4,2,t,e)}function dS(t,e){return Ch(4,4,t,e)}function hS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fS(t,e,n){return n=n!=null?n.concat([t]):null,Ch(4,4,hS.bind(null,e,t),n)}function Zv(){}function pS(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mS(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gS(t,e,n){return fs&21?(Mn(n,e)||(n=_T(),Re.lanes|=n,ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jt=!0),t.memoizedState=n)}function eN(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=yp.transition;yp.transition={};try{t(!1),e()}finally{he=n,yp.transition=r}}function vS(){return Pn().memoizedState}function tN(t,e,n){var r=li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yS(t))_S(e,n);else if(n=QT(t,e,n,r),n!==null){var i=Bt();Fn(n,t,r,i),ES(n,e,r)}}function nN(t,e,n){var r=li(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yS(t))_S(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Mn(a,o)){var u=e.interleaved;u===null?(i.next=i,qv(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=QT(t,e,i,r),n!==null&&(i=Bt(),Fn(n,t,r,i),ES(n,e,r))}}function yS(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function _S(t,e){su=Rd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ES(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kv(t,n)}}var Pd={readContext:Rn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},rN={readContext:Rn,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:yE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uc(4194308,4,hS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uc(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tN.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:vE,useDebugValue:Zv,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=vE(!1),e=t[0];return t=eN.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=zn();if(Te){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),ot===null)throw Error(D(349));fs&30||iS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,yE(oS.bind(null,r,s,t),[t]),r.flags|=2048,Ou(9,sS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zn(),e=ot.identifierPrefix;if(Te){var n=vr,r=gr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Du++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iN={readContext:Rn,useCallback:pS,useContext:Rn,useEffect:Xv,useImperativeHandle:fS,useInsertionEffect:cS,useLayoutEffect:dS,useMemo:mS,useReducer:_p,useRef:lS,useState:function(){return _p(Nu)},useDebugValue:Zv,useDeferredValue:function(t){var e=Pn();return gS(e,Ye.memoizedState,t)},useTransition:function(){var t=_p(Nu)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:nS,useSyncExternalStore:rS,useId:vS,unstable_isNewReconciler:!1},sN={readContext:Rn,useCallback:pS,useContext:Rn,useEffect:Xv,useImperativeHandle:fS,useInsertionEffect:cS,useLayoutEffect:dS,useMemo:mS,useReducer:Ep,useRef:lS,useState:function(){return Ep(Nu)},useDebugValue:Zv,useDeferredValue:function(t){var e=Pn();return Ye===null?e.memoizedState=t:gS(e,Ye.memoizedState,t)},useTransition:function(){var t=Ep(Nu)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:nS,useSyncExternalStore:rS,useId:vS,unstable_isNewReconciler:!1};function xo(t,e){try{var n="",r=e;do n+=Nx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oN=typeof WeakMap=="function"?WeakMap:Map;function wS(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){kd||(kd=!0,Zm=r),zm(t,e)},n}function IS(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zm(t,e),typeof r!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _E(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=EN.bind(null,t,e,n),e.then(t,t))}function EE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,ai(n,e,1))),n.lanes|=1),t)}var aN=Nr.ReactCurrentOwner,Jt=!1;function Lt(t,e,n,r){e.child=t===null?eS(e,null,n,r):bo(e,t.child,n,r)}function IE(t,e,n,r,i){n=n.render;var s=e.ref;return mo(e,i),r=Yv(t,e,n,r,s,i),n=Jv(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,br(t,e,i)):(Te&&n&&Mv(e),e.flags|=1,Lt(t,e,r,i),e.child)}function TE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ay(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,TS(t,e,s,r,i)):(t=qc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cu,n(o,r)&&t.ref===e.ref)return br(t,e,i)}return e.flags|=1,t=ci(s,r),t.ref=e.ref,t.return=e,e.child=t}function TS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Cu(s,r)&&t.ref===e.ref)if(Jt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Jt=!0);else return e.lanes=t.lanes,br(t,e,i)}return qm(t,e,n,r,i)}function SS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(ao,an),an|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(ao,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,me(ao,an),an|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,me(ao,an),an|=r;return Lt(t,e,i,n),e.child}function AS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qm(t,e,n,r,i){var s=nn(n)?ds:Nt.current;return s=Ro(e,s),mo(e,i),n=Yv(t,e,n,r,s,i),r=Jv(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,br(t,e,i)):(Te&&r&&Mv(e),e.flags|=1,Lt(t,e,n,i),e.child)}function SE(t,e,n,r,i){if(nn(n)){var s=!0;Ed(e)}else s=!1;if(mo(e,i),e.stateNode===null)Bc(t,e),XT(e,n,r),jm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Rn(l):(l=nn(n)?ds:Nt.current,l=Ro(e,l));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&mE(e,o,r,l),Gr=!1;var h=e.memoizedState;o.state=h,Ad(e,r,o,i),u=e.memoizedState,a!==r||h!==u||tn.current||Gr?(typeof c=="function"&&(Bm(e,n,c,r),u=e.memoizedState),(a=Gr||pE(e,n,a,r,h,u,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,YT(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:xn(e.type,a),o.props=l,d=e.pendingProps,h=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rn(u):(u=nn(n)?ds:Nt.current,u=Ro(e,u));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==u)&&mE(e,o,r,u),Gr=!1,h=e.memoizedState,o.state=h,Ad(e,r,o,i);var m=e.memoizedState;a!==d||h!==m||tn.current||Gr?(typeof f=="function"&&(Bm(e,n,f,r),m=e.memoizedState),(l=Gr||pE(e,n,l,r,h,m,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Hm(t,e,n,r,s,i)}function Hm(t,e,n,r,i,s){AS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&lE(e,n,!1),br(t,e,s);r=e.stateNode,aN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bo(e,t.child,null,s),e.child=bo(e,null,a,s)):Lt(t,e,a,s),e.memoizedState=r.state,i&&lE(e,n,!0),e.child}function CS(t){var e=t.stateNode;e.pendingContext?uE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uE(t,e.context,!1),Wv(t,e.containerInfo)}function AE(t,e,n,r,i){return Po(),Uv(i),e.flags|=256,Lt(t,e,n,r),e.child}var Wm={dehydrated:null,treeContext:null,retryLane:0};function Gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function RS(t,e,n){var r=e.pendingProps,i=Ce.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),me(Ce,i&1),t===null)return $m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bh(o,r,0,null),t=is(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Gm(n),e.memoizedState=Wm,t):ey(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return uN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ci(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ci(a,s):(s=is(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Gm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Wm,r}return s=t.child,t=s.sibling,r=ci(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ey(t,e){return e=bh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dc(t,e,n,r){return r!==null&&Uv(r),bo(e,t.child,null,n),t=ey(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wp(Error(D(422))),dc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bh({mode:"visible",children:r.children},i,0,null),s=is(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bo(e,t.child,null,o),e.child.memoizedState=Gm(o),e.memoizedState=Wm,s);if(!(e.mode&1))return dc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(D(419)),r=wp(s,r,void 0),dc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Jt||a){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pr(t,i),Fn(r,t,i,-1))}return oy(),r=wp(Error(D(421))),dc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ln=oi(i.nextSibling),dn=e,Te=!0,Nn=null,t!==null&&(En[wn++]=gr,En[wn++]=vr,En[wn++]=hs,gr=t.id,vr=t.overflow,hs=e),e=ey(e,r.children),e.flags|=4096,e)}function CE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Um(t.return,e,n)}function Ip(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function PS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Lt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&CE(t,n,e);else if(t.tag===19)CE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ip(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ip(e,!0,n,null,s);break;case"together":Ip(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lN(t,e,n){switch(e.tag){case 3:CS(e),Po();break;case 5:tS(e);break;case 1:nn(e.type)&&Ed(e);break;case 4:Wv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;me(Td,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?RS(t,e,n):(me(Ce,Ce.current&1),t=br(t,e,n),t!==null?t.sibling:null);me(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return PS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,SS(t,e,n)}return br(t,e,n)}var bS,Km,kS,xS;bS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Km=function(){};kS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ji(sr.current);var s=null;switch(n){case"input":i=gm(t,i),r=gm(t,r),s=[];break;case"select":i=be({},i,{value:void 0}),r=be({},r,{value:void 0}),s=[];break;case"textarea":i=_m(t,i),r=_m(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yd)}wm(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(_u.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(_u.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ye("scroll",t),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};xS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Sa(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cN(t,e,n){var r=e.pendingProps;switch($v(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return nn(e.type)&&_d(),Rt(e),null;case 3:return r=e.stateNode,ko(),we(tn),we(Nt),Kv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(ng(Nn),Nn=null))),Km(t,e),Rt(e),null;case 5:Gv(e);var i=Ji(xu.current);if(n=e.type,t!==null&&e.stateNode!=null)kS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return Rt(e),null}if(t=Ji(sr.current),lc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wn]=e,r[bu]=s,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<za.length;i++)ye(za[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":V0(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":L0(r,s),ye("invalid",r)}wm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&uc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&uc(r.textContent,a,t),i=["children",""+a]):_u.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":ec(r),F0(r,s,!0);break;case"textarea":ec(r),M0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wn]=e,t[bu]=r,bS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Im(n,r),n){case"dialog":ye("cancel",t),ye("close",t),i=r;break;case"iframe":case"object":case"embed":ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<za.length;i++)ye(za[i],t);i=r;break;case"source":ye("error",t),i=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),i=r;break;case"details":ye("toggle",t),i=r;break;case"input":V0(t,r),i=gm(t,r),ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=be({},r,{value:void 0}),ye("invalid",t);break;case"textarea":L0(t,r),i=_m(t,r),ye("invalid",t);break;default:i=r}wm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?aT(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sT(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Eu(t,u):typeof u=="number"&&Eu(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_u.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ye("scroll",t):u!=null&&Sv(t,s,u,o))}switch(n){case"input":ec(t),F0(t,r,!1);break;case"textarea":ec(t),M0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?co(t,!!r.multiple,s,!1):r.defaultValue!=null&&co(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)xS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Ji(xu.current),Ji(sr.current),lc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(s=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:uc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return Rt(e),null;case 13:if(we(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&ln!==null&&e.mode&1&&!(e.flags&128))KT(),Po(),e.flags|=98560,s=!1;else if(s=lc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[Wn]=e}else Po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),s=!1}else Nn!==null&&(ng(Nn),Nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?Je===0&&(Je=3):oy())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return ko(),Km(t,e),t===null&&Ru(e.stateNode.containerInfo),Rt(e),null;case 10:return zv(e.type._context),Rt(e),null;case 17:return nn(e.type)&&_d(),Rt(e),null;case 19:if(we(Ce),s=e.memoizedState,s===null)return Rt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Sa(s,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cd(t),o!==null){for(e.flags|=128,Sa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Ce,Ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>Do&&(e.flags|=128,r=!0,Sa(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return Rt(e),null}else 2*Le()-s.renderingStartTime>Do&&n!==1073741824&&(e.flags|=128,r=!0,Sa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Ce.current,me(Ce,r?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return sy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function dN(t,e){switch($v(e),e.tag){case 1:return nn(e.type)&&_d(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ko(),we(tn),we(Nt),Kv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gv(e),null;case 13:if(we(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Ce),null;case 4:return ko(),null;case 10:return zv(e.type._context),null;case 22:case 23:return sy(),null;case 24:return null;default:return null}}var hc=!1,kt=!1,hN=typeof WeakSet=="function"?WeakSet:Set,B=null;function oo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(t,e,r)}else n.current=null}function Qm(t,e,n){try{n()}catch(r){xe(t,e,r)}}var RE=!1;function fN(t,e){if(Dm=md,t=VT(),Lv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===i&&(a=o),h===s&&++c===r&&(u=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nm={focusedElem:t,selectionRange:n},md=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,_=m.memoizedState,p=e.stateNode,v=p.getSnapshotBeforeUpdate(e.elementType===e.type?g:xn(e.type,g),_);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(E){xe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return m=RE,RE=!1,m}function ou(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qm(e,n,s)}i=i.next}while(i!==r)}}function Rh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DS(t){var e=t.alternate;e!==null&&(t.alternate=null,DS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[bu],delete e[Fm],delete e[QD],delete e[YD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NS(t){return t.tag===5||t.tag===3||t.tag===4}function PE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yd));else if(r!==4&&(t=t.child,t!==null))for(Jm(t,e,n),t=t.sibling;t!==null;)Jm(t,e,n),t=t.sibling}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}var ft=null,Dn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)OS(t,e,n),n=n.sibling}function OS(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(_h,n)}catch{}switch(n.tag){case 5:kt||oo(n,e);case 6:var r=ft,i=Dn;ft=null,Ur(t,e,n),ft=r,Dn=i,ft!==null&&(Dn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(Dn?(t=ft,n=n.stateNode,t.nodeType===8?mp(t.parentNode,n):t.nodeType===1&&mp(t,n),Su(t)):mp(ft,n.stateNode));break;case 4:r=ft,i=Dn,ft=n.stateNode.containerInfo,Dn=!0,Ur(t,e,n),ft=r,Dn=i;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qm(n,e,o),i=i.next}while(i!==r)}Ur(t,e,n);break;case 1:if(!kt&&(oo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xe(n,e,a)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,Ur(t,e,n),kt=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function bE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hN),e.forEach(function(r){var i=IN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,Dn=!1;break e;case 3:ft=a.stateNode.containerInfo,Dn=!0;break e;case 4:ft=a.stateNode.containerInfo,Dn=!0;break e}a=a.return}if(ft===null)throw Error(D(160));OS(s,o,i),ft=null,Dn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){xe(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VS(e,t),e=e.sibling}function VS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),jn(t),r&4){try{ou(3,t,t.return),Rh(3,t)}catch(g){xe(t,t.return,g)}try{ou(5,t,t.return)}catch(g){xe(t,t.return,g)}}break;case 1:kn(e,t),jn(t),r&512&&n!==null&&oo(n,n.return);break;case 5:if(kn(e,t),jn(t),r&512&&n!==null&&oo(n,n.return),t.flags&32){var i=t.stateNode;try{Eu(i,"")}catch(g){xe(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nT(i,s),Im(a,o);var l=Im(a,s);for(o=0;o<u.length;o+=2){var c=u[o],d=u[o+1];c==="style"?aT(i,d):c==="dangerouslySetInnerHTML"?sT(i,d):c==="children"?Eu(i,d):Sv(i,c,d,l)}switch(a){case"input":vm(i,s);break;case"textarea":rT(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?co(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?co(i,!!s.multiple,s.defaultValue,!0):co(i,!!s.multiple,s.multiple?[]:"",!1))}i[bu]=s}catch(g){xe(t,t.return,g)}}break;case 6:if(kn(e,t),jn(t),r&4){if(t.stateNode===null)throw Error(D(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){xe(t,t.return,g)}}break;case 3:if(kn(e,t),jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Su(e.containerInfo)}catch(g){xe(t,t.return,g)}break;case 4:kn(e,t),jn(t);break;case 13:kn(e,t),jn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ry=Le())),r&4&&bE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(l=kt)||c,kn(e,t),kt=l):kn(e,t),jn(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(B=t,c=t.child;c!==null;){for(d=B=c;B!==null;){switch(h=B,f=h.child,h.tag){case 0:case 11:case 14:case 15:ou(4,h,h.return);break;case 1:oo(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){xe(r,n,g)}}break;case 5:oo(h,h.return);break;case 22:if(h.memoizedState!==null){xE(d);continue}}f!==null?(f.return=h,B=f):xE(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=oT("display",o))}catch(g){xe(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){xe(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:kn(e,t),jn(t),r&4&&bE(t);break;case 21:break;default:kn(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NS(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Eu(i,""),r.flags&=-33);var s=PE(t);Xm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PE(t);Jm(t,a,o);break;default:throw Error(D(161))}}catch(u){xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pN(t,e,n){B=t,FS(t)}function FS(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hc;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||kt;a=hc;var l=kt;if(hc=o,(kt=u)&&!l)for(B=i;B!==null;)o=B,u=o.child,o.tag===22&&o.memoizedState!==null?DE(i):u!==null?(u.return=o,B=u):DE(i);for(;s!==null;)B=s,FS(s),s=s.sibling;B=i,hc=a,kt=l}kE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):kE(t)}}function kE(t){for(;B!==null;){var e=B;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||Rh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Su(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}kt||e.flags&512&&Ym(e)}catch(h){xe(e,e.return,h)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function xE(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function DE(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rh(4,e)}catch(u){xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){xe(e,i,u)}}var s=e.return;try{Ym(e)}catch(u){xe(e,s,u)}break;case 5:var o=e.return;try{Ym(e)}catch(u){xe(e,o,u)}}}catch(u){xe(e,e.return,u)}if(e===t){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var mN=Math.ceil,bd=Nr.ReactCurrentDispatcher,ty=Nr.ReactCurrentOwner,An=Nr.ReactCurrentBatchConfig,oe=0,ot=null,Ge=null,_t=0,an=0,ao=bi(0),Je=0,Vu=null,ps=0,Ph=0,ny=0,au=null,Yt=null,ry=0,Do=1/0,pr=null,kd=!1,Zm=null,ui=null,fc=!1,Zr=null,xd=0,uu=0,eg=null,jc=-1,zc=0;function Bt(){return oe&6?Le():jc!==-1?jc:jc=Le()}function li(t){return t.mode&1?oe&2&&_t!==0?_t&-_t:XD.transition!==null?(zc===0&&(zc=_T()),zc):(t=he,t!==0||(t=window.event,t=t===void 0?16:CT(t.type)),t):1}function Fn(t,e,n,r){if(50<uu)throw uu=0,eg=null,Error(D(185));vl(t,n,r),(!(oe&2)||t!==ot)&&(t===ot&&(!(oe&2)&&(Ph|=n),Je===4&&Qr(t,_t)),rn(t,r),n===1&&oe===0&&!(e.mode&1)&&(Do=Le()+500,Sh&&ki()))}function rn(t,e){var n=t.callbackNode;Xx(t,e);var r=pd(t,t===ot?_t:0);if(r===0)n!==null&&B0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&B0(n),e===1)t.tag===0?JD(NE.bind(null,t)):HT(NE.bind(null,t)),GD(function(){!(oe&6)&&ki()}),n=null;else{switch(ET(r)){case 1:n=bv;break;case 4:n=vT;break;case 16:n=fd;break;case 536870912:n=yT;break;default:n=fd}n=qS(n,LS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LS(t,e){if(jc=-1,zc=0,oe&6)throw Error(D(327));var n=t.callbackNode;if(go()&&t.callbackNode!==n)return null;var r=pd(t,t===ot?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dd(t,r);else{e=r;var i=oe;oe|=2;var s=$S();(ot!==t||_t!==e)&&(pr=null,Do=Le()+500,rs(t,e));do try{yN();break}catch(a){MS(t,a)}while(1);jv(),bd.current=s,oe=i,Ge!==null?e=0:(ot=null,_t=0,e=Je)}if(e!==0){if(e===2&&(i=Rm(t),i!==0&&(r=i,e=tg(t,i))),e===1)throw n=Vu,rs(t,0),Qr(t,r),rn(t,Le()),n;if(e===6)Qr(t,r);else{if(i=t.current.alternate,!(r&30)&&!gN(i)&&(e=Dd(t,r),e===2&&(s=Rm(t),s!==0&&(r=s,e=tg(t,s))),e===1))throw n=Vu,rs(t,0),Qr(t,r),rn(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Bi(t,Yt,pr);break;case 3:if(Qr(t,r),(r&130023424)===r&&(e=ry+500-Le(),10<e)){if(pd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vm(Bi.bind(null,t,Yt,pr),e);break}Bi(t,Yt,pr);break;case 4:if(Qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Vn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mN(r/1960))-r,10<r){t.timeoutHandle=Vm(Bi.bind(null,t,Yt,pr),r);break}Bi(t,Yt,pr);break;case 5:Bi(t,Yt,pr);break;default:throw Error(D(329))}}}return rn(t,Le()),t.callbackNode===n?LS.bind(null,t):null}function tg(t,e){var n=au;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=Dd(t,e),t!==2&&(e=Yt,Yt=n,e!==null&&ng(e)),t}function ng(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function gN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Mn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~ny,e&=~Ph,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function NE(t){if(oe&6)throw Error(D(327));go();var e=pd(t,0);if(!(e&1))return rn(t,Le()),null;var n=Dd(t,e);if(t.tag!==0&&n===2){var r=Rm(t);r!==0&&(e=r,n=tg(t,r))}if(n===1)throw n=Vu,rs(t,0),Qr(t,e),rn(t,Le()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bi(t,Yt,pr),rn(t,Le()),null}function iy(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Do=Le()+500,Sh&&ki())}}function ms(t){Zr!==null&&Zr.tag===0&&!(oe&6)&&go();var e=oe;oe|=1;var n=An.transition,r=he;try{if(An.transition=null,he=1,t)return t()}finally{he=r,An.transition=n,oe=e,!(oe&6)&&ki()}}function sy(){an=ao.current,we(ao)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WD(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch($v(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_d();break;case 3:ko(),we(tn),we(Nt),Kv();break;case 5:Gv(r);break;case 4:ko();break;case 13:we(Ce);break;case 19:we(Ce);break;case 10:zv(r.type._context);break;case 22:case 23:sy()}n=n.return}if(ot=t,Ge=t=ci(t.current,null),_t=an=e,Je=0,Vu=null,ny=Ph=ps=0,Yt=au=null,Yi!==null){for(e=0;e<Yi.length;e++)if(n=Yi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Yi=null}return t}function MS(t,e){do{var n=Ge;try{if(jv(),$c.current=Pd,Rd){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rd=!1}if(fs=0,it=Ye=Re=null,su=!1,Du=0,ty.current=null,n===null||n.return===null){Je=1,Vu=e,Ge=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=_t,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=EE(o);if(f!==null){f.flags&=-257,wE(f,o,a,s,e),f.mode&1&&_E(s,l,e),e=f,u=l;var m=e.updateQueue;if(m===null){var g=new Set;g.add(u),e.updateQueue=g}else m.add(u);break e}else{if(!(e&1)){_E(s,l,e),oy();break e}u=Error(D(426))}}else if(Te&&a.mode&1){var _=EE(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),wE(_,o,a,s,e),Uv(xo(u,a));break e}}s=u=xo(u,a),Je!==4&&(Je=2),au===null?au=[s]:au.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=wS(s,u,e);hE(s,p);break e;case 1:a=u;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ui===null||!ui.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=IS(s,a,e);hE(s,E);break e}}s=s.return}while(s!==null)}BS(n)}catch(T){e=T,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(1)}function $S(){var t=bd.current;return bd.current=Pd,t===null?Pd:t}function oy(){(Je===0||Je===3||Je===2)&&(Je=4),ot===null||!(ps&268435455)&&!(Ph&268435455)||Qr(ot,_t)}function Dd(t,e){var n=oe;oe|=2;var r=$S();(ot!==t||_t!==e)&&(pr=null,rs(t,e));do try{vN();break}catch(i){MS(t,i)}while(1);if(jv(),oe=n,bd.current=r,Ge!==null)throw Error(D(261));return ot=null,_t=0,Je}function vN(){for(;Ge!==null;)US(Ge)}function yN(){for(;Ge!==null&&!zx();)US(Ge)}function US(t){var e=zS(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?BS(t):Ge=e,ty.current=null}function BS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dN(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Ge=null;return}}else if(n=cN(n,e,an),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Je===0&&(Je=5)}function Bi(t,e,n){var r=he,i=An.transition;try{An.transition=null,he=1,_N(t,e,n,r)}finally{An.transition=i,he=r}return null}function _N(t,e,n,r){do go();while(Zr!==null);if(oe&6)throw Error(D(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Zx(t,s),t===ot&&(Ge=ot=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,qS(fd,function(){return go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=An.transition,An.transition=null;var o=he;he=1;var a=oe;oe|=4,ty.current=null,fN(t,n),VS(n,t),$D(Nm),md=!!Dm,Nm=Dm=null,t.current=n,pN(n),qx(),oe=a,he=o,An.transition=s}else t.current=n;if(fc&&(fc=!1,Zr=t,xd=i),s=t.pendingLanes,s===0&&(ui=null),Gx(n.stateNode),rn(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(kd)throw kd=!1,t=Zm,Zm=null,t;return xd&1&&t.tag!==0&&go(),s=t.pendingLanes,s&1?t===eg?uu++:(uu=0,eg=t):uu=0,ki(),null}function go(){if(Zr!==null){var t=ET(xd),e=An.transition,n=he;try{if(An.transition=null,he=16>t?16:t,Zr===null)var r=!1;else{if(t=Zr,Zr=null,xd=0,oe&6)throw Error(D(331));var i=oe;for(oe|=4,B=t.current;B!==null;){var s=B,o=s.child;if(B.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(B=l;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:ou(8,c,s)}var d=c.child;if(d!==null)d.return=c,B=d;else for(;B!==null;){c=B;var h=c.sibling,f=c.return;if(DS(c),c===l){B=null;break}if(h!==null){h.return=f,B=h;break}B=f}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}B=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,B=o;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ou(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,B=p;break e}B=s.return}}var v=t.current;for(B=v;B!==null;){o=B;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,B=y;else e:for(o=v;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rh(9,a)}}catch(T){xe(a,a.return,T)}if(a===o){B=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,B=E;break e}B=a.return}}if(oe=i,ki(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(_h,t)}catch{}r=!0}return r}finally{he=n,An.transition=e}}return!1}function OE(t,e,n){e=xo(n,e),e=wS(t,e,1),t=ai(t,e,1),e=Bt(),t!==null&&(vl(t,1,e),rn(t,e))}function xe(t,e,n){if(t.tag===3)OE(t,t,n);else for(;e!==null;){if(e.tag===3){OE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ui===null||!ui.has(r))){t=xo(n,t),t=IS(e,t,1),e=ai(e,t,1),t=Bt(),e!==null&&(vl(e,1,t),rn(e,t));break}}e=e.return}}function EN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(_t&n)===n&&(Je===4||Je===3&&(_t&130023424)===_t&&500>Le()-ry?rs(t,0):ny|=n),rn(t,e)}function jS(t,e){e===0&&(t.mode&1?(e=rc,rc<<=1,!(rc&130023424)&&(rc=4194304)):e=1);var n=Bt();t=Pr(t,e),t!==null&&(vl(t,e,n),rn(t,n))}function wN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jS(t,n)}function IN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),jS(t,n)}var zS;zS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)Jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jt=!1,lN(t,e,n);Jt=!!(t.flags&131072)}else Jt=!1,Te&&e.flags&1048576&&WT(e,Id,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bc(t,e),t=e.pendingProps;var i=Ro(e,Nt.current);mo(e,n),i=Yv(null,e,r,t,i,n);var s=Jv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(s=!0,Ed(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hv(e),i.updater=Ah,e.stateNode=i,i._reactInternals=e,jm(e,r,t,n),e=Hm(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&Mv(e),Lt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=SN(r),t=xn(r,t),i){case 0:e=qm(null,e,r,t,n);break e;case 1:e=SE(null,e,r,t,n);break e;case 11:e=IE(null,e,r,t,n);break e;case 14:e=TE(null,e,r,xn(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),qm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),SE(t,e,r,i,n);case 3:e:{if(CS(e),t===null)throw Error(D(387));r=e.pendingProps,s=e.memoizedState,i=s.element,YT(t,e),Ad(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xo(Error(D(423)),e),e=AE(t,e,r,n,i);break e}else if(r!==i){i=xo(Error(D(424)),e),e=AE(t,e,r,n,i);break e}else for(ln=oi(e.stateNode.containerInfo.firstChild),dn=e,Te=!0,Nn=null,n=eS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Po(),r===i){e=br(t,e,n);break e}Lt(t,e,r,n)}e=e.child}return e;case 5:return tS(e),t===null&&$m(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Om(r,i)?o=null:s!==null&&Om(r,s)&&(e.flags|=32),AS(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&$m(e),null;case 13:return RS(t,e,n);case 4:return Wv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):Lt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),IE(t,e,r,i,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,me(Td,r._currentValue),r._currentValue=o,s!==null)if(Mn(s.value,o)){if(s.children===i.children&&!tn.current){e=br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=wr(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Um(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Um(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,mo(e,n),i=Rn(i),r=r(i),e.flags|=1,Lt(t,e,r,n),e.child;case 14:return r=e.type,i=xn(r,e.pendingProps),i=xn(r.type,i),TE(t,e,r,i,n);case 15:return TS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),Bc(t,e),e.tag=1,nn(r)?(t=!0,Ed(e)):t=!1,mo(e,n),XT(e,r,i),jm(e,r,i,n),Hm(null,e,r,!0,t,n);case 19:return PS(t,e,n);case 22:return SS(t,e,n)}throw Error(D(156,e.tag))};function qS(t,e){return gT(t,e)}function TN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,e,n,r){return new TN(t,e,n,r)}function ay(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SN(t){if(typeof t=="function")return ay(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cv)return 11;if(t===Rv)return 14}return 2}function ci(t,e){var n=t.alternate;return n===null?(n=Tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ay(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Js:return is(n.children,i,s,e);case Av:o=8,i|=8;break;case hm:return t=Tn(12,n,e,i|2),t.elementType=hm,t.lanes=s,t;case fm:return t=Tn(13,n,e,i),t.elementType=fm,t.lanes=s,t;case pm:return t=Tn(19,n,e,i),t.elementType=pm,t.lanes=s,t;case ZI:return bh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JI:o=10;break e;case XI:o=9;break e;case Cv:o=11;break e;case Rv:o=14;break e;case Wr:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=Tn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function is(t,e,n,r){return t=Tn(7,t,r,e),t.lanes=n,t}function bh(t,e,n,r){return t=Tn(22,t,r,e),t.elementType=ZI,t.lanes=n,t.stateNode={isHidden:!1},t}function Tp(t,e,n){return t=Tn(6,t,null,e),t.lanes=n,t}function Sp(t,e,n){return e=Tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uy(t,e,n,r,i,s,o,a,u){return t=new AN(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hv(s),t}function CN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ys,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function HS(t){if(!t)return pi;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(nn(n))return qT(t,n,e)}return e}function WS(t,e,n,r,i,s,o,a,u){return t=uy(n,r,!0,t,i,s,o,a,u),t.context=HS(null),n=t.current,r=Bt(),i=li(n),s=wr(r,i),s.callback=e??null,ai(n,s,i),t.current.lanes=i,vl(t,i,r),rn(t,r),t}function kh(t,e,n,r){var i=e.current,s=Bt(),o=li(i);return n=HS(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ai(i,e,o),t!==null&&(Fn(t,i,o,s),Mc(t,i,o)),o}function Nd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ly(t,e){VE(t,e),(t=t.alternate)&&VE(t,e)}function RN(){return null}var GS=typeof reportError=="function"?reportError:function(t){console.error(t)};function cy(t){this._internalRoot=t}xh.prototype.render=cy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));kh(t,e,null,null)};xh.prototype.unmount=cy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ms(function(){kh(null,t,null,null)}),e[Rr]=null}};function xh(t){this._internalRoot=t}xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=TT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&AT(t)}};function dy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FE(){}function PN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=Nd(o);s.call(l)}}var o=WS(e,r,t,0,null,!1,!1,"",FE);return t._reactRootContainer=o,t[Rr]=o.current,Ru(t.nodeType===8?t.parentNode:t),ms(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Nd(u);a.call(l)}}var u=uy(t,0,!1,null,null,!1,!1,"",FE);return t._reactRootContainer=u,t[Rr]=u.current,Ru(t.nodeType===8?t.parentNode:t),ms(function(){kh(e,u,n,r)}),u}function Nh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Nd(o);a.call(u)}}kh(e,o,t,i)}else o=PN(n,e,t,i,r);return Nd(o)}wT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ja(e.pendingLanes);n!==0&&(kv(e,n|1),rn(e,Le()),!(oe&6)&&(Do=Le()+500,ki()))}break;case 13:ms(function(){var r=Pr(t,1);if(r!==null){var i=Bt();Fn(r,t,1,i)}}),ly(t,1)}};xv=function(t){if(t.tag===13){var e=Pr(t,134217728);if(e!==null){var n=Bt();Fn(e,t,134217728,n)}ly(t,134217728)}};IT=function(t){if(t.tag===13){var e=li(t),n=Pr(t,e);if(n!==null){var r=Bt();Fn(n,t,e,r)}ly(t,e)}};TT=function(){return he};ST=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};Sm=function(t,e,n){switch(e){case"input":if(vm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Th(r);if(!i)throw Error(D(90));tT(r),vm(r,i)}}}break;case"textarea":rT(t,n);break;case"select":e=n.value,e!=null&&co(t,!!n.multiple,e,!1)}};cT=iy;dT=ms;var bN={usingClientEntryPoint:!1,Events:[_l,to,Th,uT,lT,iy]},Aa={findFiberByHostInstance:Qi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},kN={bundleType:Aa.bundleType,version:Aa.version,rendererPackageName:Aa.rendererPackageName,rendererConfig:Aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pT(t),t===null?null:t.stateNode},findFiberByHostInstance:Aa.findFiberByHostInstance||RN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{_h=pc.inject(kN),ir=pc}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bN;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dy(e))throw Error(D(200));return CN(t,e,null,n)};gn.createRoot=function(t,e){if(!dy(t))throw Error(D(299));var n=!1,r="",i=GS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=uy(t,1,!1,null,null,n,!1,r,i),t[Rr]=e.current,Ru(t.nodeType===8?t.parentNode:t),new cy(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=pT(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return ms(t)};gn.hydrate=function(t,e,n){if(!Dh(e))throw Error(D(200));return Nh(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!dy(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=GS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=WS(e,null,t,1,n??null,i,!1,s,o),t[Rr]=e.current,Ru(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xh(e)};gn.render=function(t,e,n){if(!Dh(e))throw Error(D(200));return Nh(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!Dh(t))throw Error(D(40));return t._reactRootContainer?(ms(function(){Nh(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};gn.unstable_batchedUpdates=iy;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dh(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return Nh(t,e,n,!1,r)};gn.version="18.2.0-next-9e3b772b8-20220608";function KS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KS)}catch(t){console.error(t)}}KS(),WI.exports=gn;var QS=WI.exports,LE=QS;cm.createRoot=LE.createRoot,cm.hydrateRoot=LE.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fu.apply(this,arguments)}var ei;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ei||(ei={}));const ME="popstate";function xN(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return rg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:YS(i)}return NN(e,n,null,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DN(){return Math.random().toString(36).substr(2,8)}function $E(t,e){return{usr:t.state,key:t.key,idx:e}}function rg(t,e,n,r){return n===void 0&&(n=null),Fu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zo(e):e,{state:n,key:e&&e.key||r||DN()})}function YS(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function NN(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ei.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(Fu({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=ei.Pop;let _=c(),p=_==null?null:_-l;l=_,u&&u({action:a,location:g.location,delta:p})}function h(_,p){a=ei.Push;let v=rg(g.location,_,p);n&&n(v,_),l=c()+1;let y=$E(v,l),E=g.createHref(v);try{o.pushState(y,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}s&&u&&u({action:a,location:g.location,delta:1})}function f(_,p){a=ei.Replace;let v=rg(g.location,_,p);n&&n(v,_),l=c();let y=$E(v,l),E=g.createHref(v);o.replaceState(y,"",E),s&&u&&u({action:a,location:g.location,delta:0})}function m(_){let p=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof _=="string"?_:YS(_);return Xe(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let g={get action(){return a},get location(){return t(i,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ME,d),u=_,()=>{i.removeEventListener(ME,d),u=null}},createHref(_){return e(i,_)},createURL:m,encodeLocation(_){let p=m(_);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:f,go(_){return o.go(_)}};return g}var UE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(UE||(UE={}));function ON(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Zo(e):e,i=ZS(r.pathname||"/",n);if(i==null)return null;let s=JS(t);VN(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=qN(s[a],GN(i));return o}function JS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Xe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=ss([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(Xe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),JS(s.children,e,c,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:jN(l,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of XS(s.path))i(s,o,u)}),e}function XS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=XS(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function VN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const FN=/^:\w+$/,LN=3,MN=2,$N=1,UN=10,BN=-2,BE=t=>t==="*";function jN(t,e){let n=t.split("/"),r=n.length;return n.some(BE)&&(r+=BN),e&&(r+=MN),n.filter(i=>!BE(i)).reduce((i,s)=>i+(FN.test(s)?LN:s===""?$N:UN),r)}function zN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function qN(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?e:e.slice(i.length)||"/",c=HN({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let d=a.route;s.push({params:r,pathname:ss([i,c.pathname]),pathnameBase:ZN(ss([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=ss([i,c.pathnameBase]))}return s}function HN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=WN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,d)=>{if(c==="*"){let h=a[d]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return l[c]=KN(a[d]||"",c),l},{}),pathname:s,pathnameBase:o,pattern:t}}function WN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GN(t){try{return decodeURI(t)}catch(e){return hy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function KN(t,e){try{return decodeURIComponent(t)}catch(n){return hy(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function ZS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function QN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Zo(t):t;return{pathname:n?n.startsWith("/")?n:YN(n,e):e,search:e2(r),hash:t2(i)}}function YN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ap(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function XN(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Zo(t):(i=Fu({},t),Xe(!i.pathname||!i.pathname.includes("?"),Ap("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),Ap("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),Ap("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let u=QN(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const ss=t=>t.join("/").replace(/\/\/+/g,"/"),ZN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),e2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,t2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function n2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eA=["post","put","patch","delete"];new Set(eA);const r2=["get",...eA];new Set(r2);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(this,arguments)}const fy=w.createContext(null),i2=w.createContext(null),Oh=w.createContext(null),Vh=w.createContext(null),Ds=w.createContext({outlet:null,matches:[],isDataRoute:!1}),tA=w.createContext(null);function Fh(){return w.useContext(Vh)!=null}function nA(){return Fh()||Xe(!1),w.useContext(Vh).location}function rA(t){w.useContext(Oh).static||w.useLayoutEffect(t)}function Lh(){let{isDataRoute:t}=w.useContext(Ds);return t?y2():s2()}function s2(){Fh()||Xe(!1);let t=w.useContext(fy),{basename:e,navigator:n}=w.useContext(Oh),{matches:r}=w.useContext(Ds),{pathname:i}=nA(),s=JSON.stringify(JN(r).map(u=>u.pathnameBase)),o=w.useRef(!1);return rA(()=>{o.current=!0}),w.useCallback(function(u,l){if(l===void 0&&(l={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=XN(u,JSON.parse(s),i,l.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:ss([e,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[e,n,s,i,t])}function o2(){let{matches:t}=w.useContext(Ds),e=t[t.length-1];return e?e.params:{}}function a2(t,e){return u2(t,e)}function u2(t,e,n){Fh()||Xe(!1);let{navigator:r}=w.useContext(Oh),{matches:i}=w.useContext(Ds),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=nA(),l;if(e){var c;let g=typeof e=="string"?Zo(e):e;a==="/"||(c=g.pathname)!=null&&c.startsWith(a)||Xe(!1),l=g}else l=u;let d=l.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",f=ON(t,{pathname:h}),m=f2(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:ss([a,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:ss([a,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n);return e&&m?w.createElement(Vh.Provider,{value:{location:Od({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:ei.Pop}},m):m}function l2(){let t=v2(),e=n2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,s)}const c2=w.createElement(l2,null);class d2 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?w.createElement(Ds.Provider,{value:this.props.routeContext},w.createElement(tA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h2(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(fy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Ds.Provider,{value:e},r)}function f2(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id]));a>=0||Xe(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,u,l)=>{let c=u.route.id?o==null?void 0:o[u.route.id]:null,d=null;n&&(d=u.route.errorElement||c2);let h=e.concat(s.slice(0,l+1)),f=()=>{let m;return c?m=d:u.route.Component?m=w.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=a,w.createElement(h2,{match:u,routeContext:{outlet:a,matches:h,isDataRoute:n!=null},children:m})};return n&&(u.route.ErrorBoundary||u.route.errorElement||l===0)?w.createElement(d2,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}var ig;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(ig||(ig={}));var Lu;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Lu||(Lu={}));function p2(t){let e=w.useContext(fy);return e||Xe(!1),e}function m2(t){let e=w.useContext(i2);return e||Xe(!1),e}function g2(t){let e=w.useContext(Ds);return e||Xe(!1),e}function iA(t){let e=g2(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function v2(){var t;let e=w.useContext(tA),n=m2(Lu.UseRouteError),r=iA(Lu.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function y2(){let{router:t}=p2(ig.UseNavigateStable),e=iA(Lu.UseNavigateStable),n=w.useRef(!1);return rA(()=>{n.current=!0}),w.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Od({fromRouteId:e},s)))},[t,e])}function qa(t){Xe(!1)}function _2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ei.Pop,navigator:s,static:o=!1}=t;Fh()&&Xe(!1);let a=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Zo(r));let{pathname:l="/",search:c="",hash:d="",state:h=null,key:f="default"}=r,m=w.useMemo(()=>{let g=ZS(l,a);return g==null?null:{location:{pathname:g,search:c,hash:d,state:h,key:f},navigationType:i}},[a,l,c,d,h,f,i]);return m==null?null:w.createElement(Oh.Provider,{value:u},w.createElement(Vh.Provider,{children:n,value:m}))}function E2(t){let{children:e,location:n}=t;return a2(sg(e),n)}var jE;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(jE||(jE={}));new Promise(()=>{});function sg(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,i)=>{if(!w.isValidElement(r))return;let s=[...e,i];if(r.type===w.Fragment){n.push.apply(n,sg(r.props.children,s));return}r.type!==qa&&Xe(!1),!r.props.index||!r.props.children||Xe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=sg(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const w2="startTransition",zE=lm[w2];function I2(t){let{basename:e,children:n,future:r,window:i}=t,s=w.useRef();s.current==null&&(s.current=xN({window:i,v5Compat:!0}));let o=s.current,[a,u]=w.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=w.useCallback(d=>{l&&zE?zE(()=>u(d)):u(d)},[u,l]);return w.useLayoutEffect(()=>o.listen(c),[o,c]),w.createElement(_2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}var qE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(qE||(qE={}));var HE;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(HE||(HE={}));function sA(t,e){return function(){return t.apply(e,arguments)}}const{toString:T2}=Object.prototype,{getPrototypeOf:py}=Object,Mh=(t=>e=>{const n=T2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),fr=t=>(t=t.toLowerCase(),e=>Mh(e)===t),$h=t=>e=>typeof e===t,{isArray:ea}=Array,Mu=$h("undefined");function S2(t){return t!==null&&!Mu(t)&&t.constructor!==null&&!Mu(t.constructor)&&Cn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const oA=fr("ArrayBuffer");function A2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&oA(t.buffer),e}const C2=$h("string"),Cn=$h("function"),aA=$h("number"),Uh=t=>t!==null&&typeof t=="object",R2=t=>t===!0||t===!1,Hc=t=>{if(Mh(t)!=="object")return!1;const e=py(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},P2=fr("Date"),b2=fr("File"),k2=fr("Blob"),x2=fr("FileList"),D2=t=>Uh(t)&&Cn(t.pipe),N2=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Cn(t.append)&&((e=Mh(t))==="formdata"||e==="object"&&Cn(t.toString)&&t.toString()==="[object FormData]"))},O2=fr("URLSearchParams"),V2=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),ea(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function uA(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const lA=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),cA=t=>!Mu(t)&&t!==lA;function og(){const{caseless:t}=cA(this)&&this||{},e={},n=(r,i)=>{const s=t&&uA(e,i)||i;Hc(e[s])&&Hc(r)?e[s]=og(e[s],r):Hc(r)?e[s]=og({},r):ea(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&wl(arguments[r],n);return e}const F2=(t,e,n,{allOwnKeys:r}={})=>(wl(e,(i,s)=>{n&&Cn(i)?t[s]=sA(i,n):t[s]=i},{allOwnKeys:r}),t),L2=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),M2=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},$2=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&py(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},U2=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},B2=t=>{if(!t)return null;if(ea(t))return t;let e=t.length;if(!aA(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},j2=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&py(Uint8Array)),z2=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},q2=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},H2=fr("HTMLFormElement"),W2=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),WE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),G2=fr("RegExp"),dA=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};wl(n,(i,s)=>{e(i,s,t)!==!1&&(r[s]=i)}),Object.defineProperties(t,r)},K2=t=>{dA(t,(e,n)=>{if(Cn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Cn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Q2=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return ea(t)?r(t):r(String(t).split(e)),n},Y2=()=>{},J2=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Cp="abcdefghijklmnopqrstuvwxyz",GE="0123456789",hA={DIGIT:GE,ALPHA:Cp,ALPHA_DIGIT:Cp+Cp.toUpperCase()+GE},X2=(t=16,e=hA.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function Z2(t){return!!(t&&Cn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const eO=t=>{const e=new Array(10),n=(r,i)=>{if(Uh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=ea(r)?[]:{};return wl(r,(o,a)=>{const u=n(o,i+1);!Mu(u)&&(s[a]=u)}),e[i]=void 0,s}}return r};return n(t,0)},tO=fr("AsyncFunction"),nO=t=>t&&(Uh(t)||Cn(t))&&Cn(t.then)&&Cn(t.catch),P={isArray:ea,isArrayBuffer:oA,isBuffer:S2,isFormData:N2,isArrayBufferView:A2,isString:C2,isNumber:aA,isBoolean:R2,isObject:Uh,isPlainObject:Hc,isUndefined:Mu,isDate:P2,isFile:b2,isBlob:k2,isRegExp:G2,isFunction:Cn,isStream:D2,isURLSearchParams:O2,isTypedArray:j2,isFileList:x2,forEach:wl,merge:og,extend:F2,trim:V2,stripBOM:L2,inherits:M2,toFlatObject:$2,kindOf:Mh,kindOfTest:fr,endsWith:U2,toArray:B2,forEachEntry:z2,matchAll:q2,isHTMLForm:H2,hasOwnProperty:WE,hasOwnProp:WE,reduceDescriptors:dA,freezeMethods:K2,toObjectSet:Q2,toCamelCase:W2,noop:Y2,toFiniteNumber:J2,findKey:uA,global:lA,isContextDefined:cA,ALPHABET:hA,generateString:X2,isSpecCompliantForm:Z2,toJSONObject:eO,isAsyncFn:tO,isThenable:nO};function se(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}P.inherits(se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fA=se.prototype,pA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pA[t]={value:t}});Object.defineProperties(se,pA);Object.defineProperty(fA,"isAxiosError",{value:!0});se.from=(t,e,n,r,i,s)=>{const o=Object.create(fA);return P.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),se.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const rO=null;function ag(t){return P.isPlainObject(t)||P.isArray(t)}function mA(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function KE(t,e,n){return t?t.concat(e).map(function(i,s){return i=mA(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function iO(t){return P.isArray(t)&&!t.some(ag)}const sO=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function Bh(t,e,n){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,_){return!P.isUndefined(_[g])});const r=n.metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(P.isDate(m))return m.toISOString();if(!u&&P.isBlob(m))throw new se("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(m)||P.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function c(m,g,_){let p=m;if(m&&!_&&typeof m=="object"){if(P.endsWith(g,"{}"))g=r?g:g.slice(0,-2),m=JSON.stringify(m);else if(P.isArray(m)&&iO(m)||(P.isFileList(m)||P.endsWith(g,"[]"))&&(p=P.toArray(m)))return g=mA(g),p.forEach(function(y,E){!(P.isUndefined(y)||y===null)&&e.append(o===!0?KE([g],E,s):o===null?g:g+"[]",l(y))}),!1}return ag(m)?!0:(e.append(KE(_,g,s),l(m)),!1)}const d=[],h=Object.assign(sO,{defaultVisitor:c,convertValue:l,isVisitable:ag});function f(m,g){if(!P.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(m),P.forEach(m,function(p,v){(!(P.isUndefined(p)||p===null)&&i.call(e,p,P.isString(v)?v.trim():v,g,h))===!0&&f(p,g?g.concat(v):[v])}),d.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return f(t),e}function QE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function my(t,e){this._pairs=[],t&&Bh(t,this,e)}const gA=my.prototype;gA.append=function(e,n){this._pairs.push([e,n])};gA.toString=function(e){const n=e?function(r){return e.call(this,r,QE)}:QE;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function oO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vA(t,e,n){if(!e)return t;const r=n&&n.encode||oO,i=n&&n.serialize;let s;if(i?s=i(e,n):s=P.isURLSearchParams(e)?e.toString():new my(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class aO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(r){r!==null&&e(r)})}}const YE=aO,yA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uO=typeof URLSearchParams<"u"?URLSearchParams:my,lO=typeof FormData<"u"?FormData:null,cO=typeof Blob<"u"?Blob:null,dO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),hO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Xn={isBrowser:!0,classes:{URLSearchParams:uO,FormData:lO,Blob:cO},isStandardBrowserEnv:dO,isStandardBrowserWebWorkerEnv:hO,protocols:["http","https","file","blob","url","data"]};function fO(t,e){return Bh(t,new Xn.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Xn.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function pO(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function mO(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function _A(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),u=s>=n.length;return o=!o&&P.isArray(i)?i.length:o,u?(P.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!P.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&P.isArray(i[o])&&(i[o]=mO(i[o])),!a)}if(P.isFormData(t)&&P.isFunction(t.entries)){const n={};return P.forEachEntry(t,(r,i)=>{e(pO(r),i,n,0)}),n}return null}const gO={"Content-Type":void 0};function vO(t,e,n){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const jh={transitional:yA,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=P.isObject(e);if(s&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return i&&i?JSON.stringify(_A(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return fO(e,this.formSerializer).toString();if((a=P.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Bh(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),vO(e)):e}],transformResponse:[function(e){const n=this.transitional||jh.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&P.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?se.from(a,se.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xn.classes.FormData,Blob:Xn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};P.forEach(["delete","get","head"],function(e){jh.headers[e]={}});P.forEach(["post","put","patch"],function(e){jh.headers[e]=P.merge(gO)});const gy=jh,yO=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_O=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&yO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},JE=Symbol("internals");function Ca(t){return t&&String(t).trim().toLowerCase()}function Wc(t){return t===!1||t==null?t:P.isArray(t)?t.map(Wc):String(t)}function EO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const wO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rp(t,e,n,r,i){if(P.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!P.isString(e)){if(P.isString(r))return e.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(e)}}function IO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function TO(t,e){const n=P.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class zh{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,u,l){const c=Ca(u);if(!c)throw new Error("header name must be a non-empty string");const d=P.findKey(i,c);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||u]=Wc(a))}const o=(a,u)=>P.forEach(a,(l,c)=>s(l,c,u));return P.isPlainObject(e)||e instanceof this.constructor?o(e,n):P.isString(e)&&(e=e.trim())&&!wO(e)?o(_O(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Ca(e),e){const r=P.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return EO(i);if(P.isFunction(n))return n.call(this,i,r);if(P.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ca(e),e){const r=P.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Rp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Ca(o),o){const a=P.findKey(r,o);a&&(!n||Rp(r,r[a],a,n))&&(delete r[a],i=!0)}}return P.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Rp(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return P.forEach(this,(i,s)=>{const o=P.findKey(r,s);if(o){n[o]=Wc(i),delete n[s];return}const a=e?IO(s):String(s).trim();a!==s&&delete n[s],n[a]=Wc(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return P.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[JE]=this[JE]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Ca(o);r[a]||(TO(i,o),r[a]=!0)}return P.isArray(e)?e.forEach(s):s(e),this}}zh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.freezeMethods(zh.prototype);P.freezeMethods(zh);const Ir=zh;function Pp(t,e){const n=this||gy,r=e||n,i=Ir.from(r.headers);let s=r.data;return P.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function EA(t){return!!(t&&t.__CANCEL__)}function Il(t,e,n){se.call(this,t??"canceled",se.ERR_CANCELED,e,n),this.name="CanceledError"}P.inherits(Il,se,{__CANCEL__:!0});function SO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new se("Request failed with status code "+n.status,[se.ERR_BAD_REQUEST,se.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const AO=Xn.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,a){const u=[];u.push(n+"="+encodeURIComponent(r)),P.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),P.isString(s)&&u.push("path="+s),P.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function CO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function RO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function wA(t,e){return t&&!CO(e)?RO(t,e):e}const PO=Xn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=P.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function bO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function kO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),c=r[s];o||(o=l),n[i]=u,r[i]=l;let d=s,h=0;for(;d!==i;)h+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-o<e)return;const f=c&&l-c;return f?Math.round(h*1e3/f):void 0}}function XE(t,e){let n=0;const r=kO(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,u=r(a),l=s<=o;n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:u||void 0,estimated:u&&o&&l?(o-s)/u:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const xO=typeof XMLHttpRequest<"u",DO=xO&&function(t){return new Promise(function(n,r){let i=t.data;const s=Ir.from(t.headers).normalize(),o=t.responseType;let a;function u(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}P.isFormData(i)&&(Xn.isStandardBrowserEnv||Xn.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(t.auth){const f=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(f+":"+m))}const c=wA(t.baseURL,t.url);l.open(t.method.toUpperCase(),vA(c,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function d(){if(!l)return;const f=Ir.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:f,config:t,request:l};SO(function(p){n(p),u()},function(p){r(p),u()},g),l=null}if("onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(d)},l.onabort=function(){l&&(r(new se("Request aborted",se.ECONNABORTED,t,l)),l=null)},l.onerror=function(){r(new se("Network Error",se.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const g=t.transitional||yA;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),r(new se(m,g.clarifyTimeoutError?se.ETIMEDOUT:se.ECONNABORTED,t,l)),l=null},Xn.isStandardBrowserEnv){const f=(t.withCredentials||PO(c))&&t.xsrfCookieName&&AO.read(t.xsrfCookieName);f&&s.set(t.xsrfHeaderName,f)}i===void 0&&s.setContentType(null),"setRequestHeader"in l&&P.forEach(s.toJSON(),function(m,g){l.setRequestHeader(g,m)}),P.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),o&&o!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",XE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",XE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=f=>{l&&(r(!f||f.type?new Il(null,t,l):f),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const h=bO(c);if(h&&Xn.protocols.indexOf(h)===-1){r(new se("Unsupported protocol "+h+":",se.ERR_BAD_REQUEST,t));return}l.send(i||null)})},Gc={http:rO,xhr:DO};P.forEach(Gc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const NO={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=P.isString(n)?Gc[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new se(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(P.hasOwnProp(Gc,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!P.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Gc};function bp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Il(null,t)}function ZE(t){return bp(t),t.headers=Ir.from(t.headers),t.data=Pp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),NO.getAdapter(t.adapter||gy.adapter)(t).then(function(r){return bp(t),r.data=Pp.call(t,t.transformResponse,r),r.headers=Ir.from(r.headers),r},function(r){return EA(r)||(bp(t),r&&r.response&&(r.response.data=Pp.call(t,t.transformResponse,r.response),r.response.headers=Ir.from(r.response.headers))),Promise.reject(r)})}const ew=t=>t instanceof Ir?t.toJSON():t;function No(t,e){e=e||{};const n={};function r(l,c,d){return P.isPlainObject(l)&&P.isPlainObject(c)?P.merge.call({caseless:d},l,c):P.isPlainObject(c)?P.merge({},c):P.isArray(c)?c.slice():c}function i(l,c,d){if(P.isUndefined(c)){if(!P.isUndefined(l))return r(void 0,l,d)}else return r(l,c,d)}function s(l,c){if(!P.isUndefined(c))return r(void 0,c)}function o(l,c){if(P.isUndefined(c)){if(!P.isUndefined(l))return r(void 0,l)}else return r(void 0,c)}function a(l,c,d){if(d in e)return r(l,c);if(d in t)return r(void 0,l)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,c)=>i(ew(l),ew(c),!0)};return P.forEach(Object.keys(Object.assign({},t,e)),function(c){const d=u[c]||i,h=d(t[c],e[c],c);P.isUndefined(h)&&d!==a||(n[c]=h)}),n}const IA="1.4.0",vy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{vy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const tw={};vy.transitional=function(e,n,r){function i(s,o){return"[Axios v"+IA+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new se(i(o," has been removed"+(n?" in "+n:"")),se.ERR_DEPRECATED);return n&&!tw[o]&&(tw[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function OO(t,e,n){if(typeof t!="object")throw new se("options must be an object",se.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new se("option "+s+" must be "+u,se.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new se("Unknown option "+s,se.ERR_BAD_OPTION)}}const ug={assertOptions:OO,validators:vy},Br=ug.validators;class Vd{constructor(e){this.defaults=e,this.interceptors={request:new YE,response:new YE}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=No(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ug.assertOptions(r,{silentJSONParsing:Br.transitional(Br.boolean),forcedJSONParsing:Br.transitional(Br.boolean),clarifyTimeoutError:Br.transitional(Br.boolean)},!1),i!=null&&(P.isFunction(i)?n.paramsSerializer={serialize:i}:ug.assertOptions(i,{encode:Br.function,serialize:Br.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=s&&P.merge(s.common,s[n.method]),o&&P.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),n.headers=Ir.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(u=u&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let c,d=0,h;if(!u){const m=[ZE.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,l),h=m.length,c=Promise.resolve(n);d<h;)c=c.then(m[d++],m[d++]);return c}h=a.length;let f=n;for(d=0;d<h;){const m=a[d++],g=a[d++];try{f=m(f)}catch(_){g.call(this,_);break}}try{c=ZE.call(this,f)}catch(m){return Promise.reject(m)}for(d=0,h=l.length;d<h;)c=c.then(l[d++],l[d++]);return c}getUri(e){e=No(this.defaults,e);const n=wA(e.baseURL,e.url);return vA(n,e.params,e.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(e){Vd.prototype[e]=function(n,r){return this.request(No(r||{},{method:e,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(No(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Vd.prototype[e]=n(),Vd.prototype[e+"Form"]=n(!0)});const Kc=Vd;class yy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Il(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new yy(function(i){e=i}),cancel:e}}}const VO=yy;function FO(t){return function(n){return t.apply(null,n)}}function LO(t){return P.isObject(t)&&t.isAxiosError===!0}const lg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lg).forEach(([t,e])=>{lg[e]=t});const MO=lg;function TA(t){const e=new Kc(t),n=sA(Kc.prototype.request,e);return P.extend(n,Kc.prototype,e,{allOwnKeys:!0}),P.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return TA(No(t,i))},n}const Ze=TA(gy);Ze.Axios=Kc;Ze.CanceledError=Il;Ze.CancelToken=VO;Ze.isCancel=EA;Ze.VERSION=IA;Ze.toFormData=Bh;Ze.AxiosError=se;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=FO;Ze.isAxiosError=LO;Ze.mergeConfig=No;Ze.AxiosHeaders=Ir;Ze.formToJSON=t=>_A(P.isHTMLForm(t)?new FormData(t):t);Ze.HttpStatusCode=MO;Ze.default=Ze;const cg=Ze;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$O=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},AA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;u||(f=64,o||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$O(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new UO;const h=s<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BO=function(t){const e=SA(t);return AA.encodeByteArray(e,!0)},Fd=function(t){return BO(t).replace(/\./g,"")},CA=function(t){try{return AA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ld(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!jO(n)||(t[n]=Ld(t[n],e[n]));return t}function jO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=()=>zO().__FIREBASE_DEFAULTS__,HO=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CA(t[1]);return e&&JSON.parse(e)},_y=()=>{try{return qO()||HO()||WO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RA=()=>{var t;return(t=_y())===null||t===void 0?void 0:t.config},GO=t=>{var e;return(e=_y())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Fd(JSON.stringify(n)),Fd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function Ey(){var t;const e=(t=_y())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JO(){return typeof self=="object"&&self.self===self}function PA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bA(){const t=ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XO(){return!Ey()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $u(){try{return typeof indexedDB=="object"}catch{return!1}}function ZO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="FirebaseError";class jt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eV,Object.setPrototypeOf(this,jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ns.prototype.create)}}class Ns{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?tV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jt(i,a,r)}}function tV(t,e){return t.replace(nV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(rw(s)&&rw(o)){if(!dg(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ha(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kA(t,e){const n=new iV(t,e);return n.subscribe.bind(n)}class iV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kp),i.error===void 0&&(i.error=kp),i.complete===void 0&&(i.complete=kp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t){return t&&t._delegate?t._delegate:t}class lr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uV(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aV(t){return t===ji?void 0:t}function uV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=[];var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const xA={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},cV=re.INFO,dV={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},hV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=dV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qh{constructor(e){this.name=e,this._logLevel=cV,this._logHandler=hV,this._userLogHandler=null,Iy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}function fV(t){Iy.forEach(e=>{e.setLogLevel(t)})}function pV(t,e){for(const n of Iy){let r=null;e&&e.level&&(r=xA[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&t({level:re[s].toLowerCase(),message:a,args:o,type:i.name})}}}const mV=(t,e)=>e.some(n=>t instanceof n);let iw,sw;function gV(){return iw||(iw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vV(){return sw||(sw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DA=new WeakMap,hg=new WeakMap,NA=new WeakMap,xp=new WeakMap,Ty=new WeakMap;function yV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(di(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&DA.set(n,t)}).catch(()=>{}),Ty.set(e,t),e}function _V(t){if(hg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hg.set(t,e)}let fg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return di(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EV(t){fg=t(fg)}function wV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dp(this),e,...n);return NA.set(r,e.sort?e.sort():[e]),di(r)}:vV().includes(t)?function(...e){return t.apply(Dp(this),e),di(DA.get(this))}:function(...e){return di(t.apply(Dp(this),e))}}function IV(t){return typeof t=="function"?wV(t):(t instanceof IDBTransaction&&_V(t),mV(t,gV())?new Proxy(t,fg):t)}function di(t){if(t instanceof IDBRequest)return yV(t);if(xp.has(t))return xp.get(t);const e=IV(t);return e!==t&&(xp.set(t,e),Ty.set(e,t)),e}const Dp=t=>Ty.get(t);function TV(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=di(o);return r&&o.addEventListener("upgradeneeded",u=>{r(di(o.result),u.oldVersion,u.newVersion,di(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const SV=["get","getKey","getAll","getAllKeys","count"],AV=["put","add","delete","clear"],Np=new Map;function ow(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=AV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SV.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Np.set(e,s),s}EV(t=>({...t,get:(e,n,r)=>ow(e,n)||t.get(e,n,r),has:(e,n)=>!!ow(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pg="@firebase/app",aw="0.9.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new qh("@firebase/app"),PV="@firebase/app-compat",bV="@firebase/analytics-compat",kV="@firebase/analytics",xV="@firebase/app-check-compat",DV="@firebase/app-check",NV="@firebase/auth",OV="@firebase/auth-compat",VV="@firebase/database",FV="@firebase/database-compat",LV="@firebase/functions",MV="@firebase/functions-compat",$V="@firebase/installations",UV="@firebase/installations-compat",BV="@firebase/messaging",jV="@firebase/messaging-compat",zV="@firebase/performance",qV="@firebase/performance-compat",HV="@firebase/remote-config",WV="@firebase/remote-config-compat",GV="@firebase/storage",KV="@firebase/storage-compat",QV="@firebase/firestore",YV="@firebase/firestore-compat",JV="firebase",XV="10.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="[DEFAULT]",ZV={[pg]:"fire-core",[PV]:"fire-core-compat",[kV]:"fire-analytics",[bV]:"fire-analytics-compat",[DV]:"fire-app-check",[xV]:"fire-app-check-compat",[NV]:"fire-auth",[OV]:"fire-auth-compat",[VV]:"fire-rtdb",[FV]:"fire-rtdb-compat",[LV]:"fire-fn",[MV]:"fire-fn-compat",[$V]:"fire-iid",[UV]:"fire-iid-compat",[BV]:"fire-fcm",[jV]:"fire-fcm-compat",[zV]:"fire-perf",[qV]:"fire-perf-compat",[HV]:"fire-rc",[WV]:"fire-rc-compat",[GV]:"fire-gcs",[KV]:"fire-gcs-compat",[QV]:"fire-fst",[YV]:"fire-fst-compat","fire-js":"fire-js",[JV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Map,Uu=new Map;function Md(t,e){try{t.container.addComponent(e)}catch(n){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function OA(t,e){t.container.addOrOverwriteComponent(e)}function vi(t){const e=t.name;if(Uu.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;Uu.set(e,t);for(const n of gi.values())Md(n,t);return!0}function VA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function eF(t,e,n=mi){VA(t,e).clearInstance(n)}function tF(){Uu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Tr=new Ns("app","Firebase",nF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rF=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=XV;function Sy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Tr.create("bad-app-name",{appName:String(i)});if(n||(n=RA()),!n)throw Tr.create("no-options");const s=gi.get(i);if(s){if(dg(n,s.options)&&dg(r,s.config))return s;throw Tr.create("duplicate-app",{appName:i})}const o=new lV(i);for(const u of Uu.values())o.addComponent(u);const a=new rF(n,r,o);return gi.set(i,a),a}function iF(t=mi){const e=gi.get(t);if(!e&&t===mi&&RA())return Sy();if(!e)throw Tr.create("no-app",{appName:t});return e}function sF(){return Array.from(gi.values())}async function FA(t){const e=t.name;gi.has(e)&&(gi.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function or(t,e,n){var r;let i=(r=ZV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(a.join(" "));return}vi(new lr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function LA(t,e){if(t!==null&&typeof t!="function")throw Tr.create("invalid-log-argument");pV(t,e)}function MA(t){fV(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF="firebase-heartbeat-database",aF=1,Bu="firebase-heartbeat-store";let Op=null;function $A(){return Op||(Op=TV(oF,aF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bu)}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),Op}async function uF(t){try{return await(await $A()).transaction(Bu).objectStore(Bu).get(UA(t))}catch(e){if(e instanceof jt)gs.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(n.message)}}}async function uw(t,e){try{const r=(await $A()).transaction(Bu,"readwrite");await r.objectStore(Bu).put(e,UA(t)),await r.done}catch(n){if(n instanceof jt)gs.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gs.warn(r.message)}}}function UA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=1024,cF=30*24*60*60*1e3;class dF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=cF}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lw(),{heartbeatsToSend:n,unsentEntries:r}=hF(this._heartbeatsCache.heartbeats),i=Fd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function lw(){return new Date().toISOString().substring(0,10)}function hF(t,e=lF){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $u()?ZO().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await uF(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return uw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return uw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cw(t){return Fd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){vi(new lr("platform-logger",e=>new CV(e),"PRIVATE")),vi(new lr("heartbeat",e=>new dF(e),"PRIVATE")),or(pg,aw,t),or(pg,aw,"esm2017"),or("fire-js","")}pF("");const mF=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:jt,SDK_VERSION:xi,_DEFAULT_ENTRY_NAME:mi,_addComponent:Md,_addOrOverwriteComponent:OA,_apps:gi,_clearComponents:tF,_components:Uu,_getProvider:VA,_registerComponent:vi,_removeServiceInstance:eF,deleteApp:FA,getApp:iF,getApps:sF,initializeApp:Sy,onLog:LA,registerVersion:or,setLogLevel:MA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,n){this._delegate=e,this.firebase=n,Md(e,new lr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),FA(this._delegate)))}_getService(e,n=mi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=mi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Md(this._delegate,e)}_addOrOverwriteComponent(e){OA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},dw=new Ns("app-compat","Firebase",vF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:or,setLogLevel:MA,onLog:LA,apps:null,SDK_VERSION:xi,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:mF}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function i(l){if(l=l||mi,!nw(e,l))throw dw.create("no-app",{appName:l});return e[l]}i.App=t;function s(l,c={}){const d=Sy(l,c);if(nw(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const c=l.name,d=c.replace("-compat","");if(vi(l)&&l.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw dw.create("invalid-app-argument",{appName:c});return f[d]()};l.serviceProps!==void 0&&Ld(h,l.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,c).apply(this,l.multipleInstances?f:[])}}return l.type==="PUBLIC"?n[d]:null}function u(l,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){const t=yF(gF);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:BA,extendNamespace:e,createSubscribe:kA,ErrorFactory:Ns,deepExtend:Ld});function e(n){Ld(t,n)}return t}const _F=BA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new qh("@firebase/app-compat"),EF="@firebase/app-compat",wF="0.2.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(t){or(EF,wF,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(JO()&&self.firebase!==void 0){hw.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&hw.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const yt=_F;IF();var TF="firebase",SF="10.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yt.registerVersion(TF,SF,"app-compat");function Ay(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Ra={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},js={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}}function jA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CF=AF,RF=jA,zA=new Ns("auth","Firebase",jA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new qh("@firebase/auth");function PF(t,...e){$d.logLevel<=re.WARN&&$d.warn(`Auth (${xi}): ${t}`,...e)}function Qc(t,...e){$d.logLevel<=re.ERROR&&$d.error(`Auth (${xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,...e){throw Cy(t,...e)}function Et(t,...e){return Cy(t,...e)}function qA(t,e,n){const r=Object.assign(Object.assign({},RF()),{[e]:n});return new Ns("auth","Firebase",r).create(e,{appName:t.name})}function na(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tt(t,"argument-error"),qA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zA.create(t,...e)}function N(t,e,...n){if(!t)throw Cy(e,...n)}function Zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qc(e),new Error(e)}function $n(t,e){t||Zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ry(){return fw()==="http:"||fw()==="https:"}function fw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ry()||PA()||"connection"in navigator)?navigator.onLine:!0}function kF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,$n(n>e,"Short delay should be less than long delay!"),this.isMobile=YO()||wy()}get(){return bF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t,e){$n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=new Tl(3e4,6e4);function Ke(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function tt(t,e,n,r,i={}){return WA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ta(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),HA.fetch()(GA(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function WA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xF),e);try{const i=new NF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wa(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Wa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Wa(t,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw qA(t,c,l);Tt(t,c)}}catch(i){if(i instanceof jt)throw i;Tt(t,"network-request-failed",{message:String(i)})}}async function Or(t,e,n,r,i={}){const s=await tt(t,e,n,r,i);return"mfaPendingCredential"in s&&Tt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function GA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Py(t.config,i):`${t.config.apiScheme}://${i}`}class NF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Et(this.auth,"network-request-failed")),DF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Et(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OF(t,e){return tt(t,"POST","/v1/accounts:delete",e)}async function VF(t,e){return tt(t,"POST","/v1/accounts:update",e)}async function FF(t,e){return tt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LF(t,e=!1){const n=H(t),r=await n.getIdToken(e),i=Hh(r);N(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:lu(Vp(i.auth_time)),issuedAtTime:lu(Vp(i.iat)),expirationTime:lu(Vp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Vp(t){return Number(t)*1e3}function Hh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const i=CA(n);return i?JSON.parse(i):(Qc("Failed to decode base64 JWT payload"),null)}catch(i){return Qc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function MF(t){const e=Hh(t);return N(e,"internal-error"),N(typeof e.exp<"u","internal-error"),N(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jt&&$F(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $F({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await kr(t,FF(n,{idToken:r}));N(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?zF(s.providerUserInfo):[],a=jF(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new KA(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function BF(t){const e=H(t);await zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zF(t){return t.map(e=>{var{providerId:n}=e,r=Ay(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e){const n=await WA(t,{},async()=>{const r=ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=GA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){N(e.idToken,"internal-error"),N(typeof e.idToken<"u","internal-error"),N(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return N(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await qF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qu;return r&&(N(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(N(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(N(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qu,this.toJSON())}_performRefresh(){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,e){N(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class os{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ay(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new KA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await kr(this,this.stsTokenManager.getToken(this.auth,e));return N(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LF(this,e)}reload(){return BF(this)}_assign(e){this!==e&&(N(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new os(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){N(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await kr(this,OF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,p=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:E,isAnonymous:T,providerData:I,stsTokenManager:A}=n;N(y&&A,e,"internal-error");const k=qu.fromJSON(this.name,A);N(typeof y=="string",e,"internal-error"),jr(d,e.name),jr(h,e.name),N(typeof E=="boolean",e,"internal-error"),N(typeof T=="boolean",e,"internal-error"),jr(f,e.name),jr(m,e.name),jr(g,e.name),jr(_,e.name),jr(p,e.name),jr(v,e.name);const U=new os({uid:y,auth:e,email:h,emailVerified:E,displayName:d,isAnonymous:T,photoURL:m,phoneNumber:f,tenantId:g,stsTokenManager:k,createdAt:p,lastLoginAt:v});return I&&Array.isArray(I)&&(U.providerData=I.map(M=>Object.assign({},M))),_&&(U._redirectEventId=_),U}static async _fromIdTokenResponse(e,n,r=!1){const i=new qu;i.updateFromServerResponse(n);const s=new os({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=new Map;function cn(t){$n(t instanceof Function,"Expected a class definition");let e=pw.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QA.type="NONE";const Oo=QA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,e,n){return`firebase:${t}:${e}:${n}`}class vo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=as(this.userKey,i.apiKey,s),this.fullPersistenceKey=as("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?os._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vo(cn(Oo),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||cn(Oo);const o=as(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const d=os._fromJSON(e,c);l!==s&&(a=d),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new vo(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new vo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZA(e))return"Blackberry";if(eC(e))return"Webos";if(by(e))return"Safari";if((e.includes("chrome/")||JA(e))&&!e.includes("edge/"))return"Chrome";if(Sl(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YA(t=ke()){return/firefox\//i.test(t)}function by(t=ke()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JA(t=ke()){return/crios\//i.test(t)}function XA(t=ke()){return/iemobile/i.test(t)}function Sl(t=ke()){return/android/i.test(t)}function ZA(t=ke()){return/blackberry/i.test(t)}function eC(t=ke()){return/webos/i.test(t)}function ra(t=ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HF(t=ke()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function WF(t=ke()){var e;return ra(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GF(){return bA()&&document.documentMode===10}function tC(t=ke()){return ra(t)||Sl(t)||eC(t)||ZA(t)||/windows phone/i.test(t)||XA(t)}function KF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e=[]){let n;switch(t){case"Browser":n=mw(ke());break;case"Worker":n=`${mw(ke())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xi}/${r}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(t){return(await tt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function rC(t,e){return tt(t,"GET","/v2/recaptchaConfig",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(t){return t!==void 0&&t.getResponse!==void 0}function vw(t){return t!==void 0&&t.enterprise!==void 0}class iC{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function ky(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Et("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",YF().appendChild(r)})}function sC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const JF="https://www.google.com/recaptcha/enterprise.js?render=",XF="recaptcha-enterprise",ZF="NO_RECAPTCHA";class oC{constructor(e){this.type=XF,this.auth=Be(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{rC(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new iC(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;vw(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(ZF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&vw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}ky(JF+a).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function yi(t,e,n,r=!1){const i=new oC(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yw(this),this.idTokenSubscription=new yw(this),this.beforeStateQueue=new eL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return N(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?H(e):null;return n&&N(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&N(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(cn(e))})}async initializeRecaptchaConfig(){const e=await rC(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new iC(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new oC(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ns("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cn(e)||this._popupRedirectResolver;N(n,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return N(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return N(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Be(t){return H(t)}class yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=kA(n=>this.observer=n)}get next(){return N(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rL(t,e,n){const r=Be(t);N(r._canInitEmulator,r,"emulator-config-failed"),N(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=aC(e),{host:o,port:a}=iL(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||sL()}function aC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iL(t){const e=aC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:_w(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:_w(o)}}}function _w(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t,e){return tt(t,"POST","/v1/accounts:resetPassword",Ke(t,e))}async function lC(t,e){return tt(t,"POST","/v1/accounts:update",e)}async function oL(t,e){return tt(t,"POST","/v1/accounts:update",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fp(t,e){return Or(t,"POST","/v1/accounts:signInWithPassword",Ke(t,e))}async function Wh(t,e){return tt(t,"POST","/v1/accounts:sendOobCode",Ke(t,e))}async function aL(t,e){return Wh(t,e)}async function Lp(t,e){return Wh(t,e)}async function Mp(t,e){return Wh(t,e)}async function uL(t,e){return Wh(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t,e){return Or(t,"POST","/v1/accounts:signInWithEmailLink",Ke(t,e))}async function cL(t,e){return Or(t,"POST","/v1/accounts:signInWithEmailLink",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends ia{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Hu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await yi(e,r,"signInWithPassword");return Fp(e,i)}else return Fp(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await yi(e,r,"signInWithPassword");return Fp(e,s)}else return Promise.reject(i)});case"emailLink":return lL(e,{email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return lC(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return cL(e,{idToken:n,email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sr(t,e){return Or(t,"POST","/v1/accounts:signInWithIdp",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="http://localhost";class cr extends ia{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ay(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new cr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Sr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Sr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sr(e,n)}buildRequest(){const e={requestUri:dL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(t,e){return tt(t,"POST","/v1/accounts:sendVerificationCode",Ke(t,e))}async function fL(t,e){return Or(t,"POST","/v1/accounts:signInWithPhoneNumber",Ke(t,e))}async function pL(t,e){const n=await Or(t,"POST","/v1/accounts:signInWithPhoneNumber",Ke(t,e));if(n.temporaryProof)throw Wa(t,"account-exists-with-different-credential",n);return n}const mL={USER_NOT_FOUND:"user-not-found"};async function gL(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Or(t,"POST","/v1/accounts:signInWithPhoneNumber",Ke(t,n),mL)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends ia{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new us({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new us({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return fL(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return pL(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return gL(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new us({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yL(t){const e=uo(Ha(t)).link,n=e?uo(Ha(e)).deep_link_id:null,r=uo(Ha(t)).deep_link_id;return(r?uo(Ha(r)).link:null)||r||n||e||t}class Gh{constructor(e){var n,r,i,s,o,a;const u=uo(Ha(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,c=(r=u.oobCode)!==null&&r!==void 0?r:null,d=vL((i=u.mode)!==null&&i!==void 0?i:null);N(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=yL(e);try{return new Gh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.providerId=Di.PROVIDER_ID}static credential(e,n){return Hu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gh.parseLink(n);return N(r,"argument-error"),Hu._fromEmailAndCode(e,r.code,r.tenantId)}}Di.PROVIDER_ID="password";Di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Vr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yo extends sa{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return N("providerId"in n&&"signInMethod"in n,"argument-error"),cr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return N(e.idToken||e.accessToken,"argument-error"),cr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return yo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return yo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new yo(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends sa{constructor(){super("facebook.com")}static credential(e){return cr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends sa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return cr._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Kn.credential(n,r)}catch{return null}}}Kn.GOOGLE_SIGN_IN_METHOD="google.com";Kn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends sa{constructor(){super("github.com")}static credential(e){return cr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qn.credential(e.oauthAccessToken)}catch{return null}}}Qn.GITHUB_SIGN_IN_METHOD="github.com";Qn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="http://localhost";class Vo extends ia{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Sr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Sr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Vo(r,s)}static _create(e,n){return new Vo(e,n)}buildRequest(){return{requestUri:_L,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="saml.";class Ud extends Vr{constructor(e){N(e.startsWith(EL),"argument-error"),super(e)}static credentialFromResult(e){return Ud.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ud.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Vo.fromJSON(e);return N(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Vo._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends sa{constructor(){super("twitter.com")}static credential(e,n){return cr._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Yn.credential(n,r)}catch{return null}}}Yn.TWITTER_SIGN_IN_METHOD="twitter.com";Yn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t,e){return Or(t,"POST","/v1/accounts:signUp",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await os._fromIdTokenResponse(e,r,i),o=Ew(r);return new bn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ew(r);return new bn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ew(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(t){var e;const n=Be(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new bn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Yc(n,{returnSecureToken:!0}),i=await bn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends jt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Bd(e,n,r,i)}}function cC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(t,e){const n=H(t);await Kh(!0,n,e);const{providerUserInfo:r}=await VF(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=dC(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function xy(t,e,n=!1){const r=await kr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bn._forOperation(t,"link",r)}async function Kh(t,e,n){await zu(e);const r=dC(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";N(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await kr(t,cC(r,i,e,t),n);N(s.idToken,r,"internal-error");const o=Hh(s.idToken);N(o,r,"internal-error");const{sub:a}=o;return N(t.uid===a,r,"user-mismatch"),bn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Tt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(t,e,n=!1){const r="signIn",i=await cC(t,r,e),s=await bn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Qh(t,e){return fC(Be(t),e)}async function pC(t,e){const n=H(t);return await Kh(!1,n,e.providerId),xy(n,e)}async function mC(t,e){return hC(H(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL(t,e){return Or(t,"POST","/v1/accounts:signInWithCustomToken",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e){const n=Be(t),r=await TL(n,{token:e,returnSecureToken:!0}),i=await bn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Dy._fromServerResponse(e,n):"totpInfo"in n?Ny._fromServerResponse(e,n):Tt(e,"internal-error")}}class Dy extends Al{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Dy(n)}}class Ny extends Al{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Ny(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,e,n){var r;N(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),N(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(N(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(N(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(t,e,n){var r;const i=Be(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await yi(i,s,"getOobCode",!0);n&&_o(i,o,n),await Lp(i,o)}else n&&_o(i,s,n),await Lp(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await yi(i,s,"getOobCode",!0);n&&_o(i,a,n),await Lp(i,a)}else return Promise.reject(o)})}async function CL(t,e,n){await uC(H(t),{oobCode:e,newPassword:n})}async function RL(t,e){await oL(H(t),{oobCode:e})}async function gC(t,e){const n=H(t),r=await uC(n,{oobCode:e}),i=r.requestType;switch(N(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":N(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":N(r.mfaInfo,n,"internal-error");default:N(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Al._fromServerResponse(Be(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function PL(t,e){const{data:n}=await gC(H(t),e);return n.email}async function bL(t,e,n){var r;const i=Be(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const l=await yi(i,s,"signUpPassword");o=Yc(i,l)}else o=Yc(i,s).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await yi(i,s,"signUpPassword");return Yc(i,c)}else return Promise.reject(l)});const a=await o.catch(l=>Promise.reject(l)),u=await bn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function kL(t,e,n){return Qh(H(t),Di.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e,n){var r;const i=Be(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(a,u){N(u.handleCodeInApp,i,"argument-error"),u&&_o(i,a,u)}if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const a=await yi(i,s,"getOobCode",!0);o(a,n),await Mp(i,a)}else o(s,n),await Mp(i,s).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const u=await yi(i,s,"getOobCode",!0);o(u,n),await Mp(i,u)}else return Promise.reject(a)})}function DL(t,e){const n=Gh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function NL(t,e,n){const r=H(t),i=Di.credentialWithLink(e,n||ju());return N(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Qh(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e){return tt(t,"POST","/v1/accounts:createAuthUri",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e){const n=Ry()?ju():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await OL(H(t),r);return i||[]}async function FL(t,e){const n=H(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&_o(n.auth,i,e);const{email:s}=await aL(n.auth,i);s!==t.email&&await t.reload()}async function LL(t,e,n){const r=H(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&_o(r.auth,s,n);const{email:o}=await uL(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(t,e){return tt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=H(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await kr(r,ML(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function UL(t,e){return vC(H(t),e,null)}function BL(t,e){return vC(H(t),null,e)}async function vC(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await kr(t,lC(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Hh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Eo(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new zL(s,i);case"github.com":return new qL(s,i);case"google.com":return new HL(s,i);case"twitter.com":return new WL(s,i,t.screenName||null);case"custom":case"anonymous":return new Eo(s,null);default:return new Eo(s,r,i)}}class Eo{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class yC extends Eo{constructor(e,n,r,i){super(e,n,r),this.username=i}}class zL extends Eo{constructor(e,n){super(e,"facebook.com",n)}}class qL extends yC{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class HL extends Eo{constructor(e,n){super(e,"google.com",n)}}class WL extends yC{constructor(e,n,r){super(e,"twitter.com",n,r)}}function GL(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:jL(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Xi("enroll",e,n)}static _fromMfaPendingCredential(e){return new Xi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Xi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Xi._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Be(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Al._fromServerResponse(r,a));N(i.mfaPendingCredential,r,"internal-error");const o=Xi._fromMfaPendingCredential(i.mfaPendingCredential);return new Oy(o,s,async a=>{const u=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const l=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const c=await bn._fromIdTokenResponse(r,n.operationType,l);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return N(n.user,r,"internal-error"),bn._forOperation(n.user,n.operationType,l);default:Tt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function KL(t,e){var n;const r=H(t),i=e;return N(e.customData.operationType,r,"argument-error"),N((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Oy._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t,e){return tt(t,"POST","/v2/accounts/mfaEnrollment:start",Ke(t,e))}function YL(t,e){return tt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ke(t,e))}function JL(t,e){return tt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ke(t,e))}class Vy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Al._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Vy(e)}async getSession(){return Xi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await kr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await kr(this.user,JL(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const $p=new WeakMap;function XL(t){const e=H(t);return $p.has(e)||$p.set(e,Vy._fromUser(e)),$p.get(e)}const jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jd,"1"),this.storage.removeItem(jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(){const t=ke();return by(t)||ra(t)}const eM=1e3,tM=10;class EC extends _C{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=ZL()&&KF(),this.fallbackToPolling=tC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);GF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}EC.type="LOCAL";const Fy=EC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC extends _C{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wC.type="SESSION";const vs=wC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Yh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await nM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=Cl("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(){return window}function iM(t){He().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(){return typeof He().WorkerGlobalScope<"u"&&typeof He().importScripts=="function"}async function sM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aM(){return Ly()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firebaseLocalStorageDb",uM=1,zd="firebaseLocalStorage",TC="fbase_key";class Rl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jh(t,e){return t.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function lM(){const t=indexedDB.deleteDatabase(IC);return new Rl(t).toPromise()}function mg(){const t=indexedDB.open(IC,uM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zd,{keyPath:TC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zd)?e(r):(r.close(),await lM(),e(await mg()))})})}async function ww(t,e,n){const r=Jh(t,!0).put({[TC]:e,value:n});return new Rl(r).toPromise()}async function cM(t,e){const n=Jh(t,!1).get(e),r=await new Rl(n).toPromise();return r===void 0?null:r.value}function Iw(t,e){const n=Jh(t,!0).delete(e);return new Rl(n).toPromise()}const dM=800,hM=3;class SC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ly()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yh._getInstance(aM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sM(),!this.activeServiceWorker)return;this.sender=new rM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mg();return await ww(e,jd,"1"),await Iw(e,jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ww(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Jh(i,!1).getAll();return new Rl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SC.type="LOCAL";const Wu=SC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t,e){return tt(t,"POST","/v2/accounts/mfaSignIn:start",Ke(t,e))}function pM(t,e){return tt(t,"POST","/v2/accounts/mfaSignIn:finalize",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=500,gM=6e4,mc=1e12;class vM{constructor(e){this.auth=e,this.counter=mc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new yM(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||mc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||mc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||mc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class yM{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;N(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=_M(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},gM)},mM))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function _M(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=sC("rcb"),EM=new Tl(3e4,6e4),wM="https://www.google.com/recaptcha/api.js?";class IM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=He().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return N(TM(n),e,"argument-error"),this.shouldResolveImmediately(n)&&gw(He().grecaptcha)?Promise.resolve(He().grecaptcha):new Promise((r,i)=>{const s=He().setTimeout(()=>{i(Et(e,"network-request-failed"))},EM.get());He()[Up]=()=>{He().clearTimeout(s),delete He()[Up];const a=He().grecaptcha;if(!a||!gw(a)){i(Et(e,"internal-error"));return}const u=a.render;a.render=(l,c)=>{const d=u(l,c);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${wM}?${ta({onload:Up,render:"explicit",hl:n})}`;ky(o).catch(()=>{clearTimeout(s),i(Et(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=He().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function TM(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class SM{async load(e){return new vM(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="recaptcha",AM={theme:"light",type:"image"};let CM=class{constructor(e,n,r=Object.assign({},AM)){this.parameters=r,this.type=AC,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Be(e),this.isInvisible=this.parameters.size==="invisible",N(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;N(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new SM:new IM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){N(!this.parameters.sitekey,this.auth,"argument-error"),N(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),N(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=He()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){N(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){N(Ry()&&!Ly(),this.auth,"internal-error"),await RM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await QF(this.auth);N(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return N(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function RM(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=us._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function PM(t,e,n){const r=Be(t),i=await Xh(r,e,H(n));return new My(i,s=>Qh(r,s))}async function bM(t,e,n){const r=H(t);await Kh(!1,r,"phone");const i=await Xh(r.auth,e,H(n));return new My(i,s=>pC(r,s))}async function kM(t,e,n){const r=H(t),i=await Xh(r.auth,e,H(n));return new My(i,s=>mC(r,s))}async function Xh(t,e,n){var r;const i=await n.verify();try{N(typeof i=="string",t,"argument-error"),N(n.type===AC,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return N(o.type==="enroll",t,"internal-error"),(await QL(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{N(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return N(a,t,"missing-multi-factor-info"),(await fM(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await hL(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function xM(t,e){await xy(H(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys=class Jc{constructor(e){this.providerId=Jc.PROVIDER_ID,this.auth=Be(e)}verifyPhoneNumber(e,n){return Xh(this.auth,e,H(n))}static credential(e,n){return us._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Jc.credentialFromTaggedObject(n)}static credentialFromError(e){return Jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?us._fromTokenResponse(n,r):null}};ys.PROVIDER_ID="phone";ys.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t,e){return e?cn(e):(N(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends ia{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DM(t){return fC(t.auth,new $y(t),t.bypassAuthState)}function NM(t){const{auth:e,user:n}=t;return N(n,e,"internal-error"),hC(n,new $y(t),t.bypassAuthState)}async function OM(t){const{auth:e,user:n}=t;return N(n,e,"internal-error"),xy(n,new $y(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DM;case"linkViaPopup":case"linkViaRedirect":return OM;case"reauthViaPopup":case"reauthViaRedirect":return NM;default:Tt(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Tl(2e3,1e4);async function FM(t,e,n){const r=Be(t);na(t,e,Vr);const i=Os(r,n);return new yr(r,"signInViaPopup",e,i).executeNotNull()}async function LM(t,e,n){const r=H(t);na(r.auth,e,Vr);const i=Os(r.auth,n);return new yr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function MM(t,e,n){const r=H(t);na(r.auth,e,Vr);const i=Os(r.auth,n);return new yr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class yr extends CC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,yr.currentPopupAction&&yr.currentPopupAction.cancel(),yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return N(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=Cl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Et(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VM.get())};e()}}yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="pendingRedirect",cu=new Map;class UM extends CC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cu.get(this.auth._key());if(!e){try{const r=await BM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cu.set(this.auth._key(),e)}return this.bypassAuthState||cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BM(t,e){const n=PC(e),r=RC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Uy(t,e){return RC(t)._set(PC(e),"true")}function jM(){cu.clear()}function By(t,e){cu.set(t._key(),e)}function RC(t){return cn(t._redirectPersistence)}function PC(t){return as($M,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t,e,n){return qM(t,e,n)}async function qM(t,e,n){const r=Be(t);na(t,e,Vr),await r._initializationPromise;const i=Os(r,n);return await Uy(i,r),i._openRedirect(r,e,"signInViaRedirect")}function HM(t,e,n){return WM(t,e,n)}async function WM(t,e,n){const r=H(t);na(r.auth,e,Vr),await r.auth._initializationPromise;const i=Os(r.auth,n);await Uy(i,r.auth);const s=await bC(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function GM(t,e,n){return KM(t,e,n)}async function KM(t,e,n){const r=H(t);na(r.auth,e,Vr),await r.auth._initializationPromise;const i=Os(r.auth,n);await Kh(!1,r,e.providerId),await Uy(i,r.auth);const s=await bC(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function QM(t,e){return await Be(t)._initializationPromise,Zh(t,e,!1)}async function Zh(t,e,n=!1){const r=Be(t),i=Os(r,e),o=await new UM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function bC(t){const e=Cl(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=10*60*1e3;class kC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Et(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tw(e))}saveEventToCache(e){this.cachedEventUids.add(Tw(e)),this.lastProcessedEventTime=Date.now()}}function Tw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(t,e={}){return tt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZM=/^https?/;async function e4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DC(t);for(const n of e)try{if(t4(n))return}catch{}Tt(t,"unauthorized-domain")}function t4(t){const e=ju(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZM.test(n))return!1;if(XM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new Tl(3e4,6e4);function Sw(){const t=He().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function r4(t){return new Promise((e,n)=>{var r,i,s;function o(){Sw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sw(),n(Et(t,"network-request-failed"))},timeout:n4.get()})}if(!((i=(r=He().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=He().gapi)===null||s===void 0)&&s.load)o();else{const a=sC("iframefcb");return He()[a]=()=>{gapi.load?o():n(Et(t,"network-request-failed"))},ky(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Xc=null,e})}let Xc=null;function i4(t){return Xc=Xc||r4(t),Xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new Tl(5e3,15e3),o4="__/auth/iframe",a4="emulator/auth/iframe",u4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c4(t){const e=t.config;N(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Py(e,a4):`https://${t.config.authDomain}/${o4}`,r={apiKey:e.apiKey,appName:t.name,v:xi},i=l4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ta(r).slice(1)}`}async function d4(t){const e=await i4(t),n=He().gapi;return N(n,t,"internal-error"),e.open({where:document.body,url:c4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Et(t,"network-request-failed"),a=He().setTimeout(()=>{s(o)},s4.get());function u(){He().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f4=500,p4=600,m4="_blank",g4="http://localhost";class Aw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v4(t,e,n,r=f4,i=p4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},h4),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ke().toLowerCase();n&&(a=JA(l)?m4:n),YA(l)&&(e=e||g4,u.scrollbars="yes");const c=Object.entries(u).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(WF(l)&&a!=="_self")return y4(e||"",a),new Aw(null);const d=window.open(e||"",a,c);N(d,t,"popup-blocked");try{d.focus()}catch{}return new Aw(d)}function y4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="__/auth/handler",E4="emulator/auth/handler",w4=encodeURIComponent("fac");async function gg(t,e,n,r,i,s){N(t.config.authDomain,t,"auth-domain-config-required"),N(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xi,eventId:i};if(e instanceof Vr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof sa){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await t._getAppCheckToken(),l=u?`#${w4}=${encodeURIComponent(u)}`:"";return`${I4(t)}?${ta(a).slice(1)}${l}`}function I4({config:t}){return t.emulator?Py(t,E4):`https://${t.authDomain}/${_4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="webStorageSupport";class T4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vs,this._completeRedirectFn=Zh,this._overrideRedirectResult=By}async _openPopup(e,n,r,i){var s;$n((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await gg(e,n,r,ju(),i);return v4(e,o,Cl())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await gg(e,n,r,ju(),i);return iM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):($n(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await d4(e),r=new kC(e);return n.register("authEvent",i=>(N(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bp,{type:Bp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Bp];o!==void 0&&n(!!o),Tt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=e4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tC()||by()||ra()}}const S4=T4;class A4{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Zn("unexpected MultiFactorSessionType")}}}class jy extends A4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new jy(e)}_finalizeEnroll(e,n,r){return YL(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return pM(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class NC{constructor(){}static assertion(e){return jy._fromCredential(e)}}NC.FACTOR_ID="phone";var Cw="@firebase/auth",Rw="1.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){N(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function P4(t){vi(new lr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;N(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nC(t)},l=new tL(r,i,s,u);return nL(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vi(new lr("auth-internal",e=>{const n=Be(e.getProvider("auth").getImmediate());return(r=>new C4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(Cw,Rw,R4(t)),or(Cw,Rw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=5*60;GO("authIdTokenMaxAge");P4("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=2e3;async function x4(t,e,n){var r;const{BuildInfo:i}=_s();$n(e.sessionId,"AuthEvent did not contain a session ID");const s=await F4(e.sessionId),o={};return ra()?o.ibi=i.packageName:Sl()?o.apn=i.packageName:Tt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,gg(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function D4(t){const{BuildInfo:e}=_s(),n={};ra()?n.iosBundleId=e.packageName:Sl()?n.androidPackageName=e.packageName:Tt(t,"operation-not-supported-in-this-environment"),await DC(t,n)}function N4(t){const{cordova:e}=_s();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,HF()?"_blank":"_system","location=yes"),n(i)})})}async function O4(t,e,n){const{cordova:r}=_s();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function u(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function l(){a||(a=window.setTimeout(()=>{o(Et(t,"redirect-cancelled-by-user"))},k4))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&l()}e.addPassiveListener(u),document.addEventListener("resume",l,!1),Sl()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function V4(t){var e,n,r,i,s,o,a,u,l,c;const d=_s();N(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),N(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),N(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),N(typeof((u=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||u===void 0?void 0:u.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),N(typeof((c=(l=d==null?void 0:d.cordova)===null||l===void 0?void 0:l.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function F4(t){const e=L4(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function L4(t){if($n(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=20;class $4 extends kC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function U4(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:z4(),postBody:null,tenantId:t.tenantId,error:Et(t,"no-auth-event")}}function B4(t,e){return vg()._set(yg(t),e)}async function Pw(t){const e=await vg()._get(yg(t));return e&&await vg()._remove(yg(t)),e}function j4(t,e){var n,r;const i=H4(e);if(i.includes("/__/auth/callback")){const s=Zc(i),o=s.firebaseError?q4(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],u=a?Et(a):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function z4(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<M4;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function vg(){return cn(Fy)}function yg(t){return as("authEvent",t.config.apiKey,t.name)}function q4(t){try{return JSON.parse(t)}catch{return null}}function H4(t){const e=Zc(t),n=e.link?decodeURIComponent(e.link):void 0,r=Zc(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Zc(i).link||i||r||n||t}function Zc(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return uo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=500;class G4{constructor(){this._redirectPersistence=vs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Zh,this._overrideRedirectResult=By}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new $4(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Tt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){V4(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),jM(),await this._originValidation(e);const o=U4(e,r,i);await B4(e,o);const a=await x4(e,o,n),u=await N4(a);return O4(e,s,u)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D4(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=_s(),o=setTimeout(async()=>{await Pw(e),n.onEvent(bw())},W4),a=async c=>{clearTimeout(o);const d=await Pw(e);let h=null;d&&(c!=null&&c.url)&&(h=j4(d,c.url)),n.onEvent(h||bw())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const u=i,l=`${s.packageName.toLowerCase()}://`;_s().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(l)&&a({url:c}),typeof u=="function")try{u(c)}catch(d){console.error(d)}}}}const K4=G4;function bw(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Et("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t,e){Be(t)._logFramework(e)}var Y4="@firebase/auth-compat",J4="0.4.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=1e3;function du(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function Z4(){return du()==="http:"||du()==="https:"}function OC(t=ke()){return!!((du()==="file:"||du()==="ionic:"||du()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function e$(){return wy()||Ey()}function t$(){return bA()&&(document==null?void 0:document.documentMode)===11}function n$(t=ke()){return/Edge\/\d+/.test(t)}function r$(t=ke()){return t$()||n$(t)}function VC(){try{const t=self.localStorage,e=Cl();if(t)return t.setItem(e,"1"),t.removeItem(e),r$()?$u():!0}catch{return zy()&&$u()}return!1}function zy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jp(){return(Z4()||PA()||OC())&&!e$()&&VC()&&!zy()}function FC(){return OC()&&typeof document<"u"}async function i$(){return FC()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},X4);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function s$(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un={LOCAL:"local",NONE:"none",SESSION:"session"},Pa=N,LC="persistence";function o$(t,e){if(Pa(Object.values(un).includes(e),t,"invalid-persistence-type"),wy()){Pa(e!==un.SESSION,t,"unsupported-persistence-type");return}if(Ey()){Pa(e===un.NONE,t,"unsupported-persistence-type");return}if(zy()){Pa(e===un.NONE||e===un.LOCAL&&$u(),t,"unsupported-persistence-type");return}Pa(e===un.NONE||VC(),t,"unsupported-persistence-type")}async function _g(t){await t._initializationPromise;const e=MC(),n=as(LC,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function a$(t,e){const n=MC();if(!n)return[];const r=as(LC,t,e);switch(n.getItem(r)){case un.NONE:return[Oo];case un.LOCAL:return[Wu,vs];case un.SESSION:return[vs];default:return[]}}function MC(){var t;try{return((t=s$())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=N;class ti{constructor(){this.browserResolver=cn(S4),this.cordovaResolver=cn(K4),this.underlyingResolver=null,this._redirectPersistence=vs,this._completeRedirectFn=Zh,this._overrideRedirectResult=By}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return FC()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return u$(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await i$();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t){return t.unwrap()}function l$(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(t){return UC(t)}function d$(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new h$(t,KL(t,e))}else if(r){const i=UC(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function UC(t){const{_tokenResponse:e}=t instanceof jt?t.customData:t;if(!e)return null;if(!(t instanceof jt)&&"temporaryProof"in e&&"phoneNumber"in e)return ys.credentialFromResult(t);const n=e.providerId;if(!n||n===Ra.PASSWORD)return null;let r;switch(n){case Ra.GOOGLE:r=Kn;break;case Ra.FACEBOOK:r=Gn;break;case Ra.GITHUB:r=Qn;break;case Ra.TWITTER:r=Yn;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:u}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Vo._create(n,a):cr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new yo(n).credential({idToken:i,accessToken:s,rawNonce:u})}return t instanceof jt?r.credentialFromError(t):r.credentialFromResult(t)}function Kt(t,e){return e.catch(n=>{throw n instanceof jt&&d$(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:c$(n),additionalUserInfo:GL(n),user:ef.getOrCreate(i)}})}async function Eg(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Kt(t,n.confirm(r))}}class h${constructor(e,n){this.resolver=n,this.auth=l$(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Kt($C(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=class Ga{constructor(e){this._delegate=e,this.multiFactor=XL(e)}static getOrCreate(e){return Ga.USER_MAP.has(e)||Ga.USER_MAP.set(e,new Ga(e)),Ga.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Kt(this.auth,pC(this._delegate,e))}async linkWithPhoneNumber(e,n){return Eg(this.auth,bM(this._delegate,e,n))}async linkWithPopup(e){return Kt(this.auth,MM(this._delegate,e,ti))}async linkWithRedirect(e){return await _g(Be(this.auth)),GM(this._delegate,e,ti)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Kt(this.auth,mC(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Eg(this.auth,kM(this._delegate,e,n))}reauthenticateWithPopup(e){return Kt(this.auth,LM(this._delegate,e,ti))}async reauthenticateWithRedirect(e){return await _g(Be(this.auth)),HM(this._delegate,e,ti)}sendEmailVerification(e){return FL(this._delegate,e)}async unlink(e){return await IL(this._delegate,e),this}updateEmail(e){return UL(this._delegate,e)}updatePassword(e){return BL(this._delegate,e)}updatePhoneNumber(e){return xM(this._delegate,e)}updateProfile(e){return $L(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return LL(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};ef.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=N;class wg{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;ba(r,"invalid-api-key",{appName:e.name}),ba(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?ti:void 0;this._delegate=n.initialize({options:{persistence:f$(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(CF),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ef.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){rL(this._delegate,e,n)}applyActionCode(e){return RL(this._delegate,e)}checkActionCode(e){return gC(this._delegate,e)}confirmPasswordReset(e,n){return CL(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Kt(this._delegate,bL(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return VL(this._delegate,e)}isSignInWithEmailLink(e){return DL(this._delegate,e)}async getRedirectResult(){ba(jp(),this._delegate,"operation-not-supported-in-this-environment");const e=await QM(this._delegate,ti);return e?Kt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Q4(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=kw(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=kw(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return xL(this._delegate,e,n)}sendPasswordResetEmail(e,n){return AL(this._delegate,e,n||void 0)}async setPersistence(e){o$(this._delegate,e);let n;switch(e){case un.SESSION:n=vs;break;case un.LOCAL:n=await cn(Wu)._isAvailable()?Wu:Fy;break;case un.NONE:n=Oo;break;default:return Tt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Kt(this._delegate,wL(this._delegate))}signInWithCredential(e){return Kt(this._delegate,Qh(this._delegate,e))}signInWithCustomToken(e){return Kt(this._delegate,SL(this._delegate,e))}signInWithEmailAndPassword(e,n){return Kt(this._delegate,kL(this._delegate,e,n))}signInWithEmailLink(e,n){return Kt(this._delegate,NL(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Eg(this._delegate,PM(this._delegate,e,n))}async signInWithPopup(e){return ba(jp(),this._delegate,"operation-not-supported-in-this-environment"),Kt(this._delegate,FM(this._delegate,e,ti))}async signInWithRedirect(e){return ba(jp(),this._delegate,"operation-not-supported-in-this-environment"),await _g(this._delegate),zM(this._delegate,e,ti)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return PL(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}wg.Persistence=un;function kw(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&ef.getOrCreate(o)),error:e,complete:n}}function f$(t,e){const n=a$(t,e);if(typeof self<"u"&&!n.includes(Wu)&&n.push(Wu),typeof window<"u")for(const r of[Fy,vs])n.includes(r)||n.push(r);return n.includes(Oo)||n.push(Oo),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.providerId="phone",this._delegate=new ys($C(yt.auth()))}static credential(e,n){return ys.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}qy.PHONE_SIGN_IN_METHOD=ys.PHONE_SIGN_IN_METHOD;qy.PROVIDER_ID=ys.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$=N;class m${constructor(e,n,r=yt.app()){var i;p$((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new CM(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$="auth-compat";function v$(t){t.INTERNAL.registerComponent(new lr(g$,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new wg(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:js.EMAIL_SIGNIN,PASSWORD_RESET:js.PASSWORD_RESET,RECOVER_EMAIL:js.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:js.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:js.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:js.VERIFY_EMAIL}},EmailAuthProvider:Di,FacebookAuthProvider:Gn,GithubAuthProvider:Qn,GoogleAuthProvider:Kn,OAuthProvider:yo,SAMLAuthProvider:Ud,PhoneAuthProvider:qy,PhoneMultiFactorGenerator:NC,RecaptchaVerifier:m$,TwitterAuthProvider:Yn,Auth:wg,AuthCredential:ia,Error:jt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Y4,J4)}v$(yt);var y$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},L,Hy=Hy||{},Y=y$||self;function tf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Pl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function _$(t){return Object.prototype.hasOwnProperty.call(t,zp)&&t[zp]||(t[zp]=++E$)}var zp="closure_uid_"+(1e9*Math.random()>>>0),E$=0;function w$(t,e,n){return t.call.apply(t.bind,arguments)}function I$(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function xt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xt=w$:xt=I$,xt.apply(null,arguments)}function gc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function lt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ni(){this.s=this.s,this.o=this.o}var T$=0;Ni.prototype.s=!1;Ni.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),T$!=0)&&_$(this)};Ni.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const BC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Wy(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function xw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(tf(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Dt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var S$=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Y.addEventListener("test",()=>{},e),Y.removeEventListener("test",()=>{},e)}catch{}return t}();function Gu(t){return/^[\s\xa0]*$/.test(t)}function nf(){var t=Y.navigator;return t&&(t=t.userAgent)?t:""}function Jn(t){return nf().indexOf(t)!=-1}function Gy(t){return Gy[" "](t),t}Gy[" "]=function(){};function A$(t,e){var n=v3;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var C$=Jn("Opera"),Fo=Jn("Trident")||Jn("MSIE"),jC=Jn("Edge"),Ig=jC||Fo,zC=Jn("Gecko")&&!(nf().toLowerCase().indexOf("webkit")!=-1&&!Jn("Edge"))&&!(Jn("Trident")||Jn("MSIE"))&&!Jn("Edge"),R$=nf().toLowerCase().indexOf("webkit")!=-1&&!Jn("Edge");function qC(){var t=Y.document;return t?t.documentMode:void 0}var Tg;e:{var qp="",Hp=function(){var t=nf();if(zC)return/rv:([^\);]+)(\)|;)/.exec(t);if(jC)return/Edge\/([\d\.]+)/.exec(t);if(Fo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(R$)return/WebKit\/(\S+)/.exec(t);if(C$)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Hp&&(qp=Hp?Hp[1]:""),Fo){var Wp=qC();if(Wp!=null&&Wp>parseFloat(qp)){Tg=String(Wp);break e}}Tg=qp}var Sg;if(Y.document&&Fo){var Dw=qC();Sg=Dw||parseInt(Tg,10)||void 0}else Sg=void 0;var P$=Sg;function Ku(t,e){if(Dt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(zC){e:{try{Gy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:b$[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ku.$.h.call(this)}}lt(Ku,Dt);var b$={2:"touch",3:"pen",4:"mouse"};Ku.prototype.h=function(){Ku.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var bl="closure_listenable_"+(1e6*Math.random()|0),k$=0;function x$(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++k$,this.fa=this.ia=!1}function rf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ky(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function D$(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function HC(t){const e={};for(const n in t)e[n]=t[n];return e}const Nw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Nw.length;s++)n=Nw[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function sf(t){this.src=t,this.g={},this.h=0}sf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Cg(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new x$(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Ag(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=BC(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(rf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Cg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Qy="closure_lm_"+(1e6*Math.random()|0),Gp={};function GC(t,e,n,r,i){if(r&&r.once)return QC(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)GC(t,e[s],n,r,i);return null}return n=Xy(n),t&&t[bl]?t.O(e,n,Pl(r)?!!r.capture:!!r,i):KC(t,e,n,!1,r,i)}function KC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Pl(i)?!!i.capture:!!i,a=Jy(t);if(a||(t[Qy]=a=new sf(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=N$(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)S$||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(JC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function N$(){function t(n){return e.call(t.src,t.listener,n)}const e=O$;return t}function QC(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)QC(t,e[s],n,r,i);return null}return n=Xy(n),t&&t[bl]?t.P(e,n,Pl(r)?!!r.capture:!!r,i):KC(t,e,n,!0,r,i)}function YC(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)YC(t,e[s],n,r,i);else r=Pl(r)?!!r.capture:!!r,n=Xy(n),t&&t[bl]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Cg(s,n,r,i),-1<n&&(rf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Jy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Cg(e,n,r,i)),(n=-1<t?e[t]:null)&&Yy(n))}function Yy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[bl])Ag(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(JC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Jy(e))?(Ag(n,t),n.h==0&&(n.src=null,e[Qy]=null)):rf(t)}}}function JC(t){return t in Gp?Gp[t]:Gp[t]="on"+t}function O$(t,e){if(t.fa)t=!0;else{e=new Ku(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Yy(t),t=n.call(r,e)}return t}function Jy(t){return t=t[Qy],t instanceof sf?t:null}var Kp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xy(t){return typeof t=="function"?t:(t[Kp]||(t[Kp]=function(e){return t.handleEvent(e)}),t[Kp])}function ut(){Ni.call(this),this.i=new sf(this),this.S=this,this.J=null}lt(ut,Ni);ut.prototype[bl]=!0;ut.prototype.removeEventListener=function(t,e,n,r){YC(this,t,e,n,r)};function wt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Dt(e,t);else if(e instanceof Dt)e.target=e.target||t;else{var i=e;e=new Dt(r,t),WC(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=vc(o,r,!0,e)&&i}if(o=e.g=t,i=vc(o,r,!0,e)&&i,i=vc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=vc(o,r,!1,e)&&i}ut.prototype.N=function(){if(ut.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rf(n[r]);delete t.g[e],t.h--}}this.J=null};ut.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ut.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function vc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&Ag(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Zy=Y.JSON.stringify;class V${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function F$(){var t=e_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class L${constructor(){this.h=this.g=null}add(e,n){const r=XC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var XC=new V$(()=>new M$,t=>t.reset());class M${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function $$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function U$(t){Y.setTimeout(()=>{throw t},0)}let Qu,Yu=!1,e_=new L$,ZC=()=>{const t=Y.Promise.resolve(void 0);Qu=()=>{t.then(B$)}};var B$=()=>{for(var t;t=F$();){try{t.h.call(t.g)}catch(n){U$(n)}var e=XC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Yu=!1};function of(t,e){ut.call(this),this.h=t||1,this.g=e||Y,this.j=xt(this.qb,this),this.l=Date.now()}lt(of,ut);L=of.prototype;L.ga=!1;L.T=null;L.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wt(this,"tick"),this.ga&&(t_(this),this.start()))}};L.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function t_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}L.N=function(){of.$.N.call(this),t_(this),delete this.g};function n_(t,e,n){if(typeof t=="function")n&&(t=xt(t,n));else if(t&&typeof t.handleEvent=="function")t=xt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Y.setTimeout(t,e||0)}function eR(t){t.g=n_(()=>{t.g=null,t.i&&(t.i=!1,eR(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class j$ extends Ni{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eR(this)}N(){super.N(),this.g&&(Y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ju(t){Ni.call(this),this.h=t,this.g={}}lt(Ju,Ni);var Ow=[];function tR(t,e,n,r){Array.isArray(n)||(n&&(Ow[0]=n.toString()),n=Ow);for(var i=0;i<n.length;i++){var s=GC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function nR(t){Ky(t.g,function(e,n){this.g.hasOwnProperty(n)&&Yy(e)},t),t.g={}}Ju.prototype.N=function(){Ju.$.N.call(this),nR(this)};Ju.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function af(){this.g=!0}af.prototype.Ea=function(){this.g=!1};function z$(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function q$(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function lo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+W$(t,n)+(r?" "+r:"")})}function H$(t,e){t.info(function(){return"TIMEOUT: "+e})}af.prototype.info=function(){};function W$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Zy(n)}catch{return e}}var Vs={},Vw=null;function uf(){return Vw=Vw||new ut}Vs.Ta="serverreachability";function rR(t){Dt.call(this,Vs.Ta,t)}lt(rR,Dt);function Xu(t){const e=uf();wt(e,new rR(e))}Vs.STAT_EVENT="statevent";function iR(t,e){Dt.call(this,Vs.STAT_EVENT,t),this.stat=e}lt(iR,Dt);function Ut(t){const e=uf();wt(e,new iR(e,t))}Vs.Ua="timingevent";function sR(t,e){Dt.call(this,Vs.Ua,t),this.size=e}lt(sR,Dt);function kl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Y.setTimeout(function(){t()},e)}var lf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},oR={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function r_(){}r_.prototype.h=null;function Fw(t){return t.h||(t.h=t.i())}function aR(){}var xl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function i_(){Dt.call(this,"d")}lt(i_,Dt);function s_(){Dt.call(this,"c")}lt(s_,Dt);var Rg;function cf(){}lt(cf,r_);cf.prototype.g=function(){return new XMLHttpRequest};cf.prototype.i=function(){return{}};Rg=new cf;function Dl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ju(this),this.P=G$,t=Ig?125:void 0,this.V=new of(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new uR}function uR(){this.i=null,this.g="",this.h=!1}var G$=45e3,Pg={},qd={};L=Dl.prototype;L.setTimeout=function(t){this.P=t};function bg(t,e,n){t.L=1,t.v=hf(xr(e)),t.s=n,t.S=!0,lR(t,null)}function lR(t,e){t.G=Date.now(),Nl(t),t.A=xr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),vR(n.i,"t",r),t.C=0,n=t.l.J,t.h=new uR,t.g=MR(t.l,n?e:null,!t.s),0<t.O&&(t.M=new j$(xt(t.Pa,t,t.g),t.O)),tR(t.U,t.g,"readystatechange",t.nb),e=t.I?HC(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Xu(),z$(t.j,t.u,t.A,t.m,t.W,t.s)}L.nb=function(t){t=t.target;const e=this.M;e&&er(t)==3?e.l():this.Pa(t)};L.Pa=function(t){try{if(t==this.g)e:{const c=er(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||Ig||this.g&&(this.h.h||this.g.ja()||Uw(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?Xu(3):Xu(2)),df(this);var n=this.g.da();this.ca=n;t:if(cR(this)){var r=Uw(this.g);t="";var i=r.length,s=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zi(this),hu(this);var o="";break t}this.h.i=new Y.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,q$(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gu(a)){var l=a;break t}}l=null}if(n=l)lo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kg(this,n);else{this.i=!1,this.o=3,Ut(12),Zi(this),hu(this);break e}}this.S?(dR(this,c,o),Ig&&this.i&&c==3&&(tR(this.U,this.V,"tick",this.mb),this.V.start())):(lo(this.j,this.m,o,null),kg(this,o)),c==4&&Zi(this),this.i&&!this.J&&(c==4?OR(this.l,this):(this.i=!1,Nl(this)))}else p3(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ut(12)):(this.o=0,Ut(13)),Zi(this),hu(this)}}}catch{}finally{}};function cR(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function dR(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=K$(t,n),i==qd){e==4&&(t.o=4,Ut(14),r=!1),lo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Pg){t.o=4,Ut(15),lo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else lo(t.j,t.m,i,null),kg(t,i);cR(t)&&i!=qd&&i!=Pg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ut(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),d_(e),e.M=!0,Ut(11))):(lo(t.j,t.m,n,"[Invalid Chunked Response]"),Zi(t),hu(t))}L.mb=function(){if(this.g){var t=er(this.g),e=this.g.ja();this.C<e.length&&(df(this),dR(this,t,e),this.i&&t!=4&&Nl(this))}};function K$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?qd:(n=Number(e.substring(n,r)),isNaN(n)?Pg:(r+=1,r+n>e.length?qd:(e=e.slice(r,r+n),t.C=r+n,e)))}L.cancel=function(){this.J=!0,Zi(this)};function Nl(t){t.Y=Date.now()+t.P,hR(t,t.P)}function hR(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=kl(xt(t.lb,t),e)}function df(t){t.B&&(Y.clearTimeout(t.B),t.B=null)}L.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(H$(this.j,this.A),this.L!=2&&(Xu(),Ut(17)),Zi(this),this.o=2,hu(this)):hR(this,this.Y-t)};function hu(t){t.l.H==0||t.J||OR(t.l,t)}function Zi(t){df(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,t_(t.V),nR(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function kg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||xg(n.i,t))){if(!t.K&&xg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Gd(n),mf(n);else break e;c_(n),Ut(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=kl(xt(n.ib,n),6e3));if(1>=ER(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else es(n,11)}else if((t.K||n.g==t)&&Gd(n),!Gu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(o_(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,_e(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=LR(r,r.J?r.pa:null,r.Y),o.K){wR(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(df(a),Nl(a)),r.g=o}else DR(r);0<n.j.length&&gf(n)}else l[0]!="stop"&&l[0]!="close"||es(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?es(n,7):l_(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Xu(4)}catch{}}function Q$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(tf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Y$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(tf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function fR(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(tf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Y$(t),r=Q$(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var pR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ls(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ls){this.h=t.h,Hd(this,t.j),this.s=t.s,this.g=t.g,Wd(this,t.m),this.l=t.l;var e=t.i,n=new Zu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Lw(this,n),this.o=t.o}else t&&(e=String(t).match(pR))?(this.h=!1,Hd(this,e[1]||"",!0),this.s=Ka(e[2]||""),this.g=Ka(e[3]||"",!0),Wd(this,e[4]),this.l=Ka(e[5]||"",!0),Lw(this,e[6]||"",!0),this.o=Ka(e[7]||"")):(this.h=!1,this.i=new Zu(null,this.h))}ls.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qa(e,Mw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Qa(e,Mw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Qa(n,n.charAt(0)=="/"?e3:Z$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Qa(n,n3)),t.join("")};function xr(t){return new ls(t)}function Hd(t,e,n){t.j=n?Ka(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Lw(t,e,n){e instanceof Zu?(t.i=e,r3(t.i,t.h)):(n||(e=Qa(e,t3)),t.i=new Zu(e,t.h))}function _e(t,e,n){t.i.set(e,n)}function hf(t){return _e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ka(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,X$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function X$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Mw=/[#\/\?@]/g,Z$=/[#\?:]/g,e3=/[#\?]/g,t3=/[#\?@]/g,n3=/#/g;function Zu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Oi(t){t.g||(t.g=new Map,t.h=0,t.i&&J$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}L=Zu.prototype;L.add=function(t,e){Oi(this),this.i=null,t=oa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function mR(t,e){Oi(t),e=oa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function gR(t,e){return Oi(t),e=oa(t,e),t.g.has(e)}L.forEach=function(t,e){Oi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};L.ta=function(){Oi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};L.Z=function(t){Oi(this);let e=[];if(typeof t=="string")gR(this,t)&&(e=e.concat(this.g.get(oa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};L.set=function(t,e){return Oi(this),this.i=null,t=oa(this,t),gR(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};L.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function vR(t,e,n){mR(t,e),0<n.length&&(t.i=null,t.g.set(oa(t,e),Wy(n)),t.h+=n.length)}L.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function oa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function r3(t,e){e&&!t.j&&(Oi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(mR(this,r),vR(this,i,n))},t)),t.j=e}var i3=class{constructor(t,e){this.g=t,this.map=e}};function yR(t){this.l=t||s3,Y.PerformanceNavigationTiming?(t=Y.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Y.g&&Y.g.Ka&&Y.g.Ka()&&Y.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var s3=10;function _R(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ER(t){return t.h?1:t.g?t.g.size:0}function xg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function o_(t,e){t.g?t.g.add(e):t.h=e}function wR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}yR.prototype.cancel=function(){if(this.i=IR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function IR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Wy(t.i)}var o3=class{stringify(t){return Y.JSON.stringify(t,void 0)}parse(t){return Y.JSON.parse(t,void 0)}};function a3(){this.g=new o3}function u3(t,e,n){const r=n||"";try{fR(t,function(i,s){let o=i;Pl(i)&&(o=Zy(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function l3(t,e){const n=new af;if(Y.Image){const r=new Image;r.onload=gc(yc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gc(yc,n,r,"TestLoadImage: error",!1,e),r.onabort=gc(yc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gc(yc,n,r,"TestLoadImage: timeout",!1,e),Y.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function yc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ol(t){this.l=t.fc||null,this.j=t.ob||!1}lt(Ol,r_);Ol.prototype.g=function(){return new ff(this.l,this.j)};Ol.prototype.i=function(t){return function(){return t}}({});function ff(t,e){ut.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=a_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lt(ff,ut);var a_=0;L=ff.prototype;L.open=function(t,e){if(this.readyState!=a_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,el(this)};L.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Y).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};L.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vl(this)),this.readyState=a_};L.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,el(this)),this.g&&(this.readyState=3,el(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;TR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function TR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}L.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Vl(this):el(this),this.readyState==3&&TR(this)}};L.Za=function(t){this.g&&(this.response=this.responseText=t,Vl(this))};L.Ya=function(t){this.g&&(this.response=t,Vl(this))};L.ka=function(){this.g&&Vl(this)};function Vl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,el(t)}L.setRequestHeader=function(t,e){this.v.append(t,e)};L.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};L.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function el(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ff.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var c3=Y.JSON.parse;function Oe(t){ut.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=SR,this.L=this.M=!1}lt(Oe,ut);var SR="",d3=/^https?$/i,h3=["POST","PUT"];L=Oe.prototype;L.Oa=function(t){this.M=t};L.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Rg.g(),this.C=this.u?Fw(this.u):Fw(Rg),this.g.onreadystatechange=xt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){$w(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Y.FormData&&t instanceof Y.FormData,!(0<=BC(h3,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{RR(this),0<this.B&&((this.L=f3(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xt(this.ua,this)):this.A=n_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){$w(this,s)}};function f3(t){return Fo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}L.ua=function(){typeof Hy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wt(this,"timeout"),this.abort(8))};function $w(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,AR(t),pf(t)}function AR(t){t.F||(t.F=!0,wt(t,"complete"),wt(t,"error"))}L.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,wt(this,"complete"),wt(this,"abort"),pf(this))};L.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pf(this,!0)),Oe.$.N.call(this)};L.La=function(){this.s||(this.G||this.v||this.l?CR(this):this.kb())};L.kb=function(){CR(this)};function CR(t){if(t.h&&typeof Hy<"u"&&(!t.C[1]||er(t)!=4||t.da()!=2)){if(t.v&&er(t)==4)n_(t.La,0,t);else if(wt(t,"readystatechange"),er(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(pR)[1]||null;!i&&Y.self&&Y.self.location&&(i=Y.self.location.protocol.slice(0,-1)),r=!d3.test(i?i.toLowerCase():"")}n=r}if(n)wt(t,"complete"),wt(t,"success");else{t.m=6;try{var s=2<er(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",AR(t)}}finally{pf(t)}}}}function pf(t,e){if(t.g){RR(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||wt(t,"ready");try{n.onreadystatechange=r}catch{}}}function RR(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Y.clearTimeout(t.A),t.A=null)}L.isActive=function(){return!!this.g};function er(t){return t.g?t.g.readyState:0}L.da=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}};L.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};L.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),c3(e)}};function Uw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case SR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function p3(t){const e={};t=(t.g&&2<=er(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Gu(t[r]))continue;var n=$$(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}D$(e,function(r){return r.join(", ")})}L.Ia=function(){return this.m};L.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function PR(t){let e="";return Ky(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function u_(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=PR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):_e(t,e,n))}function ka(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function bR(t){this.Ga=0,this.j=[],this.l=new af,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ka("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ka("baseRetryDelayMs",5e3,t),this.hb=ka("retryDelaySeedMs",1e4,t),this.eb=ka("forwardChannelMaxRetries",2,t),this.xa=ka("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new yR(t&&t.concurrentRequestLimit),this.Ja=new a3,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}L=bR.prototype;L.ra=8;L.H=1;function l_(t){if(kR(t),t.H==3){var e=t.W++,n=xr(t.I);if(_e(n,"SID",t.K),_e(n,"RID",e),_e(n,"TYPE","terminate"),Fl(t,n),e=new Dl(t,t.l,e),e.L=2,e.v=hf(xr(n)),n=!1,Y.navigator&&Y.navigator.sendBeacon)try{n=Y.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Y.Image&&(new Image().src=e.v,n=!0),n||(e.g=MR(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Nl(e)}FR(t)}function mf(t){t.g&&(d_(t),t.g.cancel(),t.g=null)}function kR(t){mf(t),t.u&&(Y.clearTimeout(t.u),t.u=null),Gd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Y.clearTimeout(t.m),t.m=null)}function gf(t){if(!_R(t.i)&&!t.m){t.m=!0;var e=t.Na;Qu||ZC(),Yu||(Qu(),Yu=!0),e_.add(e,t),t.C=0}}function m3(t,e){return ER(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=kl(xt(t.Na,t,e),VR(t,t.C)),t.C++,!0)}L.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Dl(this,this.l,t);let s=this.s;if(this.U&&(s?(s=HC(s),WC(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=xR(this,i,e),n=xr(this.I),_e(n,"RID",t),_e(n,"CVER",22),this.F&&_e(n,"X-HTTP-Session-Id",this.F),Fl(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(PR(s)))+"&"+e:this.o&&u_(n,this.o,s)),o_(this.i,i),this.bb&&_e(n,"TYPE","init"),this.P?(_e(n,"$req",e),_e(n,"SID","null"),i.aa=!0,bg(i,n,null)):bg(i,n,e),this.H=2}}else this.H==3&&(t?Bw(this,t):this.j.length==0||_R(this.i)||Bw(this))};function Bw(t,e){var n;e?n=e.m:n=t.W++;const r=xr(t.I);_e(r,"SID",t.K),_e(r,"RID",n),_e(r,"AID",t.V),Fl(t,r),t.o&&t.s&&u_(r,t.o,t.s),n=new Dl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=xR(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),o_(t.i,n),bg(n,r,e)}function Fl(t,e){t.na&&Ky(t.na,function(n,r){_e(e,r,n)}),t.h&&fR({},function(n,r){_e(e,r,n)})}function xR(t,e,n){n=Math.min(t.j.length,n);var r=t.h?xt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const c=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{u3(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function DR(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Qu||ZC(),Yu||(Qu(),Yu=!0),e_.add(e,t),t.A=0}}function c_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=kl(xt(t.Ma,t),VR(t,t.A)),t.A++,!0)}L.Ma=function(){if(this.u=null,NR(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=kl(xt(this.jb,this),t)}};L.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ut(10),mf(this),NR(this))};function d_(t){t.B!=null&&(Y.clearTimeout(t.B),t.B=null)}function NR(t){t.g=new Dl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=xr(t.wa);_e(e,"RID","rpc"),_e(e,"SID",t.K),_e(e,"AID",t.V),_e(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&_e(e,"TO",t.qa),_e(e,"TYPE","xmlhttp"),Fl(t,e),t.o&&t.s&&u_(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=hf(xr(e)),n.s=null,n.S=!0,lR(n,t)}L.ib=function(){this.v!=null&&(this.v=null,mf(this),c_(this),Ut(19))};function Gd(t){t.v!=null&&(Y.clearTimeout(t.v),t.v=null)}function OR(t,e){var n=null;if(t.g==e){Gd(t),d_(t),t.g=null;var r=2}else if(xg(t.i,e))n=e.F,wR(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=uf(),wt(r,new sR(r,n)),gf(t)}else DR(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&m3(t,e)||r==2&&c_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:es(t,5);break;case 4:es(t,10);break;case 3:es(t,6);break;default:es(t,2)}}}function VR(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function es(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=xt(t.pb,t);n||(n=new ls("//www.google.com/images/cleardot.gif"),Y.location&&Y.location.protocol=="http"||Hd(n,"https"),hf(n)),l3(n.toString(),r)}else Ut(2);t.H=0,t.h&&t.h.za(e),FR(t),kR(t)}L.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ut(2)):(this.l.info("Failed to ping google.com"),Ut(1))};function FR(t){if(t.H=0,t.ma=[],t.h){const e=IR(t.i);(e.length!=0||t.j.length!=0)&&(xw(t.ma,e),xw(t.ma,t.j),t.i.i.length=0,Wy(t.j),t.j.length=0),t.h.ya()}}function LR(t,e,n){var r=n instanceof ls?xr(n):new ls(n);if(r.g!="")e&&(r.g=e+"."+r.g),Wd(r,r.m);else{var i=Y.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ls(null);r&&Hd(s,r),e&&(s.g=e),i&&Wd(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&_e(r,n,e),_e(r,"VER",t.ra),Fl(t,r),r}function MR(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Oe(new Ol({ob:!0})):new Oe(t.va),e.Oa(t.J),e}L.isActive=function(){return!!this.h&&this.h.isActive(this)};function $R(){}L=$R.prototype;L.Ba=function(){};L.Aa=function(){};L.za=function(){};L.ya=function(){};L.isActive=function(){return!0};L.Va=function(){};function Kd(){if(Fo&&!(10<=Number(P$)))throw Error("Environmental error: no available transport.")}Kd.prototype.g=function(t,e){return new pn(t,e)};function pn(t,e){ut.call(this),this.g=new bR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Gu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new aa(this)}lt(pn,ut);pn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ut(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=LR(t,null,t.Y),gf(t)};pn.prototype.close=function(){l_(this.g)};pn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Zy(t),t=n);e.j.push(new i3(e.fb++,t)),e.H==3&&gf(e)};pn.prototype.N=function(){this.g.h=null,delete this.j,l_(this.g),delete this.g,pn.$.N.call(this)};function UR(t){i_.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}lt(UR,i_);function BR(){s_.call(this),this.status=1}lt(BR,s_);function aa(t){this.g=t}lt(aa,$R);aa.prototype.Ba=function(){wt(this.g,"a")};aa.prototype.Aa=function(t){wt(this.g,new UR(t))};aa.prototype.za=function(t){wt(this.g,new BR)};aa.prototype.ya=function(){wt(this.g,"b")};function g3(){this.blockSize=-1}function Un(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}lt(Un,g3);Un.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Qp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Un.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Qp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Qp(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Qp(this,r),i=0;break}}this.h=i,this.i+=e};Un.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function fe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var v3={};function h_(t){return-128<=t&&128>t?A$(t,function(e){return new fe([e|0],0>e?-1:0)}):new fe([t|0],0>t?-1:0)}function tr(t){if(isNaN(t)||!isFinite(t))return wo;if(0>t)return gt(tr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Dg;return new fe(e,0)}function jR(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return gt(jR(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=tr(Math.pow(e,8)),r=wo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=tr(Math.pow(e,s)),r=r.R(s).add(tr(o))):(r=r.R(n),r=r.add(tr(o)))}return r}var Dg=4294967296,wo=h_(0),Ng=h_(1),jw=h_(16777216);L=fe.prototype;L.ea=function(){if(In(this))return-gt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Dg+r)*e,e*=Dg}return t};L.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(_r(this))return"0";if(In(this))return"-"+gt(this).toString(t);for(var e=tr(Math.pow(t,6)),n=this,r="";;){var i=Yd(n,e).g;n=Qd(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,_r(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};L.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function _r(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function In(t){return t.h==-1}L.X=function(t){return t=Qd(this,t),In(t)?-1:_r(t)?0:1};function gt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new fe(n,~t.h).add(Ng)}L.abs=function(){return In(this)?gt(this):this};L.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new fe(n,n[n.length-1]&-2147483648?-1:0)};function Qd(t,e){return t.add(gt(e))}L.R=function(t){if(_r(this)||_r(t))return wo;if(In(this))return In(t)?gt(this).R(gt(t)):gt(gt(this).R(t));if(In(t))return gt(this.R(gt(t)));if(0>this.X(jw)&&0>t.X(jw))return tr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=o*u,_c(n,2*r+2*i),n[2*r+2*i+1]+=s*u,_c(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,_c(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,_c(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new fe(n,0)};function _c(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function xa(t,e){this.g=t,this.h=e}function Yd(t,e){if(_r(e))throw Error("division by zero");if(_r(t))return new xa(wo,wo);if(In(t))return e=Yd(gt(t),e),new xa(gt(e.g),gt(e.h));if(In(e))return e=Yd(t,gt(e)),new xa(gt(e.g),e.h);if(30<t.g.length){if(In(t)||In(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ng,r=e;0>=r.X(t);)n=zw(n),r=zw(r);var i=zs(n,1),s=zs(r,1);for(r=zs(r,2),n=zs(n,2);!_r(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=zs(r,1),n=zs(n,1)}return e=Qd(t,i.R(e)),new xa(i,e)}for(i=wo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=tr(n),o=s.R(e);In(o)||0<o.X(t);)n-=r,s=tr(n),o=s.R(e);_r(s)&&(s=Ng),i=i.add(s),t=Qd(t,o)}return new xa(i,t)}L.gb=function(t){return Yd(this,t).h};L.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new fe(n,this.h&t.h)};L.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new fe(n,this.h|t.h)};L.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new fe(n,this.h^t.h)};function zw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new fe(n,t.h)}function zs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new fe(i,t.h)}Kd.prototype.createWebChannel=Kd.prototype.g;pn.prototype.send=pn.prototype.u;pn.prototype.open=pn.prototype.m;pn.prototype.close=pn.prototype.close;lf.NO_ERROR=0;lf.TIMEOUT=8;lf.HTTP_ERROR=6;oR.COMPLETE="complete";aR.EventType=xl;xl.OPEN="a";xl.CLOSE="b";xl.ERROR="c";xl.MESSAGE="d";ut.prototype.listen=ut.prototype.O;Oe.prototype.listenOnce=Oe.prototype.P;Oe.prototype.getLastError=Oe.prototype.Sa;Oe.prototype.getLastErrorCode=Oe.prototype.Ia;Oe.prototype.getStatus=Oe.prototype.da;Oe.prototype.getResponseJson=Oe.prototype.Wa;Oe.prototype.getResponseText=Oe.prototype.ja;Oe.prototype.send=Oe.prototype.ha;Oe.prototype.setWithCredentials=Oe.prototype.Oa;Un.prototype.digest=Un.prototype.l;Un.prototype.reset=Un.prototype.reset;Un.prototype.update=Un.prototype.j;fe.prototype.add=fe.prototype.add;fe.prototype.multiply=fe.prototype.R;fe.prototype.modulo=fe.prototype.gb;fe.prototype.compare=fe.prototype.X;fe.prototype.toNumber=fe.prototype.ea;fe.prototype.toString=fe.prototype.toString;fe.prototype.getBits=fe.prototype.D;fe.fromNumber=tr;fe.fromString=jR;var y3=function(){return new Kd},_3=function(){return uf()},Yp=lf,E3=oR,w3=Vs,qw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},I3=Ol,Ec=aR,T3=Oe,S3=Un,Io=fe;const Hw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="10.1.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new qh("@firebase/firestore");function Og(){return _i.logLevel}function A3(t){_i.setLogLevel(t)}function x(t,...e){if(_i.logLevel<=re.DEBUG){const n=e.map(f_);_i.debug(`Firestore (${ua}): ${t}`,...n)}}function Me(t,...e){if(_i.logLevel<=re.ERROR){const n=e.map(f_);_i.error(`Firestore (${ua}): ${t}`,...n)}}function Bn(t,...e){if(_i.logLevel<=re.WARN){const n=e.map(f_);_i.warn(`Firestore (${ua}): ${t}`,...n)}}function f_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t="Unexpected state"){const e=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: `+t;throw Me(e),new Error(e)}function z(t,e){t||$()}function C3(t,e){t||$()}function F(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends jt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}class P3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class b3{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new at;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new at,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new at)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new zR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new st(e)}}class k3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class x3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new k3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(z(typeof n.token=="string"),this.R=n.token,new D3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=O3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function J(t,e){return t<e?-1:t>e?1:0}function Lo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function HR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ae(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new Ae(0,0))}static max(){return new j(new Ae(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(),r===void 0?r=e.length-n:r>e.length-n&&$(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ie extends tl{construct(e,n,r){return new ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new b(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ie(n)}static emptyPath(){return new ie([])}}const V3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends tl{construct(e,n,r){return new $e(e,n,r)}static isValidIdentifier(e){return V3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new b(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new b(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new b(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new b(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.path=e}static fromPath(e){return new O(ie.fromString(e))}static fromName(e){return new O(ie.fromString(e).popFirst(5))}static empty(){return new O(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new O(new ie(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Vg(t){return t.fields.find(e=>e.kind===2)}function zi(t){return t.fields.filter(e=>e.kind!==2)}WR.UNKNOWN_ID=-1;class F3{constructor(e,n){this.fieldPath=e,this.kind=n}}class Jd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Jd(0,mn.min())}}function GR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=j.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new mn(i,O.empty(),e)}function KR(t){return new mn(t.readTime,t.key,-1)}class mn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mn(j.min(),O.empty(),-1)}static max(){return new mn(j.max(),O.empty(),-1)}}function p_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=O.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(t){if(t.code!==C.FAILED_PRECONDITION||t.message!==QR)throw t;x("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new S((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof S?n:S.resolve(n)}catch(n){return S.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):S.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):S.reject(n)}static resolve(e){return new S((n,r)=>{n(e)})}static reject(e){return new S((n,r)=>{r(e)})}static waitFor(e){return new S((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=S.resolve(!1);for(const r of e)n=n.next(i=>i?S.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new S((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new S((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.m=new at,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new fu(e,n.error)):this.m.resolve()},this.transaction.onerror=r=>{const i=m_(r.target.error);this.m.reject(new fu(e,i))}}static open(e,n,r,i){try{return new vf(n,e.transaction(i,r))}catch(s){throw new fu(n,s)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(x("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new M3(n)}}class On{constructor(e,n,r){this.name=e,this.version=n,this.S=r,On.D(ke())===12.2&&Me("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return x("SimpleDb","Removing database:",e),qi(window.indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!$u())return!1;if(On.C())return!0;const e=ke(),n=On.D(e),r=0<n&&n<10,i=On.F(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static F(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async N(e){return this.db||(x("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new b(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new b(C.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new fu(e,o))},i.onupgradeneeded=s=>{x("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.B(o,i.transaction,s.oldVersion,this.version).next(()=>{x("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const a=vf.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(l=>(a.p(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),await a.g,u}catch(a){const u=a,l=u.name!=="FirebaseError"&&o<3;if(x("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class L3{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return qi(this.q.delete())}}class fu extends b{constructor(e,n){super(C.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Fi(t){return t.name==="IndexedDbTransactionError"}class M3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(x("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(x("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qi(r)}add(e){return x("SimpleDb","ADD",this.store.name,e,e),qi(this.store.add(e))}get(e){return qi(this.store.get(e)).next(n=>(n===void 0&&(n=null),x("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return x("SimpleDb","DELETE",this.store.name,e),qi(this.store.delete(e))}count(){return x("SimpleDb","COUNT",this.store.name),qi(this.store.count())}G(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.j(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new S((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new S((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,n){x("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.j(i,(s,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.j(i,n)}X(e){const n=this.cursor({});return new S((r,i)=>{n.onerror=s=>{const o=m_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}j(e,n){const r=[];return new S((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new L3(a),l=n(a.primaryKey,a.value,u);if(l instanceof S){const c=l.catch(d=>(u.done(),S.reject(d)));r.push(c)}u.isDone?i():u.U===null?a.continue():a.continue(u.U)}}).next(()=>S.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function qi(t){return new S((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=m_(r.target.error);n(i)}})}let Ww=!1;function m_(t){const e=On.D(ke());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new b("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ww||(Ww=!0,setTimeout(()=>{throw r},0)),r}}return t}class $3{constructor(e,n){this.asyncQueue=e,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){x("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{x("IndexBackiller",`Documents written: ${await this.ee.ne()}`)}catch(n){Fi(n)?x("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Vi(n)}await this.te(6e4)})}}class U3{constructor(e,n){this.localStore=e,this.persistence=n}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,e))}re(e,n){const r=new Set;let i=n,s=!0;return S.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return x("IndexBackiller",`Processing collection: ${o}`),this.ie(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ie(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(i,s)).next(a=>(x("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}se(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=KR(s);p_(o,r)>0&&(r=o)}),new mn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Xt.ae=-1;function Ll(t){return t==null}function nl(t){return t===0&&1/t==-1/0}function JR(t){return typeof t=="number"&&Number.isInteger(t)&&!nl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Gw(e)),e=B3(t.get(n),e);return Gw(e)}function B3(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Gw(t){return t+""}function nr(t){const e=t.length;if(z(e>=2),e===2)return z(t.charAt(0)===""&&t.charAt(1)===""),ie.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&$(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:$()}s=o+2}return new ie(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e){return[t,zt(e)]}function XR(t,e,n){return[t,zt(e),n]}const j3={},z3=["prefixPath","collectionGroup","readTime","documentId"],q3=["prefixPath","collectionGroup","documentId"],H3=["collectionGroup","readTime","prefixPath","documentId"],W3=["canonicalId","targetId"],G3=["targetId","path"],K3=["path","targetId"],Q3=["collectionId","parent"],Y3=["indexId","uid"],J3=["uid","sequenceNumber"],X3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Z3=["indexId","uid","orderedDocumentKey"],e9=["userId","collectionPath","documentId"],t9=["userId","collectionPath","largestBatchId"],n9=["userId","collectionGroup","largestBatchId"],ZR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],r9=[...ZR,"documentOverlays"],eP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tP=eP,i9=[...tP,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends YR{constructor(e,n){super(),this.ue=e,this.currentSequenceNumber=n}}function ct(t,e){const n=F(t);return On.O(n.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}}class wc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??pt.RED,this.left=i??pt.EMPTY,this.right=s??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new pt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();const e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,n,r,i,s){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.comparator=e,this.data=new ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yw(this.data.getIterator())}getIteratorFrom(e){return new Yw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ie)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ie(this.comparator);return n.data=e,n}}class Yw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new Ie($e.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new rP("Invalid base64 string: "+s):s}}(e);return new et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const o9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(t){if(z(!!t),typeof t=="string"){let e=0;const n=o9.exec(t);if(z(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wi(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function g_(t){const e=t.mapValue.fields.__previous_value__;return yf(e)?g_(e):e}function rl(t){const e=Ei(t.mapValue.fields.__local_write_time__.timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Ii{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ii("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ii&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},td={nullValue:"NULL_VALUE"};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yf(t)?4:iP(t)?9007199254740991:10:$()}function dr(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ei(i.timestampValue),a=Ei(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wi(i.bytesValue).isEqual(wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=De(i.doubleValue),a=De(s.doubleValue);return o===a?nl(o)===nl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Lo(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Qw(o)!==Qw(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!dr(o[u],a[u])))return!1;return!0}(t,e);default:return $()}}function il(t,e){return(t.values||[]).find(n=>dr(n,e))!==void 0}function Ti(t,e){if(t===e)return 0;const n=Es(t),r=Es(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=De(s.integerValue||s.doubleValue),u=De(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Jw(t.timestampValue,e.timestampValue);case 4:return Jw(rl(t),rl(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(s,o){const a=wi(s),u=wi(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=J(a[l],u[l]);if(c!==0)return c}return J(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=J(De(s.latitude),De(o.latitude));return a!==0?a:J(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Ti(a[l],u[l]);if(c)return c}return J(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ni.mapValue&&o===ni.mapValue)return 0;if(s===ni.mapValue)return 1;if(o===ni.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let d=0;d<u.length&&d<c.length;++d){const h=J(u[d],c[d]);if(h!==0)return h;const f=Ti(a[u[d]],l[c[d]]);if(f!==0)return f}return J(u.length,c.length)}(t.mapValue,e.mapValue);default:throw $()}}function Jw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=Ei(t),r=Ei(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function Mo(t){return Lg(t)}function Lg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ei(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return O.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Lg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Lg(n.fields[o])}`;return i+"}"}(t.mapValue):$()}function ws(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mg(t){return!!t&&"integerValue"in t}function sl(t){return!!t&&"arrayValue"in t}function Xw(t){return!!t&&"nullValue"in t}function Zw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nd(t){return!!t&&"mapValue"in t}function pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function u9(t){return"nullValue"in t?td:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ws(Ii.empty(),O.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:$()}function l9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ws(Ii.empty(),O.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ni:$()}function e1(t,e){const n=Ti(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function t1(t,e){const n=Ti(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=$e.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=pu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());nd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vt(pu(this.value))}}function sP(t){const e=[];return Fs(t.fields,(n,r)=>{const i=new $e([n]);if(nd(r)){const s=sP(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ee(e,0,j.min(),j.min(),j.min(),vt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ee(e,1,n,j.min(),r,i,0)}static newNoDocument(e,n){return new Ee(e,2,n,j.min(),j.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new Ee(e,3,n,j.min(),j.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ee&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){this.position=e,this.inclusive=n}}function n1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=O.comparator(O.fromName(o.referenceValue),n.key):r=Ti(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function r1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n="asc"){this.field=e,this.dir=n}}function c9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{}class Z extends oP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d9(e,n,r):n==="array-contains"?new p9(e,r):n==="in"?new hP(e,r):n==="not-in"?new m9(e,r):n==="array-contains-any"?new g9(e,r):new Z(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new h9(e,r):new f9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ti(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(Ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class de extends oP{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new de(e,n)}matches(e){return $o(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function $o(t){return t.op==="and"}function $g(t){return t.op==="or"}function v_(t){return aP(t)&&$o(t)}function aP(t){for(const e of t.filters)if(e instanceof de)return!1;return!0}function Ug(t){if(t instanceof Z)return t.field.canonicalString()+t.op.toString()+Mo(t.value);if(v_(t))return t.filters.map(e=>Ug(e)).join(",");{const e=t.filters.map(n=>Ug(n)).join(",");return`${t.op}(${e})`}}function uP(t,e){return t instanceof Z?function(r,i){return i instanceof Z&&r.op===i.op&&r.field.isEqual(i.field)&&dr(r.value,i.value)}(t,e):t instanceof de?function(r,i){return i instanceof de&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&uP(o,i.filters[a]),!0):!1}(t,e):void $()}function lP(t,e){const n=t.filters.concat(e);return de.create(n,t.op)}function cP(t){return t instanceof Z?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(t):t instanceof de?function(n){return n.op.toString()+" {"+n.getFilters().map(cP).join(" ,")+"}"}(t):"Filter"}class d9 extends Z{constructor(e,n,r){super(e,n,r),this.key=O.fromName(r.referenceValue)}matches(e){const n=O.comparator(e.key,this.key);return this.matchesComparison(n)}}class h9 extends Z{constructor(e,n){super(e,"in",n),this.keys=dP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class f9 extends Z{constructor(e,n){super(e,"not-in",n),this.keys=dP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>O.fromName(r.referenceValue))}class p9 extends Z{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sl(n)&&il(n.arrayValue,this.value)}}class hP extends Z{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&il(this.value.arrayValue,n)}}class m9 extends Z{constructor(e,n){super(e,"not-in",n)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!il(this.value.arrayValue,n)}}class g9 extends Z{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function Bg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new v9(t,e,n,r,i,s,o)}function Is(t){const e=F(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ug(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ll(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mo(r)).join(",")),e.he=n}return e.he}function Ml(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!r1(t.startAt,e.startAt)&&r1(t.endAt,e.endAt)}function Xd(t){return O.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zd(t,e){return t.filters.filter(n=>n instanceof Z&&n.field.isEqual(e))}function i1(t,e,n){let r=td,i=!0;for(const s of Zd(t,e)){let o=td,a=!0;switch(s.op){case"<":case"<=":o=u9(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=td}e1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];e1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function s1(t,e,n){let r=ni,i=!0;for(const s of Zd(t,e)){let o=ni,a=!0;switch(s.op){case">=":case">":o=l9(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ni}t1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];t1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function fP(t,e,n,r,i,s,o,a){return new Fr(t,e,n,r,i,s,o,a)}function la(t){return new Fr(t)}function o1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function y_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function _f(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function __(t){return t.collectionGroup!==null}function cs(t){const e=F(t);if(e.Pe===null){e.Pe=[];const n=_f(e),r=y_(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new To(n)),e.Pe.push(new To($e.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new To($e.keyField(),s))}}}return e.Pe}function sn(t){const e=F(t);if(!e.Ie)if(e.limitType==="F")e.Ie=Bg(e.path,e.collectionGroup,cs(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of cs(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new To(s.field,o))}const r=e.endAt?new Si(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Si(e.startAt.position,e.startAt.inclusive):null;e.Ie=Bg(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.Ie}function jg(t,e){e.getFirstInequalityField(),_f(t);const n=t.filters.concat([e]);return new Fr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function eh(t,e,n){return new Fr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $l(t,e){return Ml(sn(t),sn(e))&&t.limitType===e.limitType}function pP(t){return`${Is(sn(t))}|lt:${t.limitType}`}function zg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cP(i)).join(", ")}]`),Ll(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mo(i)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function Ul(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):O.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of cs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=n1(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,cs(r),i)||r.endAt&&!function(o,a,u){const l=n1(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,cs(r),i))}(t,e)}function mP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gP(t){return(e,n)=>{let r=!1;for(const i of cs(t)){const s=y9(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function y9(t,e,n){const r=t.field.isKeyField()?O.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Ti(u,l):$()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return nP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=new ge(O.comparator);function en(){return _9}const vP=new ge(O.comparator);function Ya(...t){let e=vP;for(const n of t)e=e.insert(n.key,n);return e}function yP(t){let e=vP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rr(){return mu()}function _P(){return mu()}function mu(){return new Li(t=>t.toString(),(t,e)=>t.isEqual(e))}const E9=new ge(O.comparator),w9=new Ie(O.comparator);function X(...t){let e=w9;for(const n of t)e=e.add(n);return e}const I9=new Ie(J);function E_(){return I9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nl(e)?"-0":e}}function wP(t){return{integerValue:""+t}}function IP(t,e){return JR(e)?wP(e):EP(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this._=void 0}}function T9(t,e,n){return t instanceof Uo?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yf(s)&&(s=g_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ts?SP(t,e):t instanceof Ss?AP(t,e):function(i,s){const o=TP(i,s),a=a1(o)+a1(i.Te);return Mg(o)&&Mg(i.Te)?wP(a):EP(i.serializer,a)}(t,e)}function S9(t,e,n){return t instanceof Ts?SP(t,e):t instanceof Ss?AP(t,e):n}function TP(t,e){return t instanceof Bo?function(r){return Mg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Uo extends Ef{}class Ts extends Ef{constructor(e){super(),this.elements=e}}function SP(t,e){const n=CP(e);for(const r of t.elements)n.some(i=>dr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ss extends Ef{constructor(e){super(),this.elements=e}}function AP(t,e){let n=CP(e);for(const r of t.elements)n=n.filter(i=>!dr(i,r));return{arrayValue:{values:n}}}class Bo extends Ef{constructor(e,n){super(),this.serializer=e,this.Te=n}}function a1(t){return De(t.integerValue||t.doubleValue)}function CP(t){return sl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.field=e,this.transform=n}}function A9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ts&&i instanceof Ts||r instanceof Ss&&i instanceof Ss?Lo(r.elements,i.elements,dr):r instanceof Bo&&i instanceof Bo?dr(r.Te,i.Te):r instanceof Uo&&i instanceof Uo}(t.transform,e.transform)}class C9{constructor(e,n){this.version=e,this.transformResults=n}}class Se{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Se}static exists(e){return new Se(void 0,e)}static updateTime(e){return new Se(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wf{}function RP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new da(t.key,Se.none()):new ca(t.key,t.data,Se.none());{const n=t.data,r=vt.empty();let i=new Ie($e.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Lr(t.key,r,new Zt(i.toArray()),Se.none())}}function R9(t,e,n){t instanceof ca?function(i,s,o){const a=i.value.clone(),u=l1(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(i,s,o){if(!rd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=l1(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(PP(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,r){return t instanceof ca?function(s,o,a,u){if(!rd(s.precondition,o))return a;const l=s.value.clone(),c=c1(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(s,o,a,u){if(!rd(s.precondition,o))return a;const l=c1(s.fieldTransforms,u,o),c=o.data;return c.setAll(PP(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return rd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function P9(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=TP(r.transform,i||null);s!=null&&(n===null&&(n=vt.empty()),n.set(r.field,s))}return n||null}function u1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Lo(r,i,(s,o)=>A9(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ca extends wf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lr extends wf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function PP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function l1(t,e,n){const r=new Map;z(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,S9(o,a,n[i]))}return r}function c1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,T9(s,o,e))}return r}class da extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w_ extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&R9(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_P();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=RP(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),X())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,(n,r)=>u1(n,r))&&Lo(this.baseMutations,e.baseMutations,(n,r)=>u1(n,r))}}class T_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){z(e.mutations.length===r.length);let i=function(){return E9}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new T_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ne;function bP(t){switch(t){default:return $();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function kP(t){if(t===void 0)return Me("GRPC error has no .code"),C.UNKNOWN;switch(t){case qe.OK:return C.OK;case qe.CANCELLED:return C.CANCELLED;case qe.UNKNOWN:return C.UNKNOWN;case qe.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case qe.INTERNAL:return C.INTERNAL;case qe.UNAVAILABLE:return C.UNAVAILABLE;case qe.UNAUTHENTICATED:return C.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case qe.NOT_FOUND:return C.NOT_FOUND;case qe.ALREADY_EXISTS:return C.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return C.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case qe.ABORTED:return C.ABORTED;case qe.OUT_OF_RANGE:return C.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return C.UNIMPLEMENTED;case qe.DATA_LOSS:return C.DATA_LOSS;default:return $()}}(ne=qe||(qe={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ic}static getOrCreateInstance(){return Ic===null&&(Ic=new A_),Ic}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Ic=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=new Io([4294967295,4294967295],0);function d1(t){const e=xP().encode(t),n=new S3;return n.update(e),new Uint8Array(n.digest())}function h1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Io([n,r],0),new Io([i,s],0)]}class C_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ja(`Invalid padding: ${n}`);if(r<0)throw new Ja(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${n}`);this.de=8*e.length-n,this.Ae=Io.fromNumber(this.de)}Re(e,n,r){let i=e.add(n.multiply(Io.fromNumber(r)));return i.compare(k9)===1&&(i=new Io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ae).toNumber()}Ve(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.de===0)return!1;const n=d1(e),[r,i]=h1(n);for(let s=0;s<this.hashCount;s++){const o=this.Re(r,i,s);if(!this.Ve(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new C_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.de===0)return;const n=d1(e),[r,i]=h1(n);for(let s=0;s<this.hashCount;s++){const o=this.Re(r,i,s);this.me(o)}}me(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,zl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jl(j.min(),i,new ge(J),en(),X())}}class zl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zl(r,n,X(),X(),X())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,r,i){this.fe=e,this.removedTargetIds=n,this.key=r,this.ge=i}}class DP{constructor(e,n){this.targetId=e,this.pe=n}}class NP{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class f1{constructor(){this.ye=0,this.we=m1(),this.Se=et.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return this.ye!==0}get Ce(){return this.De}Fe(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}Me(){let e=X(),n=X(),r=X();return this.we.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$()}}),new zl(this.Se,this.be,e,n,r)}xe(){this.De=!1,this.we=m1()}Oe(e,n){this.De=!0,this.we=this.we.insert(e,n)}Ne(e){this.De=!0,this.we=this.we.remove(e)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class x9{constructor(e){this.qe=e,this.Qe=new Map,this.Ke=en(),this.$e=p1(),this.Ue=new ge(J)}We(e){for(const n of e.fe)e.ge&&e.ge.isFoundDocument()?this.Ge(n,e.ge):this.ze(n,e.key,e.ge);for(const n of e.removedTargetIds)this.ze(n,e.key,e.ge)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||this.removeTarget(n);break;case 3:this.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Fe(e.resumeToken));break;default:$()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qe.forEach((r,i)=>{this.Je(i)&&n(i)})}Ze(e){var n,r;const i=e.targetId,s=e.pe.count,o=this.Xe(i);if(o){const a=o.target;if(Xd(a))if(s===0){const u=new O(a.path);this.ze(i,u,Ee.newNoDocument(u,j.min()))}else z(s===1);else{const u=this.et(i);if(u!==s){const l=this.tt(e,u);if(l.status!==0){this.Ye(i);const c=l.status===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(i,c)}(n=A_.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(d,h,f,m){var g,_,p,v,y,E;const T={localCacheCount:f,existenceFilterCount:m.count},I=m.unchangedNames;return I&&(T.bloomFilter={applied:d===0,hashCount:(g=I==null?void 0:I.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(v=(p=(_=I==null?void 0:I.bits)===null||_===void 0?void 0:_.bitmap)===null||p===void 0?void 0:p.length)!==null&&v!==void 0?v:0,padding:(E=(y=I==null?void 0:I.bits)===null||y===void 0?void 0:y.padding)!==null&&E!==void 0?E:0},h&&(T.bloomFilter.mightContain=h)),T}(l.status,(r=l.nt)!==null&&r!==void 0?r:null,u,e.pe))}}}}tt(e,n){const{unchangedNames:r,count:i}=e.pe;if(!r||!r.bits)return{status:1};const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let u,l;try{u=wi(s).toUint8Array()}catch(d){if(d instanceof rP)return Bn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw d}try{l=new C_(u,o,a)}catch(d){return Bn(d instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",d),{status:1}}const c=d=>{const h=this.qe.rt();return l.mightContain(`projects/${h.projectId}/databases/${h.database}/documents/${d}`)};return l.de===0?{status:1}:{status:i===n-this.it(e.targetId,c)?0:2,nt:c}}it(e,n){const r=this.qe.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{n(s.path.canonicalString())||(this.ze(e,s,null),i++)}),i}st(e){const n=new Map;this.Qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&Xd(a.target)){const u=new O(a.target.path);this.Ke.get(u)!==null||this.ot(o,u)||this.ze(o,u,Ee.newNoDocument(u,e))}s.Ce&&(n.set(o,s.Me()),s.xe())}});let r=X();this.$e.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Xe(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ke.forEach((s,o)=>o.setReadTime(e));const i=new jl(e,n,this.Ue,this.Ke,r);return this.Ke=en(),this.$e=p1(),this.Ue=new ge(J),i}Ge(e,n){if(!this.Je(e))return;const r=this.ot(e,n.key)?2:0;this.He(e).Oe(n.key,r),this.Ke=this.Ke.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const i=this.He(e);this.ot(e,n)?i.Oe(n,1):i.Ne(n),this.$e=this.$e.insert(n,this._t(n).delete(e)),r&&(this.Ke=this.Ke.insert(n,r))}removeTarget(e){this.Qe.delete(e)}et(e){const n=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Be(e){this.He(e).Be()}He(e){let n=this.Qe.get(e);return n||(n=new f1,this.Qe.set(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ie(J),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||x("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.Qe.get(e);return n&&n.ve?null:this.qe.ut(e)}Ye(e){this.Qe.set(e,new f1),this.qe.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ot(e,n){return this.qe.getRemoteKeysForTarget(e).has(n)}}function p1(){return new ge(O.comparator)}function m1(){return new ge(O.comparator)}const D9=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),N9=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),O9=(()=>({and:"AND",or:"OR"}))();class V9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qg(t,e){return t.useProto3Json||Ll(e)?e:{value:e}}function jo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F9(t,e){return jo(t,e.toTimestamp())}function Ue(t){return z(!!t),j.fromTimestamp(function(n){const r=Ei(n);return new Ae(r.seconds,r.nanos)}(t))}function R_(t,e){return function(r){return new ie(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function VP(t){const e=ie.fromString(t);return z(qP(e)),e}function ol(t,e){return R_(t.databaseId,e.path)}function ar(t,e){const n=VP(e);if(n.get(1)!==t.databaseId.projectId)throw new b(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new O(LP(n))}function Hg(t,e){return R_(t.databaseId,e)}function FP(t){const e=VP(t);return e.length===4?ie.emptyPath():LP(e)}function al(t){return new ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LP(t){return z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function g1(t,e,n){return{name:ol(t,e),fields:n.value.mapValue.fields}}function MP(t,e,n){const r=ar(t,e.name),i=Ue(e.updateTime),s=e.createTime?Ue(e.createTime):j.min(),o=new vt({mapValue:{fields:e.fields}}),a=Ee.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function L9(t,e){return"found"in e?function(r,i){z(!!i.found),i.found.name,i.found.updateTime;const s=ar(r,i.found.name),o=Ue(i.found.updateTime),a=i.found.createTime?Ue(i.found.createTime):j.min(),u=new vt({mapValue:{fields:i.found.fields}});return Ee.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){z(!!i.missing),z(!!i.readTime);const s=ar(r,i.missing),o=Ue(i.readTime);return Ee.newNoDocument(s,o)}(t,e):$()}function M9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(z(c===void 0||typeof c=="string"),et.fromBase64String(c||"")):(z(c===void 0||c instanceof Uint8Array),et.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?C.UNKNOWN:kP(l.code);return new b(c,l.message||"")}(o);n=new NP(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ar(t,r.document.name),s=Ue(r.document.updateTime),o=r.document.createTime?Ue(r.document.createTime):j.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=Ee.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new id(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ar(t,r.document),s=r.readTime?Ue(r.readTime):j.min(),o=Ee.newNoDocument(i,s),a=r.removedTargetIds||[];n=new id([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ar(t,r.document),s=r.removedTargetIds||[];n=new id([],s,i,null)}else{if(!("filter"in e))return $();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new b9(i,s),a=r.targetId;n=new DP(a,o)}}return n}function ul(t,e){let n;if(e instanceof ca)n={update:g1(t,e.key,e.value)};else if(e instanceof da)n={delete:ol(t,e.key)};else if(e instanceof Lr)n={update:g1(t,e.key,e.data),updateMask:q9(e.fieldMask)};else{if(!(e instanceof w_))return $();n={verify:ol(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ts)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ss)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bo)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw $()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:F9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(t,e.precondition)),n}function Wg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Se.updateTime(Ue(s.updateTime)):s.exists!==void 0?Se.exists(s.exists):Se.none()}(e.currentDocument):Se.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)z(a.setToServerValue==="REQUEST_TIME"),u=new Uo;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];u=new Ts(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];u=new Ss(c)}else"increment"in a?u=new Bo(o,a.increment):$();const l=$e.fromServerFormat(a.fieldPath);return new Bl(l,u)}(t,i)):[];if(e.update){e.update.name;const i=ar(t,e.update.name),s=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const l=u.fieldPaths||[];return new Zt(l.map(c=>$e.fromServerFormat(c)))}(e.updateMask);return new Lr(i,s,o,n,r)}return new ca(i,s,n,r)}if(e.delete){const i=ar(t,e.delete);return new da(i,n)}if(e.verify){const i=ar(t,e.verify);return new w_(i,n)}return $()}function $9(t,e){return t&&t.length>0?(z(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ue(i.updateTime):Ue(s);return o.isEqual(j.min())&&(o=Ue(s)),new C9(o,i.transformResults||[])}(n,e))):[]}function $P(t,e){return{documents:[Hg(t,e.path)]}}function UP(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Hg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Hg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return zP(de.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(l=>function(d){return{field:Gs(d.field),direction:B9(d.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=qg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function BP(t){let e=FP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){z(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const h=jP(d);return h instanceof de&&v_(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(m){return new To(Ks(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Ll(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){const h=!!d.before,f=d.values||[];return new Si(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const h=!d.before,f=d.values||[];return new Si(f,h)}(n.endAt)),fP(e,i,o,s,a,"F",u,l)}function U9(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ks(n.unaryFilter.field);return Z.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ks(n.unaryFilter.field);return Z.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ks(n.unaryFilter.field);return Z.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ks(n.unaryFilter.field);return Z.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(t):t.fieldFilter!==void 0?function(n){return Z.create(Ks(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return de.create(n.compositeFilter.filters.map(r=>jP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $()}}(n.compositeFilter.op))}(t):$()}function B9(t){return D9[t]}function j9(t){return N9[t]}function z9(t){return O9[t]}function Gs(t){return{fieldPath:t.canonicalString()}}function Ks(t){return $e.fromServerFormat(t.fieldPath)}function zP(t){return t instanceof Z?function(n){if(n.op==="=="){if(Zw(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NAN"}};if(Xw(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zw(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NAN"}};if(Xw(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(n.field),op:j9(n.op),value:n.value}}}(t):t instanceof de?function(n){const r=n.getFilters().map(i=>zP(i));return r.length===1?r[0]:{compositeFilter:{op:z9(n.op),filters:r}}}(t):$()}function q9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r,i,s=j.min(),o=j.min(),a=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.ct=e}}function H9(t,e){let n;if(e.document)n=MP(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=O.fromSegments(e.noDocument.path),i=Cs(e.noDocument.readTime);n=Ee.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return $();{const r=O.fromSegments(e.unknownDocument.path),i=Cs(e.unknownDocument.version);n=Ee.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ae(i[0],i[1]);return j.fromTimestamp(s)}(e.readTime)),n}function v1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:th(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ol(s,o.key),fields:o.data.value.mapValue.fields,updateTime:jo(s,o.version.toTimestamp()),createTime:jo(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:As(e.version)};else{if(!e.isUnknownDocument())return $();r.unknownDocument={path:n.path.toArray(),version:As(e.version)}}return r}function th(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function As(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cs(t){const e=new Ae(t.seconds,t.nanoseconds);return j.fromTimestamp(e)}function Hi(t,e){const n=(e.baseMutations||[]).map(s=>Wg(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Wg(t.ct,s)),i=Ae.fromMillis(e.localWriteTimeMs);return new I_(e.batchId,i,n,r)}function Xa(t){const e=Cs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Cs(t.lastLimboFreeSnapshotVersion):j.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return z(s.documents.length===1),sn(la(FP(s.documents[0])))}(t.query):function(s){return sn(BP(s))}(t.query),new Er(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,et.fromBase64String(t.resumeToken))}function WP(t,e){const n=As(e.snapshotVersion),r=As(e.lastLimboFreeSnapshotVersion);let i;i=Xd(e.target)?$P(t.ct,e.target):UP(t.ct,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Is(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function P_(t){const e=BP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eh(e,e.limit,"L"):e}function Jp(t,e){return new S_(e.largestBatchId,Wg(t.ct,e.overlayMutation))}function y1(t,e){const n=e.path.lastSegment();return[t,zt(e.path.popLast()),n]}function _1(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:As(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{getBundleMetadata(e,n){return E1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Cs(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return E1(e).put(function(i){return{bundleId:i.id,createTime:As(Ue(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return w1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:P_(s.bundledQuery),readTime:Cs(s.readTime)}}(r)})}saveNamedQuery(e,n){return w1(e).put(function(i){return{name:i.name,readTime:As(Ue(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function E1(t){return ct(t,"bundles")}function w1(t){return ct(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new If(e,r)}getOverlay(e,n){return Da(e).get(y1(this.userId,n)).next(r=>r?Jp(this.serializer,r):null)}getOverlays(e,n){const r=rr();return S.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new S_(n,o);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(zt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Da(e).J("collectionPathOverlayIndex",a))}),S.waitFor(s)}getOverlaysForCollection(e,n,r){const i=rr(),s=zt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Da(e).G("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=Jp(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=rr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Da(e).Z({index:"collectionGroupOverlayIndex",range:a},(u,l,c)=>{const d=Jp(this.serializer,l);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}ht(e,n){return Da(e).put(function(i,s,o){const[a,u,l]=y1(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ul(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Da(t){return ct(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(De(e.integerValue));else if("doubleValue"in e){const r=De(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),nl(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(wi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?iP(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):$()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),O.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}Wi.bt=new Wi;function G9(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function I1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=G9(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class K9{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.vt(r.value),r=n.next();this.Ct()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.vt(r);else if(r<2048)this.vt(960|r>>>6),this.vt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.vt(480|r>>>12),this.vt(128|63&r>>>6),this.vt(128|63&r);else{const i=n.codePointAt(0);this.vt(240|i>>>18),this.vt(128|63&i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i)}}this.Ct()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const n=this.Lt(e),r=I1(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Lt(e),r=I1(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}vt(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ct(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Q9{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Y9{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Na{constructor(){this.Gt=new K9,this.zt=new Q9(this.Gt),this.jt=new Y9(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gi(this.indexId,this.documentKey,this.arrayValue,r)}}function zr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=T1(t.arrayValue,e.arrayValue),n!==0?n:(n=T1(t.directionalValue,e.directionalValue),n!==0?n:O.comparator(t.documentKey,e.documentKey)))}function T1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=r:this.Zt.push(r)}}en(e){z(e.collectionGroup===this.collectionId);const n=Vg(e);if(n!==void 0&&!this.tn(n))return!1;const r=zi(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt!==void 0){if(!i.has(this.Xt.field.canonicalString())){const a=r[s];if(!this.nn(this.Xt,a)||!this.rn(this.Yt[o++],a))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){var e,n;if(z(t instanceof Z||t instanceof de),t instanceof Z){if(t instanceof hP){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Z.create(t.field,"==",s)))||[];return de.create(i,"or")}return t}const r=t.filters.map(i=>GP(i));return de.create(r,t.op)}function X9(t){if(t.getFilters().length===0)return[];const e=Qg(GP(t));return z(KP(e)),Gg(e)||Kg(e)?[e]:e.getFilters()}function Gg(t){return t instanceof Z}function Kg(t){return t instanceof de&&v_(t)}function KP(t){return Gg(t)||Kg(t)||function(n){if(n instanceof de&&$g(n)){for(const r of n.getFilters())if(!Gg(r)&&!Kg(r))return!1;return!0}return!1}(t)}function Qg(t){if(z(t instanceof Z||t instanceof de),t instanceof Z)return t;if(t.filters.length===1)return Qg(t.filters[0]);const e=t.filters.map(r=>Qg(r));let n=de.create(e,t.op);return n=nh(n),KP(n)?n:(z(n instanceof de),z($o(n)),z(n.filters.length>1),n.filters.reduce((r,i)=>b_(r,i)))}function b_(t,e){let n;return z(t instanceof Z||t instanceof de),z(e instanceof Z||e instanceof de),n=t instanceof Z?e instanceof Z?function(i,s){return de.create([i,s],"and")}(t,e):S1(t,e):e instanceof Z?S1(e,t):function(i,s){if(z(i.filters.length>0&&s.filters.length>0),$o(i)&&$o(s))return lP(i,s.getFilters());const o=$g(i)?i:s,a=$g(i)?s:i,u=o.filters.map(l=>b_(l,a));return de.create(u,"or")}(t,e),nh(n)}function S1(t,e){if($o(e))return lP(e,t.getFilters());{const n=e.filters.map(r=>b_(t,r));return de.create(n,"or")}}function nh(t){if(z(t instanceof Z||t instanceof de),t instanceof Z)return t;const e=t.getFilters();if(e.length===1)return nh(e[0]);if(aP(t))return t;const n=e.map(i=>nh(i)),r=[];return n.forEach(i=>{i instanceof Z?r.push(i):i instanceof de&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:de.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(){this.sn=new k_}addToCollectionParentIndex(e,n){return this.sn.add(n),S.resolve()}getCollectionParents(e,n){return S.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return S.resolve()}deleteFieldIndex(e,n){return S.resolve()}getDocumentsMatchingTarget(e,n){return S.resolve(null)}getIndexType(e,n){return S.resolve(0)}getFieldIndexes(e,n){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,n){return S.resolve(mn.min())}getMinOffsetFromCollectionGroup(e,n){return S.resolve(mn.min())}updateCollectionGroup(e,n,r){return S.resolve()}updateIndexEntries(e,n){return S.resolve()}}class k_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ie(ie.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ie(ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Uint8Array(0);class eU{constructor(e,n){this.user=e,this.databaseId=n,this.on=new k_,this._n=new Li(r=>Is(r),(r,i)=>Ml(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const s={collectionId:r,parent:zt(i)};return A1(e).put(s)}return S.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[HR(n),""],!1,!0);return A1(e).G(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(nr(o.parent))}return r})}addFieldIndex(e,n){const r=Sc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Va(e);return s.next(a=>{o.put(_1(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Sc(e),i=Va(e),s=Oa(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Oa(e);let i=!0;const s=new Map;return S.forEach(this.an(n),o=>this.un(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=X();const a=[];return S.forEach(s,(u,l)=>{x("IndexedDbIndexManager",`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(E=>`${E.fieldPath}:${E.kind}`).join(",")}`}(u)} to execute ${Is(n)}`);const c=function(y,E){const T=Vg(E);if(T===void 0)return null;for(const I of Zd(y,T.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(l,u),d=function(y,E){const T=new Map;for(const I of zi(E))for(const A of Zd(y,I.fieldPath))switch(A.op){case"==":case"in":T.set(I.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return T.set(I.fieldPath.canonicalString(),A.value),Array.from(T.values())}return null}(l,u),h=function(y,E){const T=[];let I=!0;for(const A of zi(E)){const k=A.kind===0?i1(y,A.fieldPath,y.startAt):s1(y,A.fieldPath,y.startAt);T.push(k.value),I&&(I=k.inclusive)}return new Si(T,I)}(l,u),f=function(y,E){const T=[];let I=!0;for(const A of zi(E)){const k=A.kind===0?s1(y,A.fieldPath,y.endAt):i1(y,A.fieldPath,y.endAt);T.push(k.value),I&&(I=k.inclusive)}return new Si(T,I)}(l,u),m=this.cn(u,l,h),g=this.cn(u,l,f),_=this.ln(u,l,d),p=this.hn(u.indexId,c,m,h.inclusive,g,f.inclusive,_);return S.forEach(p,v=>r.H(v,n.limit).next(y=>{y.forEach(E=>{const T=O.fromSegments(E.documentKey);o.has(T)||(o=o.add(T),a.push(T))})}))}).next(()=>a)}return S.resolve(null)})}an(e){let n=this._n.get(e);return n||(e.filters.length===0?n=[e]:n=X9(de.create(e.filters,"and")).map(r=>Bg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this._n.set(e,n),n)}hn(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),l=u/(n!=null?n.length:1),c=[];for(let d=0;d<u;++d){const h=n?this.Pn(n[d/l]):Tc,f=this.In(e,h,r[d%l],i),m=this.Tn(e,h,s[d%l],o),g=a.map(_=>this.In(e,h,_,!0));c.push(...this.createRange(f,m,g))}return c}In(e,n,r,i){const s=new Gi(e,O.empty(),n,r);return i?s:s.Jt()}Tn(e,n,r,i){const s=new Gi(e,O.empty(),n,r);return i?s.Jt():s}un(e,n){const r=new J9(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.an(n);return S.forEach(i,s=>this.un(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let l=new Ie($e.comparator),c=!1;for(const d of u.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:l=l.add(h.field));for(const d of u.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}En(e,n){const r=new Na;for(const i of zi(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);Wi.bt.Pt(s,o)}return r.Wt()}Pn(e){const n=new Na;return Wi.bt.Pt(e,n.Ht(0)),n.Wt()}dn(e,n){const r=new Na;return Wi.bt.Pt(ws(this.databaseId,n),r.Ht(function(s){const o=zi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}ln(e,n,r){if(r===null)return[];let i=[];i.push(new Na);let s=0;for(const o of zi(e)){const a=r[s++];for(const u of i)if(this.An(n,o.fieldPath)&&sl(a))i=this.Rn(i,o,a);else{const l=u.Ht(o.kind);Wi.bt.Pt(a,l)}}return this.Vn(i)}cn(e,n,r){return this.ln(e,n,r.position)}Vn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}Rn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Na;u.seed(a.Wt()),Wi.bt.Pt(o,u.Ht(n.kind)),s.push(u)}return s}An(e,n){return!!e.filters.find(r=>r instanceof Z&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Sc(e),i=Va(e);return(n?r.G("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.G()).next(s=>{const o=[];return S.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(c,d){const h=d?new Jd(d.sequenceNumber,new mn(Cs(d.readTime),new O(nr(d.documentKey)),d.largestBatchId)):Jd.empty(),f=c.fields.map(([m,g])=>new F3($e.fromServerFormat(m),g));return new WR(c.indexId,c.collectionGroup,f,h)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:J(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Sc(e),s=Va(e);return this.mn(e).next(o=>i.G("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>S.forEach(a,u=>s.put(_1(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return S.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?S.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.fn(e,i,u).next(l=>{const c=this.gn(s,u);return l.isEqual(c)?S.resolve():this.pn(e,s,u,l,c)}))))})}yn(e,n,r,i){return Oa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.dn(r,n.key),documentKey:n.key.path.toArray()})}wn(e,n,r,i){return Oa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.dn(r,n.key),n.key.path.toArray()])}fn(e,n,r){const i=Oa(e);let s=new Ie(zr);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.dn(r,n)])},(o,a)=>{s=s.add(new Gi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}gn(e,n){let r=new Ie(zr);const i=this.En(n,e);if(i==null)return r;const s=Vg(n);if(s!=null){const o=e.data.field(s.fieldPath);if(sl(o))for(const a of o.arrayValue.values||[])r=r.add(new Gi(n.indexId,e.key,this.Pn(a),i))}else r=r.add(new Gi(n.indexId,e.key,Tc,i));return r}pn(e,n,r,i,s){x("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,l,c,d,h){const f=u.getIterator(),m=l.getIterator();let g=qs(f),_=qs(m);for(;g||_;){let p=!1,v=!1;if(g&&_){const y=c(g,_);y<0?v=!0:y>0&&(p=!0)}else g!=null?v=!0:p=!0;p?(d(_),_=qs(m)):v?(h(g),g=qs(f)):(g=qs(f),_=qs(m))}}(i,s,zr,a=>{o.push(this.yn(e,n,r,a))},a=>{o.push(this.wn(e,n,r,a))}),S.waitFor(o)}mn(e){let n=1;return Va(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>zr(o,a)).filter((o,a,u)=>!a||zr(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=zr(o,e),u=zr(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Sn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Tc,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Tc,[]];s.push(IDBKeyRange.bound(a,u))}return s}Sn(e,n){return zr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(C1)}getMinOffset(e,n){return S.mapArray(this.an(n),r=>this.un(e,r).next(i=>i||$())).next(C1)}}function A1(t){return ct(t,"collectionParents")}function Oa(t){return ct(t,"indexEntries")}function Sc(t){return ct(t,"indexConfiguration")}function Va(t){return ct(t,"indexState")}function C1(t){z(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;p_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new mn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Z({range:o},(c,d,h)=>(a++,h.delete()));s.push(u.next(()=>{z(a===1)}));const l=[];for(const c of n.mutations){const d=XR(e,c.key.path,n.batchId);s.push(i.delete(d)),l.push(c.key)}return S.waitFor(s).next(()=>l)}function rh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw $();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(41943040,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class Tf{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}static lt(e,n,r,i){z(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Tf(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qr(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Qs(e),o=qr(e);return o.add({}).next(a=>{z(typeof a=="number");const u=new I_(a,n,r,i),l=function(f,m,g){const _=g.baseMutations.map(v=>ul(f.ct,v)),p=g.mutations.map(v=>ul(f.ct,v));return{userId:m,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:_,mutations:p}}(this.serializer,this.userId,u),c=[];let d=new Ie((h,f)=>J(h.canonicalString(),f.canonicalString()));for(const h of i){const f=XR(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),c.push(o.put(l)),c.push(s.put(f,j3))}return d.forEach(h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.bn[a]=u.keys()}),S.waitFor(c).next(()=>u)})}lookupMutationBatch(e,n){return qr(e).get(n).next(r=>r?(z(r.userId===this.userId),Hi(this.serializer,r)):null)}Dn(e,n){return this.bn[n]?S.resolve(this.bn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.bn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return qr(e).Z({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(z(a.batchId>=r),s=Hi(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qr(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qr(e).G("userMutationsIndex",n).next(r=>r.map(i=>Hi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ed(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Qs(e).Z({range:i},(o,a,u)=>{const[l,c,d]=o,h=nr(c);if(l===this.userId&&n.path.isEqual(h))return qr(e).get(d).next(f=>{if(!f)throw $();z(f.userId===this.userId),s.push(Hi(this.serializer,f))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(J);const i=[];return n.forEach(s=>{const o=ed(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Qs(e).Z({range:a},(l,c,d)=>{const[h,f,m]=l,g=nr(f);h===this.userId&&s.path.isEqual(g)?r=r.add(m):d.done()});i.push(u)}),S.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=ed(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ie(J);return Qs(e).Z({range:o},(u,l,c)=>{const[d,h,f]=u,m=nr(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):c.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(qr(e).get(s).next(o=>{if(o===null)throw $();z(o.userId===this.userId),r.push(Hi(this.serializer,o))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return QP(e.ue,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return S.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Qs(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=nr(s[1]);i.push(u)}else a.done()}).next(()=>{z(i.length===0)})})}containsKey(e,n){return YP(e,this.userId,n)}Fn(e){return JP(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function YP(t,e,n){const r=ed(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Qs(t).Z({range:s,Y:!0},(a,u,l)=>{const[c,d,h]=a;c===e&&d===i&&(o=!0),l.done()}).next(()=>o)}function qr(t){return ct(t,"mutations")}function Qs(t){return ct(t,"documentMutations")}function JP(t){return ct(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.Mn=e}next(){return this.Mn+=2,this.Mn}static xn(){return new Rs(0)}static On(){return new Rs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Nn(e).next(n=>{const r=new Rs(n.highestTargetId);return n.highestTargetId=r.next(),this.Bn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Nn(e).next(n=>j.fromTimestamp(new Ae(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Nn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Nn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Bn(e,i)))}addTargetData(e,n){return this.Ln(e,n).next(()=>this.Nn(e).next(r=>(r.targetCount+=1,this.kn(n,r),this.Bn(e,r))))}updateTargetData(e,n){return this.Ln(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Hs(e).delete(n.targetId)).next(()=>this.Nn(e)).next(r=>(z(r.targetCount>0),r.targetCount-=1,this.Bn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Hs(e).Z((o,a)=>{const u=Xa(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Hs(e).Z((r,i)=>{const s=Xa(i);n(s)})}Nn(e){return P1(e).get("targetGlobalKey").next(n=>(z(n!==null),n))}Bn(e,n){return P1(e).put("targetGlobalKey",n)}Ln(e,n){return Hs(e).put(WP(this.serializer,n))}kn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Nn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Is(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Hs(e).Z({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=Xa(a);Ml(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Yr(e);return n.forEach(o=>{const a=zt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),S.waitFor(i)}removeMatchingKeys(e,n,r){const i=Yr(e);return S.forEach(n,s=>{const o=zt(s.path);return S.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Yr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Yr(e);let s=X();return i.Z({range:r,Y:!0},(o,a,u)=>{const l=nr(o[1]),c=new O(l);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=zt(n.path),i=IDBKeyRange.bound([r],[HR(r)],!1,!0);let s=0;return Yr(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([o,a],u,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ut(e,n){return Hs(e).get(n).next(r=>r?Xa(r):null)}}function Hs(t){return ct(t,"targets")}function P1(t){return ct(t,"targetGlobal")}function Yr(t){return ct(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1([t,e],[n,r]){const i=J(t,n);return i===0?J(e,r):i}class nU{constructor(e){this.qn=e,this.buffer=new Ie(b1),this.Qn=0}Kn(){return++this.Qn}$n(e){const n=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();b1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Un=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Wn(6e4)}stop(){this.Un&&(this.Un.cancel(),this.Un=null)}get started(){return this.Un!==null}Wn(e){x("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Un=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fi(n)?x("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Vi(n)}await this.Wn(3e5)})}}class iU{constructor(e,n){this.Gn=e,this.params=n}calculateTargetCount(e,n){return this.Gn.zn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return S.resolve(Xt.ae);const r=new nU(n);return this.Gn.forEachTarget(e,i=>r.$n(i.sequenceNumber)).next(()=>this.Gn.jn(e,i=>r.$n(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Gn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Gn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(R1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R1):this.Hn(e,n))}getCacheSize(e){return this.Gn.getCacheSize(e)}Hn(e,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),Og()<=re.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function sU(t,e){return new iU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n){this.db=e,this.garbageCollector=sU(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Jn(e){let n=0;return this.jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}jn(e,n){return this.Yn(e,(r,i)=>n(i))}addReference(e,n,r){return Ac(e,r)}removeReference(e,n,r){return Ac(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ac(e,n)}Zn(e,n){return function(i,s){let o=!1;return JP(i).X(a=>YP(i,a,s).next(u=>(u&&(o=!0),S.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(o,a)=>{if(a<=n){const u=this.Zn(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,j.min()),Yr(e).delete(function(d){return[0,zt(d.path)]}(o))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ac(e,n)}Yn(e,n){const r=Yr(e);let i,s=Xt.ae;return r.Z({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{o===0?(s!==Xt.ae&&n(new O(nr(i)),s),s=l,i=u):s=Xt.ae}).next(()=>{s!==Xt.ae&&n(new O(nr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ac(t,e){return Yr(t).put(function(r,i){return{targetId:0,path:zt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.changes=new Li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ee.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?S.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return $i(e).put(r)}removeEntry(e,n,r){return $i(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],th(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Xn(e,r)))}getEntry(e,n){let r=Ee.newInvalidDocument(n);return $i(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Fa(n))},(i,s)=>{r=this.er(n,s)}).next(()=>r)}tr(e,n){let r={size:0,document:Ee.newInvalidDocument(n)};return $i(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Fa(n))},(i,s)=>{r={document:this.er(n,s),size:rh(s)}}).next(()=>r)}getEntries(e,n){let r=en();return this.nr(e,n,(i,s)=>{const o=this.er(i,s);r=r.insert(i,o)}).next(()=>r)}rr(e,n){let r=en(),i=new ge(O.comparator);return this.nr(e,n,(s,o)=>{const a=this.er(s,o);r=r.insert(s,a),i=i.insert(s,rh(o))}).next(()=>({documents:r,ir:i}))}nr(e,n,r){if(n.isEmpty())return S.resolve();let i=new Ie(D1);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Fa(i.first()),Fa(i.last())),o=i.getIterator();let a=o.getNext();return $i(e).Z({index:"documentKeyIndex",range:s},(u,l,c)=>{const d=O.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&D1(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?c.W(Fa(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),th(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $i(e).G(IDBKeyRange.bound(o,a,!0)).next(u=>{let l=en();for(const c of u){const d=this.er(O.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);d.isFoundDocument()&&(Ul(n,d)||i.has(d.key))&&(l=l.insert(d.key,d))}return l})}getAllFromCollectionGroup(e,n,r,i){let s=en();const o=x1(n,r),a=x1(n,mn.max());return $i(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,c)=>{const d=this.er(O.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new uU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return k1(e).get("remoteDocumentGlobalKey").next(n=>(z(!!n),n))}Xn(e,n){return k1(e).put("remoteDocumentGlobalKey",n)}er(e,n){if(n){const r=H9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(j.min())))return r}return Ee.newInvalidDocument(e)}}function ZP(t){return new aU(t)}class uU extends XP{constructor(e,n){super(),this.sr=e,this.trackRemovals=n,this._r=new Li(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ie((s,o)=>J(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this._r.get(s);if(n.push(this.sr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=v1(this.sr.serializer,o);i=i.add(s.path.popLast());const l=rh(u);r+=l-a.size,n.push(this.sr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=v1(this.sr.serializer,o.convertToNoDocument(j.min()));n.push(this.sr.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.sr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.sr.updateMetadata(e,r)),S.waitFor(n)}getFromCache(e,n){return this.sr.tr(e,n).next(r=>(this._r.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.sr.rr(e,n).next(({documents:r,ir:i})=>(i.forEach((s,o)=>{this._r.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function k1(t){return ct(t,"remoteDocumentGlobal")}function $i(t){return ct(t,"remoteDocumentsV14")}function Fa(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function x1(t,e){const n=e.documentKey.path.toArray();return[t,th(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function D1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=J(n[s],r[s]),i)return i;return i=J(n.length,r.length),i||(i=J(n[n.length-2],r[r.length-2]),i||J(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gu(r.mutation,i,Zt.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,n,r=X()){const i=rr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ya();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=rr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,X()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=en();const o=mu(),a=function(){return mu()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Lr)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),gu(c.mutation,l,c.mutation.getFieldMask(),Ae.now())):o.set(l.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var d;return a.set(l,new lU(c,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=mu();let i=new ge((o,a)=>o-a),s=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Zt.empty();c=a.applyToLocalView(l,c),r.set(u,c);const d=(i.get(a.batchId)||X()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,d=_P();c.forEach(h=>{if(!s.has(h)){const f=RP(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return S.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return O.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):__(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):S.resolve(rr());let a=-1,u=s;return o.next(l=>S.forEach(l,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?S.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{u=u.insert(c,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,X())).next(c=>({batchId:a,changes:yP(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new O(n)).next(r=>{let i=Ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Ya();return this.indexManager.getCollectionParents(e,i).next(o=>S.forEach(o,a=>{const u=function(c,d){return new Fr(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(l=>{l.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const l=u.getKey();s.get(l)===null&&(s=s.insert(l,Ee.newInvalidDocument(l)))});let o=Ya();return s.forEach((a,u)=>{const l=i.get(a);l!==void 0&&gu(l.mutation,u,Zt.empty(),Ae.now()),Ul(n,u)&&(o=o.insert(a,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.serializer=e,this.ar=new Map,this.ur=new Map}getBundleMetadata(e,n){return S.resolve(this.ar.get(n))}saveBundleMetadata(e,n){return this.ar.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ue(i.createTime)}}(n)),S.resolve()}getNamedQuery(e,n){return S.resolve(this.ur.get(n))}saveNamedQuery(e,n){return this.ur.set(n.name,function(i){return{name:i.name,query:P_(i.bundledQuery),readTime:Ue(i.readTime)}}(n)),S.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this.overlays=new ge(O.comparator),this.cr=new Map}getOverlay(e,n){return S.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rr();return S.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),S.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.cr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.cr.delete(r)),S.resolve()}getOverlaysForCollection(e,n,r){const i=rr(),s=n.length+1,o=new O(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ge((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=rr(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=rr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return S.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.cr.get(i.largestBatchId).delete(r.key);this.cr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new S_(n,r));let s=this.cr.get(n);s===void 0&&(s=X(),this.cr.set(n,s)),this.cr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.lr=new Ie(rt.hr),this.Pr=new Ie(rt.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.lr=this.lr.add(r),this.Pr=this.Pr.add(r)}Tr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Er(new rt(e,n))}dr(e,n){e.forEach(r=>this.removeReference(r,n))}Ar(e){const n=new O(new ie([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.Pr.forEachInRange([r,i],o=>{this.Er(o),s.push(o.key)}),s}Rr(){this.lr.forEach(e=>this.Er(e))}Er(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}Vr(e){const n=new O(new ie([])),r=new rt(n,e),i=new rt(n,e+1);let s=X();return this.Pr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.lr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.mr=n}static hr(e,n){return O.comparator(e.key,n.key)||J(e.mr,n.mr)}static Ir(e,n){return J(e.mr,n.mr)||O.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Ie(rt.hr)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new I_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.pr=this.pr.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,n){return S.resolve(this.yr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.wr(r),s=i<0?0:i;return S.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.gr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.pr.forEachInRange([r,i],o=>{const a=this.yr(o.mr);s.push(a)}),S.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(J);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.pr.forEachInRange([s,o],a=>{r=r.add(a.mr)})}),S.resolve(this.Sr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;O.isDocumentKey(s)||(s=s.child(""));const o=new rt(new O(s),0);let a=new Ie(J);return this.pr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.mr)),!0)},o),S.resolve(this.Sr(a))}Sr(e){const n=[];return e.forEach(r=>{const i=this.yr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){z(this.br(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.pr;return S.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.pr=r})}Cn(e){}containsKey(e,n){const r=new rt(n,0),i=this.pr.firstAfterOrEqual(r);return S.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}br(e,n){return this.wr(e)}wr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}yr(e){const n=this.wr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.Dr=e,this.docs=function(){return new ge(O.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Dr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return S.resolve(r?r.document.mutableCopy():Ee.newInvalidDocument(n))}getEntries(e,n){let r=en();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ee.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=en();const o=n.path,a=new O(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||p_(KR(c),r)<=0||(i.has(c.key)||Ul(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return S.resolve(s)}getAllFromCollectionGroup(e,n,r,i){$()}vr(e,n){return S.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pU(this)}getSize(e){return S.resolve(this.size)}}class pU extends XP{constructor(e){super(),this.sr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.sr.addEntry(e,i)):this.sr.removeEntry(r)}),S.waitFor(n)}getFromCache(e,n){return this.sr.getEntry(e,n)}getAllFromCache(e,n){return this.sr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e){this.persistence=e,this.Cr=new Li(n=>Is(n),Ml),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new x_,this.targetCount=0,this.Or=Rs.xn()}forEachTarget(e,n){return this.Cr.forEach((r,i)=>n(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Fr)}allocateTargetId(e){return this.highestTargetId=this.Or.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Fr&&(this.Fr=n),S.resolve()}Ln(e){this.Cr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Or=new Rs(n),this.highestTargetId=n),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}addTargetData(e,n){return this.Ln(n),this.targetCount+=1,S.resolve()}updateTargetData(e,n){return this.Ln(n),S.resolve()}removeTargetData(e,n){return this.Cr.delete(n.target),this.Mr.Ar(n.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Cr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Cr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(s).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,n){const r=this.Cr.get(n)||null;return S.resolve(r)}addMatchingKeys(e,n,r){return this.Mr.Tr(n,r),S.resolve()}removeMatchingKeys(e,n,r){this.Mr.dr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),S.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Mr.Ar(n),S.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Mr.Vr(n);return S.resolve(r)}containsKey(e,n){return S.resolve(this.Mr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n){this.Nr={},this.overlays={},this.Br=new Xt(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=e(this),this.kr=new mU(this),this.indexManager=new Z9,this.remoteDocumentCache=function(i){return new fU(i)}(r=>this.referenceDelegate.qr(r)),this.serializer=new HP(n),this.Qr=new cU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Nr[e.toKey()];return r||(r=new hU(n,this.referenceDelegate),this.Nr[e.toKey()]=r),r}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(e,n,r){x("MemoryPersistence","Starting transaction:",e);const i=new gU(this.Br.next());return this.referenceDelegate.Kr(),r(i).next(s=>this.referenceDelegate.$r(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ur(e,n){return S.or(Object.values(this.Nr).map(r=>()=>r.containsKey(e,n)))}}class gU extends YR{constructor(e){super(),this.currentSequenceNumber=e}}class Sf{constructor(e){this.persistence=e,this.Wr=new x_,this.Gr=null}static zr(e){return new Sf(e)}get jr(){if(this.Gr)return this.Gr;throw $()}addReference(e,n,r){return this.Wr.addReference(r,n),this.jr.delete(r.toString()),S.resolve()}removeReference(e,n,r){return this.Wr.removeReference(r,n),this.jr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,n){return this.jr.add(n.toString()),S.resolve()}removeTarget(e,n){this.Wr.Ar(n.targetId).forEach(i=>this.jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Kr(){this.Gr=new Set}$r(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.jr,r=>{const i=O.fromPath(r);return this.Hr(e,i).next(s=>{s||n.removeEntry(i,j.min())})}).next(()=>(this.Gr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hr(e,n).next(r=>{r?this.jr.delete(n.toString()):this.jr.add(n.toString())})}qr(e){return 0}Hr(e,n){return S.or([()=>S.resolve(this.Wr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ur(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e){this.serializer=e}B(e,n,r,i){const s=new vf("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kw,{unique:!0}),u.createObjectStore("documentMutations")}(e),N1(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),N1(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:j.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,l){return l.store("mutations").G().next(c=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kw,{unique:!0});const d=l.store("mutations"),h=c.map(f=>d.put(f));return S.waitFor(h)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Yr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Zr(s)))),r<7&&i>=7&&(o=o.next(()=>this.Xr(s))),r<8&&i>=8&&(o=o.next(()=>this.ei(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ti(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const l=u.createObjectStore("documentOverlays",{keyPath:e9});l.createIndex("collectionPathOverlayIndex",t9,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",n9,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:z3});l.createIndex("documentKeyIndex",q3),l.createIndex("collectionGroupIndex",H3)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ri(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Y3}).createIndex("sequenceNumberIndex",J3,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:X3}).createIndex("documentKeyIndex",Z3,{unique:!1})}(e))),o}Zr(e){let n=0;return e.store("remoteDocuments").Z((r,i)=>{n+=rh(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Yr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next(i=>S.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",o).next(a=>S.forEach(a,u=>{z(u.userId===s.userId);const l=Hi(this.serializer,u);return QP(e,s.userId,l).next(()=>{})}))}))}Xr(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,a)=>{const u=new ie(o),l=function(d){return[0,zt(d)]}(u);s.push(n.get(l).next(c=>c?S.resolve():(d=>n.put({targetId:0,path:zt(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(s))})}ei(e,n){e.createObjectStore("collectionParents",{keyPath:Q3});const r=n.store("collectionParents"),i=new k_,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:zt(u)})}};return n.store("remoteDocuments").Z({Y:!0},(o,a)=>{const u=new ie(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Z({Y:!0},([o,a,u],l)=>{const c=nr(a);return s(c.popLast())}))}ti(e){const n=e.store("targets");return n.Z((r,i)=>{const s=Xa(i),o=WP(this.serializer,s);return n.put(o)})}ni(e,n){const r=n.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new O(ie.fromString(d.document.name).popFirst(5)):d.noDocument?O.fromSegments(d.noDocument.path):d.unknownDocument?O.fromSegments(d.unknownDocument.path):$()}(o).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ri(e,n){const r=n.store("mutations"),i=ZP(this.serializer),s=new tb(Sf.zr,this.serializer.ct);return r.G().next(o=>{const a=new Map;return o.forEach(u=>{var l;let c=(l=a.get(u.userId))!==null&&l!==void 0?l:X();Hi(this.serializer,u).keys().forEach(d=>c=c.add(d)),a.set(u.userId,c)}),S.forEach(a,(u,l)=>{const c=new st(l),d=If.lt(this.serializer,c),h=s.getIndexManager(c),f=Tf.lt(c,this.serializer,h,s.referenceDelegate);return new eb(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Fg(n,Xt.ae),u).next()})})}}function N1(t){t.createObjectStore("targetDocuments",{keyPath:G3}).createIndex("documentTargetsIndex",K3,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",W3,{unique:!0}),t.createObjectStore("targetGlobal")}const Xp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class D_{constructor(e,n,r,i,s,o,a,u,l,c,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ii=s,this.window=o,this.document=a,this.si=l,this.oi=c,this._i=d,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=h=>Promise.resolve(),!D_.v())throw new b(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oU(this,i),this.Pi=n+"main",this.serializer=new HP(u),this.Ii=new On(this.Pi,this._i,new vU(this.serializer)),this.kr=new tU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZP(this.serializer),this.Qr=new W9,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,c===!1&&Me("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ei().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new b(C.FAILED_PRECONDITION,Xp);return this.di(),this.Ai(),this.Ri(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.kr.getHighestSequenceNumber(e))}).then(e=>{this.Br=new Xt(e,this.si)}).then(()=>{this.Lr=!0}).catch(e=>(this.Ii&&this.Ii.close(),Promise.reject(e)))}Vi(e){return this.hi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ii.k(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.Ei()}))}Ei(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.mi(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.hi(!1)))})}).next(()=>this.fi(e)).next(n=>this.isPrimary&&!n?this.gi(e).next(()=>!1):!!n&&this.pi(e).next(()=>!0))).catch(e=>{if(Fi(e))return x("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return x("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.hi(e)),this.isPrimary=e})}mi(e){return La(e).get("owner").next(n=>S.resolve(this.yi(n)))}wi(e){return Cc(e).delete(this.clientId)}async Si(){if(this.isPrimary&&!this.bi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ct(n,"clientMetadata");return r.G().next(i=>{const s=this.Di(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return S.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ti)for(const n of e)this.Ti.removeItem(this.vi(n.clientId))}}Ri(){this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ei().then(()=>this.Si()).then(()=>this.Ri()))}yi(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.oi?S.resolve(!0):La(e).get("owner").next(n=>{if(n!==null&&this.bi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new b(C.FAILED_PRECONDITION,Xp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cc(e).G().next(r=>this.Di(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&x("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),await this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Fg(e,Xt.ae);return this.gi(n).next(()=>this.wi(n))}),this.Ii.close(),this.Oi()}Di(e,n){return e.filter(r=>this.bi(r.updateTimeMs,n)&&!this.Ci(r.clientId))}Ni(){return this.runTransaction("getActiveClients","readonly",e=>Cc(e).G().next(n=>this.Di(n,18e5).map(r=>r.clientId)))}get started(){return this.Lr}getMutationQueue(e,n){return Tf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eU(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return If.lt(this.serializer,e)}getBundleCache(){return this.Qr}runTransaction(e,n,r){x("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===15?i9:u===14?tP:u===13?eP:u===12?r9:u===11?ZR:void $()}(this._i);let o;return this.Ii.runTransaction(e,i,s,a=>(o=new Fg(a,this.Br?this.Br.next():Xt.ae),n==="readwrite-primary"?this.mi(o).next(u=>!!u||this.fi(o)).next(u=>{if(!u)throw Me(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.hi(!1)),new b(C.FAILED_PRECONDITION,QR);return r(o)}).next(u=>this.pi(o).next(()=>u)):this.Bi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Bi(e){return La(e).get("owner").next(n=>{if(n!==null&&this.bi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.yi(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new b(C.FAILED_PRECONDITION,Xp)})}pi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return La(e).put("owner",n)}static v(){return On.v()}gi(e){const n=La(e);return n.get("owner").next(r=>this.yi(r)?(x("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):S.resolve())}bi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Me(`Detected an update time that is in the future: ${e} > ${r}`),!1))}di(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ui=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ei()))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground=this.document.visibilityState==="visible")}Mi(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}Ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ai=()=>{this.Fi();const n=/(?:Version|Mobile)\/1[456]/;XO()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ai))}xi(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}Ci(e){var n;try{const r=((n=this.Ti)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return x("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Me("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Fi(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Me("Failed to set zombie client id.",e)}}Oi(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function La(t){return ct(t,"owner")}function Cc(t){return ct(t,"clientMetadata")}function N_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Li=r,this.ki=i}static qi(e,n){let r=X(),i=X();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new O_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.Qi=!1}initialize(e,n){this.Ki=e,this.indexManager=n,this.Qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.$i(e,n).next(s=>s||this.Ui(e,n,i,r)).next(s=>s||this.Wi(e,n))}$i(e,n){if(o1(n))return S.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=eh(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=X(...s);return this.Ki.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Gi(n,a);return this.zi(n,l,o,u.readTime)?this.$i(e,eh(n,null,"F")):this.ji(e,l,n,u)}))})))}Ui(e,n,r,i){return o1(n)||i.isEqual(j.min())?this.Wi(e,n):this.Ki.getDocuments(e,r).next(s=>{const o=this.Gi(n,s);return this.zi(n,o,r,i)?this.Wi(e,n):(Og()<=re.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zg(n)),this.ji(e,o,n,GR(i,-1)))})}Gi(e,n){let r=new Ie(gP(e));return n.forEach((i,s)=>{Ul(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Wi(e,n){return Og()<=re.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",zg(n)),this.Ki.getDocumentsMatchingQuery(e,n,mn.min())}ji(e,n,r,i){return this.Ki.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new ge(J),this.Yi=new Li(s=>Is(s),Ml),this.Zi=new Map,this.Xi=e.getRemoteDocumentCache(),this.kr=e.getTargetCache(),this.Qr=e.getBundleCache(),this.es(r)}es(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eb(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function rb(t,e,n,r){return new yU(t,e,n,r)}async function ib(t,e){const n=F(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.es(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=X();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function _U(t,e){const n=F(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Xi.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const d=l.batch,h=d.keys();let f=S.resolve();return h.forEach(m=>{f=f.next(()=>c.getEntry(u,m)).next(g=>{const _=l.docVersions.get(m);z(_!==null),g.version.compareTo(_)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),c.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=X();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function sb(t){const e=F(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.kr.getLastRemoteSnapshotVersion(n))}function EU(t,e){const n=F(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.kr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.kr.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(et.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(g,_,p){return g.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(h,f,c)&&a.push(n.kr.updateTargetData(s,f))});let u=en(),l=X();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(ob(s,o,e.documentUpdates).next(c=>{u=c.ns,l=c.rs})),!r.isEqual(j.min())){const c=n.kr.getLastRemoteSnapshotVersion(s).next(d=>n.kr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return S.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.Ji=i,s))}function ob(t,e,n){let r=X(),i=X();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=en();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(j.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ns:o,rs:i}})}function wU(t,e){const n=F(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zo(t,e){const n=F(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.kr.getTargetData(r,e).next(s=>s?(i=s,S.resolve(i)):n.kr.allocateTargetId(r).next(o=>(i=new Er(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function qo(t,e,n){const r=F(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fi(o))throw o;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function ih(t,e,n){const r=F(t);let i=j.min(),s=X();return r.persistence.runTransaction("Execute query","readonly",o=>function(u,l,c){const d=F(u),h=d.Yi.get(c);return h!==void 0?S.resolve(d.Ji.get(h)):d.kr.getTargetData(l,c)}(r,o,sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:j.min(),n?s:X())).next(a=>(lb(r,mP(e),a),{documents:a,ss:s})))}function ab(t,e){const n=F(t),r=F(n.kr),i=n.Ji.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ut(s,e).next(o=>o?o.target:null))}function ub(t,e){const n=F(t),r=n.Zi.get(e)||j.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Xi.getAllFromCollectionGroup(i,e,GR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(lb(n,e,i),i))}function lb(t,e,n){let r=t.Zi.get(e)||j.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Zi.set(e,r)}async function IU(t,e,n,r){const i=F(t);let s=X(),o=en();for(const l of n){const c=e.os(l.metadata.name);l.document&&(s=s.add(c));const d=e._s(l);d.setReadTime(e.us(l.metadata.readTime)),o=o.insert(c,d)}const a=i.Xi.newChangeBuffer({trackRemovals:!0}),u=await zo(i,function(c){return sn(la(ie.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>ob(l,a,o).next(c=>(a.apply(l),c)).next(c=>i.kr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.kr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,c.ns,c.rs)).next(()=>c.ns)))}async function TU(t,e,n=X()){const r=await zo(t,sn(P_(e.bundledQuery))),i=F(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ue(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qr.saveNamedQuery(s,e);const a=r.withResumeToken(et.EMPTY_BYTE_STRING,o);return i.Ji=i.Ji.insert(a.targetId,a),i.kr.updateTargetData(s,a).next(()=>i.kr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.kr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Qr.saveNamedQuery(s,e))})}function O1(t,e){return`firestore_clients_${t}_${e}`}function V1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Zp(t,e){return`firestore_targets_${t}_${e}`}class sh{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static cs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new b(i.error.code,i.error.message))),o?new sh(e,n,i.state,s):(Me("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ls(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static cs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new b(r.error.code,r.error.message))),s?new vu(e,r.state,i):(Me("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ls(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static cs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=E_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=JR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new oh(e,s):(Me("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class V_{constructor(e,n){this.clientId=e,this.onlineState=n}static cs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new V_(n.clientId,n.onlineState):(Me("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yg{constructor(){this.activeTargetIds=E_()}hs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ps(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ls(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class em{constructor(e,n,r,i,s){this.window=e,this.ii=n,this.persistenceKey=r,this.Is=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new ge(J),this.started=!1,this.As=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Rs=O1(this.persistenceKey,this.Is),this.Vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new Yg),this.fs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.gs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.ps=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.ys=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.ws=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ni();for(const r of e){if(r===this.Is)continue;const i=this.getItem(O1(this.persistenceKey,r));if(i){const s=oh.cs(r,i);s&&(this.ds=this.ds.insert(s.clientId,s))}}this.Ss();const n=this.storage.getItem(this.ys);if(n){const r=this.bs(n);r&&this.Ds(r)}for(const r of this.As)this.Es(r);this.As=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.vs(this.ds)}isActiveQueryTarget(e){let n=!1;return this.ds.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Cs(e,"pending")}updateMutationState(e,n,r){this.Cs(e,n,r),this.Fs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Zp(this.persistenceKey,e));if(r){const i=vu.cs(e,r);i&&(n=i.state)}}return this.Ms.hs(e),this.Ss(),n}removeLocalQueryTarget(e){this.Ms.Ps(e),this.Ss()}isLocalQueryTarget(e){return this.Ms.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zp(this.persistenceKey,e))}updateQueryState(e,n,r){this.xs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Fs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Os(e)}notifyBundleLoaded(e){this.Ns(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return x("SharedClientState","READ",e,n),n}setItem(e,n){x("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){x("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Es(e){const n=e;if(n.storageArea===this.storage){if(x("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Rs)return void Me("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.fs.test(n.key)){if(n.newValue==null){const r=this.Bs(n.key);return this.Ls(r,null)}{const r=this.ks(n.key,n.newValue);if(r)return this.Ls(r.clientId,r)}}else if(this.gs.test(n.key)){if(n.newValue!==null){const r=this.qs(n.key,n.newValue);if(r)return this.Qs(r)}}else if(this.ps.test(n.key)){if(n.newValue!==null){const r=this.Ks(n.key,n.newValue);if(r)return this.$s(r)}}else if(n.key===this.ys){if(n.newValue!==null){const r=this.bs(n.newValue);if(r)return this.Ds(r)}}else if(n.key===this.Vs){const r=function(s){let o=Xt.ae;if(s!=null)try{const a=JSON.parse(s);z(typeof a=="number"),o=a}catch(a){Me("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Xt.ae&&this.sequenceNumberHandler(r)}else if(n.key===this.ws){const r=this.Us(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ws(i)))}}}else this.As.push(n)})}}get Ms(){return this.ds.get(this.Is)}Ss(){this.setItem(this.Rs,this.Ms.ls())}Cs(e,n,r){const i=new sh(this.currentUser,e,n,r),s=V1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ls())}Fs(e){const n=V1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Os(e){const n={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(n))}xs(e,n,r){const i=Zp(this.persistenceKey,e),s=new vu(e,n,r);this.setItem(i,s.ls())}Ns(e){const n=JSON.stringify(Array.from(e));this.setItem(this.ws,n)}Bs(e){const n=this.fs.exec(e);return n?n[1]:null}ks(e,n){const r=this.Bs(e);return oh.cs(r,n)}qs(e,n){const r=this.gs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return sh.cs(new st(s),i,n)}Ks(e,n){const r=this.ps.exec(e),i=Number(r[1]);return vu.cs(i,n)}bs(e){return V_.cs(e)}Us(e){return JSON.parse(e)}async Qs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Gs(e.batchId,e.state,e.error);x("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}$s(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}Ls(e,n){const r=n?this.ds.insert(e,n):this.ds.remove(e),i=this.vs(this.ds),s=this.vs(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.js(o,a).then(()=>{this.ds=r})}Ds(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}vs(e){let n=E_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class cb{constructor(){this.Hs=new Yg,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hs.hs(e),this.Js[e]||"not-current"}updateQueryState(e,n,r){this.Js[e]=n}removeLocalQueryTarget(e){this.Hs.Ps(e)}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){delete this.Js[e]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(e){return this.Hs.activeTargetIds.has(e)}start(){return this.Hs=new Yg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{Ys(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(e){this.ro.push(e)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ro)e(0)}no(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ro)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc=null;function tm(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,"0x"+Rc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e){this.so=e.so,this.oo=e.oo}_o(e){this.ao=e}uo(e){this.co=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.so(e)}ho(){this.ao()}Po(e){this.co(e)}Io(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class RU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.To=r+"://"+n.host,this.Eo=`projects/${i}/databases/${s}`,this.Ao=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Ro(){return!1}Vo(n,r,i,s,o){const a=tm(),u=this.mo(n,r);x("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(l,s,o),this.po(n,u,l,i).then(c=>(x("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Bn("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}yo(n,r,i,s,o,a){return this.Vo(n,r,i,s,o)}fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}mo(n,r){const i=AU[n];return`${this.To}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}po(e,n,r,i){const s=tm();return new Promise((o,a)=>{const u=new T3;u.setWithCredentials(!0),u.listenOnce(E3.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Yp.NO_ERROR:const c=u.getResponseJson();x(Pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Yp.TIMEOUT:x(Pt,`RPC '${e}' ${s} timed out`),a(new b(C.DEADLINE_EXCEEDED,"Request time out"));break;case Yp.HTTP_ERROR:const d=u.getStatus();if(x(Pt,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(_){const p=_.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(p)>=0?p:C.UNKNOWN}(f.status);a(new b(m,f.message))}else a(new b(C.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new b(C.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{x(Pt,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);x(Pt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}wo(e,n,r){const i=tm(),s=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=y3(),a=_3(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new I3({})),this.fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");x(Pt,`Creating RPC '${e}' stream ${i}: ${c}`,u);const d=o.createWebChannel(c,u);let h=!1,f=!1;const m=new CU({so:_=>{f?x(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(x(Pt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),x(Pt,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},oo:()=>d.close()}),g=(_,p,v)=>{_.listen(p,y=>{try{v(y)}catch(E){setTimeout(()=>{throw E},0)}})};return g(d,Ec.EventType.OPEN,()=>{f||x(Pt,`RPC '${e}' stream ${i} transport opened.`)}),g(d,Ec.EventType.CLOSE,()=>{f||(f=!0,x(Pt,`RPC '${e}' stream ${i} transport closed`),m.Po())}),g(d,Ec.EventType.ERROR,_=>{f||(f=!0,Bn(Pt,`RPC '${e}' stream ${i} transport errored:`,_),m.Po(new b(C.UNAVAILABLE,"The operation could not be completed")))}),g(d,Ec.EventType.MESSAGE,_=>{var p;if(!f){const v=_.data[0];z(!!v);const y=v,E=y.error||((p=y[0])===null||p===void 0?void 0:p.error);if(E){x(Pt,`RPC '${e}' stream ${i} received error:`,E);const T=E.status;let I=function(U){const M=qe[U];if(M!==void 0)return kP(M)}(T),A=E.message;I===void 0&&(I=C.INTERNAL,A="Unknown error status: "+T+" with message "+E.message),f=!0,m.Po(new b(I,A)),d.close()}else x(Pt,`RPC '${e}' stream ${i} received:`,v),m.Io(v)}}),g(a,w3.STAT_EVENT,_=>{_.stat===qw.PROXY?x(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===qw.NOPROXY&&x(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.ho()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return typeof window<"u"?window:null}function sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){return new V9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.So=r,this.bo=i,this.Do=s,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}reset(){this.vo=0}Mo(){this.vo=this.Do}xo(e){this.cancel();const n=Math.floor(this.vo+this.Oo()),r=Math.max(0,Date.now()-this.Fo),i=Math.max(0,n-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.vo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Co=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Fo=Date.now(),e())),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}No(){this.Co!==null&&(this.Co.skipDelay(),this.Co=null)}cancel(){this.Co!==null&&(this.Co.cancel(),this.Co=null)}Oo(){return(Math.random()-.5)*this.vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,i,s,o,a,u){this.ii=e,this.Bo=r,this.Lo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new F_(e,n)}$o(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Wo()}async stop(){this.$o()&&await this.close(0)}Go(){this.state=0,this.Ko.reset()}zo(){this.Uo()&&this.qo===null&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,()=>this.jo()))}Ho(e){this.Jo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}async close(e,n){this.Jo(),this.Yo(),this.Ko.cancel(),this.ko++,e!==4?this.Ko.reset():n&&n.code===C.RESOURCE_EXHAUSTED?(Me(n.toString()),Me("Using maximum backoff delay to prevent overloading the backend."),this.Ko.Mo()):n&&n.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Zo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.uo(n)}Zo(){}auth(){this.state=1;const e=this.Xo(this.ko),n=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.ko===n&&this.e_(r,i)},r=>{e(()=>{const i=new b(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.t_(i)})})}e_(e,n){const r=this.Xo(this.ko);this.stream=this.n_(e,n),this.stream._o(()=>{r(()=>(this.state=2,this.Qo=this.ii.enqueueAfterDelay(this.Lo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener._o()))}),this.stream.uo(i=>{r(()=>this.t_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Wo(){this.state=5,this.Ko.xo(async()=>{this.state=0,this.start()})}t_(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.ko===e?n():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PU extends hb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}n_(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.Ko.reset();const n=M9(this.serializer,e),r=function(s){if(!("targetChange"in s))return j.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?j.min():o.readTime?Ue(o.readTime):j.min()}(e);return this.listener.r_(n,r)}i_(e){const n={};n.database=al(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Xd(u)?{documents:$P(s,u)}:{query:UP(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OP(s,o.resumeToken);const l=qg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(j.min())>0){a.readTime=jo(s,o.snapshotVersion.toTimestamp());const l=qg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=U9(this.serializer,e);r&&(n.labels=r),this.Ho(n)}s_(e){const n={};n.database=al(this.serializer),n.removeTarget=e,this.Ho(n)}}class bU extends hb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.o_=!1}get __(){return this.o_}start(){this.o_=!1,this.lastStreamToken=void 0,super.start()}Zo(){this.o_&&this.a_([])}n_(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();const n=$9(e.writeResults,e.commitTime),r=Ue(e.commitTime);return this.listener.u_(r,n)}return z(!e.writeResults||e.writeResults.length===0),this.o_=!0,this.listener.c_()}l_(){const e={};e.database=al(this.serializer),this.Ho(e)}a_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ul(this.serializer,r))};this.Ho(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.h_=!1}P_(){if(this.h_)throw new b(C.FAILED_PRECONDITION,"The client has already been terminated.")}Vo(e,n,r){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Vo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new b(C.UNKNOWN,i.toString())})}yo(e,n,r,i){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.yo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(C.UNKNOWN,s.toString())})}terminate(){this.h_=!0}}class xU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}A_(){this.T_===0&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.E_=null,this.V_("Backend didn't respond within 10 seconds."),this.R_("Offline"),Promise.resolve())))}m_(e){this.state==="Online"?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.R_("Offline")))}set(e){this.f_(),this.T_=0,e==="Online"&&(this.d_=!1),this.R_(e)}R_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}V_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.d_?(Me(n),this.d_=!1):x("OnlineStateTracker",n)}f_(){this.E_!==null&&(this.E_.cancel(),this.E_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=s,this.S_.Ys(o=>{r.enqueueAndForget(async()=>{Mi(this)&&(x("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=F(u);l.y_.add(4),await ha(l),l.b_.set("Unknown"),l.y_.delete(4),await Hl(l)}(this))})}),this.b_=new xU(r,i)}}async function Hl(t){if(Mi(t))for(const e of t.w_)await e(!0)}async function ha(t){for(const e of t.w_)await e(!1)}function Af(t,e){const n=F(t);n.p_.has(e.targetId)||(n.p_.set(e.targetId,e),$_(n)?M_(n):pa(n).Uo()&&L_(n,e))}function ll(t,e){const n=F(t),r=pa(n);n.p_.delete(e),r.Uo()&&fb(n,e),n.p_.size===0&&(r.Uo()?r.zo():Mi(n)&&n.b_.set("Unknown"))}function L_(t,e){if(t.D_.Be(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(j.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).i_(e)}function fb(t,e){t.D_.Be(e),pa(t).s_(e)}function M_(t){t.D_=new x9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.p_.get(e)||null,rt:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.b_.A_()}function $_(t){return Mi(t)&&!pa(t).$o()&&t.p_.size>0}function Mi(t){return F(t).y_.size===0}function pb(t){t.D_=void 0}async function NU(t){t.p_.forEach((e,n)=>{L_(t,e)})}async function OU(t,e){pb(t),$_(t)?(t.b_.m_(e),M_(t)):t.b_.set("Unknown")}async function VU(t,e,n){if(t.b_.set("Online"),e instanceof NP&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.p_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.p_.delete(a),i.D_.removeTarget(a))}(t,e)}catch(r){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ah(t,r)}else if(e instanceof id?t.D_.We(e):e instanceof DP?t.D_.Ze(e):t.D_.je(e),!n.isEqual(j.min()))try{const r=await sb(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.D_.st(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.p_.get(l);c&&s.p_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.p_.get(u);if(!c)return;s.p_.set(u,c.withResumeToken(et.EMPTY_BYTE_STRING,c.snapshotVersion)),fb(s,u);const d=new Er(c.target,u,l,c.sequenceNumber);L_(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){x("RemoteStore","Failed to raise snapshot:",r),await ah(t,r)}}async function ah(t,e,n){if(!Fi(e))throw e;t.y_.add(1),await ha(t),t.b_.set("Offline"),n||(n=()=>sb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{x("RemoteStore","Retrying IndexedDB access"),await n(),t.y_.delete(1),await Hl(t)})}function mb(t,e){return e().catch(n=>ah(t,n,e))}async function fa(t){const e=F(t),n=Ai(e);let r=e.g_.length>0?e.g_[e.g_.length-1].batchId:-1;for(;FU(e);)try{const i=await wU(e.localStore,r);if(i===null){e.g_.length===0&&n.zo();break}r=i.batchId,LU(e,i)}catch(i){await ah(e,i)}gb(e)&&vb(e)}function FU(t){return Mi(t)&&t.g_.length<10}function LU(t,e){t.g_.push(e);const n=Ai(t);n.Uo()&&n.__&&n.a_(e.mutations)}function gb(t){return Mi(t)&&!Ai(t).$o()&&t.g_.length>0}function vb(t){Ai(t).start()}async function MU(t){Ai(t).l_()}async function $U(t){const e=Ai(t);for(const n of t.g_)e.a_(n.mutations)}async function UU(t,e,n){const r=t.g_.shift(),i=T_.from(r,e,n);await mb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fa(t)}async function BU(t,e){e&&Ai(t).__&&await async function(r,i){if(function(o){return bP(o)&&o!==C.ABORTED}(i.code)){const s=r.g_.shift();Ai(r).Go(),await mb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await fa(r)}}(t,e),gb(t)&&vb(t)}async function L1(t,e){const n=F(t);n.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");const r=Mi(n);n.y_.add(3),await ha(n),r&&n.b_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.y_.delete(3),await Hl(n)}async function Jg(t,e){const n=F(t);e?(n.y_.delete(2),await Hl(n)):e||(n.y_.add(2),await ha(n),n.b_.set("Unknown"))}function pa(t){return t.v_||(t.v_=function(n,r,i){const s=F(n);return s.P_(),new PU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{_o:NU.bind(null,t),uo:OU.bind(null,t),r_:VU.bind(null,t)}),t.w_.push(async e=>{e?(t.v_.Go(),$_(t)?M_(t):t.b_.set("Unknown")):(await t.v_.stop(),pb(t))})),t.v_}function Ai(t){return t.C_||(t.C_=function(n,r,i){const s=F(n);return s.P_(),new bU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{_o:MU.bind(null,t),uo:BU.bind(null,t),c_:$U.bind(null,t),u_:UU.bind(null,t)}),t.w_.push(async e=>{e?(t.C_.Go(),await fa(t)):(await t.C_.stop(),t.g_.length>0&&(x("RemoteStore",`Stopping write stream with ${t.g_.length} pending writes`),t.g_=[]))})),t.C_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new at,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new U_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new b(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ma(t,e){if(Me("AsyncQueue",`${e}: ${t}`),Fi(t))return new b(C.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.comparator=e?(n,r)=>e(n,r)||O.comparator(n.key,r.key):(n,r)=>O.comparator(n.key,r.key),this.keyedMap=Ya(),this.sortedSet=new ge(this.comparator)}static emptySet(e){return new So(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new So;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.F_=new ge(O.comparator)}track(e){const n=e.doc.key,r=this.F_.get(n);r?e.type!==0&&r.type===3?this.F_=this.F_.insert(n,e):e.type===3&&r.type!==1?this.F_=this.F_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.F_=this.F_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.F_=this.F_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.F_=this.F_.remove(n):e.type===1&&r.type===2?this.F_=this.F_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.F_=this.F_.insert(n,{type:2,doc:e.doc}):$():this.F_=this.F_.insert(n,e)}M_(){const e=[];return this.F_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ho{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ho(e,n,So.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this.x_=void 0,this.listeners=[]}}class zU{constructor(){this.queries=new Li(e=>pP(e),$l),this.onlineState="Unknown",this.O_=new Set}}async function B_(t,e){const n=F(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new jU),i)try{s.x_=await n.onListen(r)}catch(o){const a=ma(o,`Initialization of query '${zg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.N_(n.onlineState),s.x_&&e.B_(s.x_)&&z_(n)}async function j_(t,e){const n=F(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function qU(t,e){const n=F(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.B_(i)&&(r=!0);o.x_=i}}r&&z_(n)}function HU(t,e,n){const r=F(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function z_(t){t.O_.forEach(e=>{e.next()})}class q_{constructor(e,n,r){this.query=e,this.L_=n,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=r||{}}B_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.k_?this.Q_(e)&&(this.L_.next(e),n=!0):this.K_(e,this.onlineState)&&(this.U_(e),n=!0),this.q_=e,n}onError(e){this.L_.error(e)}N_(e){this.onlineState=e;let n=!1;return this.q_&&!this.k_&&this.K_(this.q_,e)&&(this.U_(this.q_),n=!0),n}K_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.W_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Q_(e){if(e.docChanges.length>0)return!0;const n=this.q_&&this.q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}U_(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.k_=!0,this.L_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,n){this.G_=e,this.byteLength=n}z_(){return"metadata"in this.G_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.serializer=e}os(e){return ar(this.serializer,e)}_s(e){return e.metadata.exists?MP(this.serializer,e.document,!1):Ee.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}us(e){return Ue(e)}}class GU{constructor(e,n,r){this.j_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yb(e)}H_(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.G_.namedQuery)this.queries.push(e.G_.namedQuery);else if(e.G_.documentMetadata){this.documents.push({metadata:e.G_.documentMetadata}),e.G_.documentMetadata.exists||++n;const r=ie.fromString(e.G_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.G_.document&&(this.documents[this.documents.length-1].document=e.G_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}J_(e){const n=new Map,r=new $1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.os(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||X()).add(s);n.set(o,a)}}return n}async complete(){const e=await IU(this.localStore,new $1(this.serializer),this.documents,this.j_.id),n=this.J_(this.documents);for(const r of this.queries)await TU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Y_:this.collectionGroups,Z_:e}}}function yb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.key=e}}class Eb{constructor(e){this.key=e}}class wb{constructor(e,n){this.query=e,this.X_=n,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=X(),this.mutatedKeys=X(),this.na=gP(e),this.ra=new So(this.na)}get ia(){return this.X_}sa(e,n){const r=n?n.oa:new M1,i=n?n.ra:this.ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=Ul(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?m!==g&&(r.track({type:3,doc:f}),_=!0):this._a(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this.na(f,u)>0||l&&this.na(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||l)&&(a=!0)),_&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ra:o,oa:r,zi:a,mutatedKeys:s}}_a(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ra;this.ra=e.ra,this.mutatedKeys=e.mutatedKeys;const s=e.oa.M_();s.sort((l,c)=>function(h,f){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return m(h)-m(f)}(l.type,c.type)||this.na(l.doc,c.doc)),this.aa(r);const o=n?this.ua():[],a=this.ta.size===0&&this.current?1:0,u=a!==this.ea;return this.ea=a,s.length!==0||u?{snapshot:new Ho(this.query,e.ra,i,s,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ca:o}:{ca:o}}N_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ra:this.ra,oa:new M1,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}la(e){return!this.X_.has(e)&&!!this.ra.has(e)&&!this.ra.get(e).hasLocalMutations}aa(e){e&&(e.addedDocuments.forEach(n=>this.X_=this.X_.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.X_=this.X_.delete(n)),this.current=e.current)}ua(){if(!this.current)return[];const e=this.ta;this.ta=X(),this.ra.forEach(r=>{this.la(r.key)&&(this.ta=this.ta.add(r.key))});const n=[];return e.forEach(r=>{this.ta.has(r)||n.push(new Eb(r))}),this.ta.forEach(r=>{e.has(r)||n.push(new _b(r))}),n}ha(e){this.X_=e.ss,this.ta=X();const n=this.sa(e.documents);return this.applyChanges(n,!0)}Pa(){return Ho.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,this.ea===0,this.hasCachedResults)}}class KU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QU{constructor(e){this.key=e,this.Ia=!1}}class YU{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ta={},this.Ea=new Li(a=>pP(a),$l),this.da=new Map,this.Aa=new Set,this.Ra=new ge(O.comparator),this.Va=new Map,this.ma=new x_,this.fa={},this.ga=new Map,this.pa=Rs.On(),this.onlineState="Unknown",this.ya=void 0}get isPrimaryClient(){return this.ya===!0}}async function JU(t,e){const n=Q_(t);let r,i;const s=n.Ea.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Pa();else{const o=await zo(n.localStore,sn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await H_(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Af(n.remoteStore,o)}return i}async function H_(t,e,n,r,i){t.wa=(d,h,f)=>async function(g,_,p,v){let y=_.view.sa(p);y.zi&&(y=await ih(g.localStore,_.query,!1).then(({documents:I})=>_.view.sa(I,y)));const E=v&&v.targetChanges.get(_.targetId),T=_.view.applyChanges(y,g.isPrimaryClient,E);return Xg(g,_.targetId,T.ca),T.snapshot}(t,d,h,f);const s=await ih(t.localStore,e,!0),o=new wb(e,s.ss),a=o.sa(s.documents),u=zl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);Xg(t,n,l.ca);const c=new KU(e,n,o);return t.Ea.set(e,c),t.da.has(n)?t.da.get(n).push(e):t.da.set(n,[e]),l.snapshot}async function XU(t,e){const n=F(t),r=n.Ea.get(e),i=n.da.get(r.targetId);if(i.length>1)return n.da.set(r.targetId,i.filter(s=>!$l(s,e))),void n.Ea.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qo(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ll(n.remoteStore,r.targetId),Wo(n,r.targetId)}).catch(Vi)):(Wo(n,r.targetId),await qo(n.localStore,r.targetId,!0))}async function ZU(t,e,n){const r=Y_(t);try{const i=await function(o,a){const u=F(o),l=Ae.now(),c=a.reduce((f,m)=>f.add(m.key),X());let d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=en(),g=X();return u.Xi.getEntries(f,c).next(_=>{m=_,m.forEach((p,v)=>{v.isValidDocument()||(g=g.add(p))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,m)).next(_=>{d=_;const p=[];for(const v of a){const y=P9(v,d.get(v.key).overlayedDocument);y!=null&&p.push(new Lr(v.key,y,sP(y.value.mapValue),Se.exists(!0)))}return u.mutationQueue.addMutationBatch(f,l,p,a)}).next(_=>{h=_;const p=_.applyToLocalDocumentSet(d,g);return u.documentOverlayCache.saveOverlays(f,_.batchId,p)})}).then(()=>({batchId:h.batchId,changes:yP(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.fa[o.currentUser.toKey()];l||(l=new ge(J)),l=l.insert(a,u),o.fa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Mr(r,i.changes),await fa(r.remoteStore)}catch(i){const s=ma(i,"Failed to persist write");n.reject(s)}}async function Ib(t,e){const n=F(t);try{const r=await EU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Va.get(s);o&&(z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ia=!0:i.modifiedDocuments.size>0?z(o.Ia):i.removedDocuments.size>0&&(z(o.Ia),o.Ia=!1))}),await Mr(n,r,e)}catch(r){await Vi(r)}}function U1(t,e,n){const r=F(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Ea.forEach((s,o)=>{const a=o.view.N_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=F(o);u.onlineState=a;let l=!1;u.queries.forEach((c,d)=>{for(const h of d.listeners)h.N_(a)&&(l=!0)}),l&&z_(u)}(r.eventManager,e),i.length&&r.Ta.r_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eB(t,e,n){const r=F(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Va.get(e),s=i&&i.key;if(s){let o=new ge(O.comparator);o=o.insert(s,Ee.newNoDocument(s,j.min()));const a=X().add(s),u=new jl(j.min(),new Map,new ge(J),o,a);await Ib(r,u),r.Ra=r.Ra.remove(s),r.Va.delete(e),K_(r)}else await qo(r.localStore,e,!1).then(()=>Wo(r,e,n)).catch(Vi)}async function tB(t,e){const n=F(t),r=e.batch.batchId;try{const i=await _U(n.localStore,e);G_(n,r,null),W_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mr(n,i)}catch(i){await Vi(i)}}async function nB(t,e,n){const r=F(t);try{const i=await function(o,a){const u=F(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(d=>(z(d!==null),c=d.keys(),u.mutationQueue.removeMutationBatch(l,d))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,e);G_(r,e,n),W_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mr(r,i)}catch(i){await Vi(i)}}async function rB(t,e){const n=F(t);Mi(n.remoteStore)||x("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=F(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ga.get(r)||[];i.push(e),n.ga.set(r,i)}catch(r){const i=ma(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function W_(t,e){(t.ga.get(e)||[]).forEach(n=>{n.resolve()}),t.ga.delete(e)}function G_(t,e,n){const r=F(t);let i=r.fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fa[r.currentUser.toKey()]=i}}function Wo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.da.get(e))t.Ea.delete(r),n&&t.Ta.Sa(r,n);t.da.delete(e),t.isPrimaryClient&&t.ma.Ar(e).forEach(r=>{t.ma.containsKey(r)||Tb(t,r)})}function Tb(t,e){t.Aa.delete(e.path.canonicalString());const n=t.Ra.get(e);n!==null&&(ll(t.remoteStore,n),t.Ra=t.Ra.remove(e),t.Va.delete(n),K_(t))}function Xg(t,e,n){for(const r of n)r instanceof _b?(t.ma.addReference(r.key,e),iB(t,r)):r instanceof Eb?(x("SyncEngine","Document no longer in limbo: "+r.key),t.ma.removeReference(r.key,e),t.ma.containsKey(r.key)||Tb(t,r.key)):$()}function iB(t,e){const n=e.key,r=n.path.canonicalString();t.Ra.get(n)||t.Aa.has(r)||(x("SyncEngine","New document in limbo: "+n),t.Aa.add(r),K_(t))}function K_(t){for(;t.Aa.size>0&&t.Ra.size<t.maxConcurrentLimboResolutions;){const e=t.Aa.values().next().value;t.Aa.delete(e);const n=new O(ie.fromString(e)),r=t.pa.next();t.Va.set(r,new QU(n)),t.Ra=t.Ra.insert(n,r),Af(t.remoteStore,new Er(sn(la(n.path)),r,"TargetPurposeLimboResolution",Xt.ae))}}async function Mr(t,e,n){const r=F(t),i=[],s=[],o=[];r.Ea.isEmpty()||(r.Ea.forEach((a,u)=>{o.push(r.wa(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=O_.qi(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Ta.r_(i),await async function(u,l){const c=F(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>S.forEach(l,h=>S.forEach(h.Li,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>S.forEach(h.ki,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Fi(d))throw d;x("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=c.Ji.get(h),m=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(m);c.Ji=c.Ji.insert(h,g)}}}(r.localStore,s))}async function sB(t,e){const n=F(t);if(!n.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());const r=await ib(n.localStore,e);n.currentUser=e,function(s,o){s.ga.forEach(a=>{a.forEach(u=>{u.reject(new b(C.CANCELLED,o))})}),s.ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mr(n,r.ts)}}function oB(t,e){const n=F(t),r=n.Va.get(e);if(r&&r.Ia)return X().add(r.key);{let i=X();const s=n.da.get(e);if(!s)return i;for(const o of s){const a=n.Ea.get(o);i=i.unionWith(a.view.ia)}return i}}async function aB(t,e){const n=F(t),r=await ih(n.localStore,e.query,!0),i=e.view.ha(r);return n.isPrimaryClient&&Xg(n,e.targetId,i.ca),i}async function uB(t,e){const n=F(t);return ub(n.localStore,e).then(r=>Mr(n,r))}async function lB(t,e,n,r){const i=F(t),s=await function(a,u){const l=F(a),c=F(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.Dn(d,u).next(h=>h?l.localDocuments.getDocuments(d,h):S.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await fa(i.remoteStore):n==="acknowledged"||n==="rejected"?(G_(i,e,r||null),W_(i,e),function(a,u){F(F(a).mutationQueue).Cn(u)}(i.localStore,e)):$(),await Mr(i,s)):x("SyncEngine","Cannot apply mutation batch with id: "+e)}async function cB(t,e){const n=F(t);if(Q_(n),Y_(n),e===!0&&n.ya!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await B1(n,r.toArray());n.ya=!0,await Jg(n.remoteStore,!0);for(const s of i)Af(n.remoteStore,s)}else if(e===!1&&n.ya!==!1){const r=[];let i=Promise.resolve();n.da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Wo(n,o),qo(n.localStore,o,!0))),ll(n.remoteStore,o)}),await i,await B1(n,r),function(o){const a=F(o);a.Va.forEach((u,l)=>{ll(a.remoteStore,l)}),a.ma.Rr(),a.Va=new Map,a.Ra=new ge(O.comparator)}(n),n.ya=!1,await Jg(n.remoteStore,!1)}}async function B1(t,e,n){const r=F(t),i=[],s=[];for(const o of e){let a;const u=r.da.get(o);if(u&&u.length!==0){a=await zo(r.localStore,sn(u[0]));for(const l of u){const c=r.Ea.get(l),d=await aB(r,c);d.snapshot&&s.push(d.snapshot)}}else{const l=await ab(r.localStore,o);a=await zo(r.localStore,l),await H_(r,Sb(l),o,!1,a.resumeToken)}i.push(a)}return r.Ta.r_(s),i}function Sb(t){return fP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dB(t){return function(n){return F(F(n).persistence).Ni()}(F(t).localStore)}async function hB(t,e,n,r){const i=F(t);if(i.ya)return void x("SyncEngine","Ignoring unexpected query state notification.");const s=i.da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await ub(i.localStore,mP(s[0])),a=jl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",et.EMPTY_BYTE_STRING);await Mr(i,o,a);break}case"rejected":await qo(i.localStore,e,!0),Wo(i,e,r);break;default:$()}}async function fB(t,e,n){const r=Q_(t);if(r.ya){for(const i of e){if(r.da.has(i)){x("SyncEngine","Adding an already active target "+i);continue}const s=await ab(r.localStore,i),o=await zo(r.localStore,s);await H_(r,Sb(s),o.targetId,!1,o.resumeToken),Af(r.remoteStore,o)}for(const i of n)r.da.has(i)&&await qo(r.localStore,i,!1).then(()=>{ll(r.remoteStore,i),Wo(r,i)}).catch(Vi)}}function Q_(t){const e=F(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ib.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eB.bind(null,e),e.Ta.r_=qU.bind(null,e.eventManager),e.Ta.Sa=HU.bind(null,e.eventManager),e}function Y_(t){const e=F(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nB.bind(null,e),e}function pB(t,e,n){const r=F(t);(async function(s,o,a){try{const u=await o.getMetadata();if(await function(f,m){const g=F(f),_=Ue(m.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",p=>g.Qr.getBundleMetadata(p,m.id)).then(p=>!!p&&p.createTime.compareTo(_)>=0)}(s.localStore,u))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(yb(u));const l=new GU(u,s.localStore,o.serializer);let c=await o.ba();for(;c;){const h=await l.H_(c);h&&a._updateProgress(h),c=await o.ba()}const d=await l.complete();return await Mr(s,d.Z_,void 0),await function(f,m){const g=F(f);return g.persistence.runTransaction("Save bundle","readwrite",_=>g.Qr.saveBundleMetadata(_,m))}(s.localStore,u),a._completeWith(d.progress),Promise.resolve(d.Y_)}catch(u){return Bn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Zg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ql(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return rb(this.persistence,new nb,e.initialUser,this.serializer)}createPersistence(e){return new tb(Sf.zr,this.serializer)}createSharedClientState(e){return new cb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ab extends Zg{constructor(e,n,r){super(),this.Da=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Da.initialize(this,e),await Y_(this.Da.syncEngine),await fa(this.Da.remoteStore),await this.persistence.Vi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return rb(this.persistence,new nb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new rU(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new U3(n,this.persistence);return new $3(e.asyncQueue,r)}createPersistence(e){const n=N_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new D_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,db(),sd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new cb}}class mB extends Ab{constructor(e,n){super(e,n,!1),this.Da=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Da.syncEngine;this.sharedClientState instanceof em&&(this.sharedClientState.syncEngine={Gs:lB.bind(null,n),zs:hB.bind(null,n),js:fB.bind(null,n),Ni:dB.bind(null,n),Ws:uB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Vi(async r=>{await cB(this.Da.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=db();if(!em.v(n))throw new b(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=N_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new em(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class J_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>U1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sB.bind(null,this.syncEngine),await Jg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zU}()}createDatastore(e){const n=ql(e.databaseInfo.databaseId),r=function(s){return new RU(s)}(e.databaseInfo);return function(s,o,a,u){return new kU(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new DU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>U1(this.syncEngine,n,0),function(){return F1.v()?new F1:new SU}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,c){const d=new YU(i,s,o,a,u,l);return c&&(d.ya=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=F(n);x("RemoteStore","RemoteStore shutting down."),r.y_.add(5),await ha(r),r.S_.shutdown(),r.b_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.va(this.observer.next,e)}error(e){this.observer.error?this.va(this.observer.error,e):Me("Uncaught Error in snapshot listener:",e.toString())}Ca(){this.muted=!0}va(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,n){this.Fa=e,this.serializer=n,this.metadata=new at,this.buffer=new Uint8Array,this.Ma=function(){return new TextDecoder("utf-8")}(),this.xa().then(r=>{r&&r.z_()?this.metadata.resolve(r.G_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.G_)}`))},r=>this.metadata.reject(r))}close(){return this.Fa.cancel()}async getMetadata(){return this.metadata.promise}async ba(){return await this.getMetadata(),this.xa()}async xa(){const e=await this.Oa();if(e===null)return null;const n=this.Ma.decode(e),r=Number(n);isNaN(r)&&this.Na(`length string (${n}) is not valid number`);const i=await this.Ba(r);return new WU(JSON.parse(i),e.length+r)}La(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Oa(){for(;this.La()<0&&!await this.ka(););if(this.buffer.length===0)return null;const e=this.La();e<0&&this.Na("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ba(e){for(;this.buffer.length<e;)await this.ka()&&this.Na("Reached the end of bundle when more is expected.");const n=this.Ma.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Na(e){throw this.Fa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ka(){const e=await this.Fa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new b(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=F(i),a=al(o.serializer)+"/documents",u={documents:s.map(h=>ol(o.serializer,h))},l=await o.yo("BatchGetDocuments",a,u,s.length),c=new Map;l.forEach(h=>{const f=L9(o.serializer,h);c.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=c.get(h.toString());z(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new da(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=O.fromPath(r);this.mutations.push(new w_(i,this.precondition(i)))}),await async function(r,i){const s=F(r),o=al(s.serializer)+"/documents",a={writes:i.map(u=>ul(s.serializer,u))};await s.Vo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw $();n=j.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new b(C.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(j.min())?Se.exists(!1):Se.updateTime(n):Se.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(j.min()))throw new b(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Se.updateTime(n)}return Se.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.qa=r.maxAttempts,this.Ko=new F_(this.asyncQueue,"transaction_retry")}run(){this.qa-=1,this.Qa()}Qa(){this.Ko.xo(async()=>{const e=new vB(this.datastore),n=this.Ka(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.$a(i)}))}).catch(r=>{this.$a(r)})})}Ka(e){try{const n=this.updateFunction(e);return!Ll(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}$a(e){this.qa>0&&this.Ua(e)?(this.qa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Qa(),Promise.resolve()))):this.deferred.reject(e)}Ua(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!bP(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=qR.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{x("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(x("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new at;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ma(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function od(t,e){t.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ib(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ev(t,e){t.asyncQueue.verifyOperationInProgress();const n=await X_(t);x("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>L1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>L1(e.remoteStore,s)),t._onlineComponents=e}function Cb(t){return t.name==="FirebaseError"?t.code===C.FAILED_PRECONDITION||t.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function X_(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{await od(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Cb(n))throw n;Bn("Error using user provided cache. Falling back to memory cache: "+n),await od(t,new Zg)}}else x("FirestoreClient","Using default OfflineComponentProvider"),await od(t,new Zg);return t._offlineComponents}async function Rf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),await ev(t,t._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),await ev(t,new J_))),t._onlineComponents}function Rb(t){return X_(t).then(e=>e.persistence)}function Z_(t){return X_(t).then(e=>e.localStore)}function Pb(t){return Rf(t).then(e=>e.remoteStore)}function e0(t){return Rf(t).then(e=>e.syncEngine)}function EB(t){return Rf(t).then(e=>e.datastore)}async function Go(t){const e=await Rf(t),n=e.eventManager;return n.onListen=JU.bind(null,e.syncEngine),n.onUnlisten=XU.bind(null,e.syncEngine),n}function wB(t){return t.asyncQueue.enqueue(async()=>{const e=await Rb(t),n=await Pb(t);return e.setNetworkEnabled(!0),function(i){const s=F(i);return s.y_.delete(0),Hl(s)}(n)})}function IB(t){return t.asyncQueue.enqueue(async()=>{const e=await Rb(t),n=await Pb(t);return e.setNetworkEnabled(!1),async function(i){const s=F(i);s.y_.add(0),await ha(s),s.b_.set("Offline")}(n)})}function TB(t,e){const n=new at;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(l,c){const d=F(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new b(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const u=ma(a,`Failed to get document '${s} from cache`);o.reject(u)}}(await Z_(t),e,n)),n.promise}function bb(t,e,n={}){const r=new at;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Cf({next:h=>{o.enqueueAndForget(()=>j_(s,d));const f=h.docs.has(a);!f&&h.fromCache?l.reject(new b(C.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?l.reject(new b(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new q_(la(a.path),c,{includeMetadataChanges:!0,W_:!0});return B_(s,d)}(await Go(t),t.asyncQueue,e,n,r)),r.promise}function SB(t,e){const n=new at;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await ih(i,s,!0),u=new wb(s,a.ss),l=u.sa(a.documents),c=u.applyChanges(l,!1);o.resolve(c.snapshot)}catch(a){const u=ma(a,`Failed to execute query '${s} against cache`);o.reject(u)}}(await Z_(t),e,n)),n.promise}function kb(t,e,n={}){const r=new at;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Cf({next:h=>{o.enqueueAndForget(()=>j_(s,d)),h.fromCache&&u.source==="server"?l.reject(new b(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new q_(a,c,{includeMetadataChanges:!0,W_:!0});return B_(s,d)}(await Go(t),t.asyncQueue,e,n,r)),r.promise}function AB(t,e){const n=new Cf(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){F(i).O_.add(s),s.next()}(await Go(t),n)),()=>{n.Ca(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){F(i).O_.delete(s)}(await Go(t),n))}}function CB(t,e,n,r){const i=function(o,a){let u;return u=typeof o=="string"?xP().encode(o):o,function(c,d){return new gB(c,d)}(function(c,d){if(c instanceof Uint8Array)return j1(c,d);if(c instanceof ArrayBuffer)return j1(new Uint8Array(c),d);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,ql(e));t.asyncQueue.enqueueAndForget(async()=>{pB(await e0(t),i,r)})}function RB(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=F(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Qr.getNamedQuery(o,i))}(await Z_(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t,e,n){if(!n)throw new b(C.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Db(t,e,n,r){if(e===!0&&r===!0)throw new b(C.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function q1(t){if(!O.isDocumentKey(t))throw new b(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function H1(t){if(O.isDocumentKey(t))throw new b(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$()}function ae(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pf(t);throw new b(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Nb(t,e){if(e<=0)throw new b(C.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new b(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new b(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Db("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new b(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new b(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new b(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new b(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new R3;switch(r.type){case"firstParty":return new x3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new b(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=z1.get(n);r&&(x("ComponentProvider","Removing Datastore"),z1.delete(n),r.terminate())}(this),Promise.resolve()}}function PB(t,e,n,r={}){var i;const s=(t=ae(t,Wl))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Bn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=st.MOCK_USER;else{a=QO(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new b(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new st(l)}t._authCredentials=new P3(new zR(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qt=class Ob{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ob(this.firestore,e,this._query)}},Pe=class Vb{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vb(this.firestore,e,this._key)}},hi=class Fb extends qt{constructor(e,n,r){super(e,n,la(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new O(e))}withConverter(e){return new Fb(this.firestore,e,this._path)}};function Lb(t,e,...n){if(t=H(t),t0("collection","path",e),t instanceof Wl){const r=ie.fromString(e,...n);return H1(r),new hi(t,null,r)}{if(!(t instanceof Pe||t instanceof hi))throw new b(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ie.fromString(e,...n));return H1(r),new hi(t.firestore,null,r)}}function bB(t,e){if(t=ae(t,Wl),t0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new b(C.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qt(t,null,function(r){return new Fr(ie.emptyPath(),r)}(e))}function uh(t,e,...n){if(t=H(t),arguments.length===1&&(e=qR.V()),t0("doc","path",e),t instanceof Wl){const r=ie.fromString(e,...n);return q1(r),new Pe(t,null,new O(r))}{if(!(t instanceof Pe||t instanceof hi))throw new b(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ie.fromString(e,...n));return q1(r),new Pe(t.firestore,t instanceof hi?t.converter:null,new O(r))}}function Mb(t,e){return t=H(t),e=H(e),(t instanceof Pe||t instanceof hi)&&(e instanceof Pe||e instanceof hi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function $b(t,e){return t=H(t),e=H(e),t instanceof qt&&e instanceof qt&&t.firestore===e.firestore&&$l(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new F_(this,"async_queue_retry"),this.Xa=()=>{const n=sd();n&&x("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ko.No()};const e=sd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xa)}get isShuttingDown(){return this.za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.eu(),this.tu(e)}enterRestrictedMode(e){if(!this.za){this.za=!0,this.Ya=e||!1;const n=sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xa)}}enqueue(e){if(this.eu(),this.za)return new Promise(()=>{});const n=new at;return this.tu(()=>this.za&&this.Ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ga.push(e),this.nu()))}async nu(){if(this.Ga.length!==0){try{await this.Ga[0](),this.Ga.shift(),this.Ko.reset()}catch(e){if(!Fi(e))throw e;x("AsyncQueue","Operation failed with retryable error: "+e)}this.Ga.length>0&&this.Ko.xo(()=>this.nu())}}tu(e){const n=this.Wa.then(()=>(this.Ja=!0,e().catch(r=>{this.Ha=r,this.Ja=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Me("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ja=!1,r))));return this.Wa=n,n}enqueueAfterDelay(e,n,r){this.eu(),this.Za.indexOf(e)>-1&&(n=0);const i=U_.createAndSchedule(this,e,n,r,s=>this.ru(s));return this.ja.push(i),i}eu(){this.Ha&&$()}verifyOperationInProgress(){}async iu(){let e;do e=this.Wa,await e;while(e!==this.Wa)}su(e){for(const n of this.ja)if(n.timerId===e)return!0;return!1}ou(e){return this.iu().then(()=>{this.ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.iu()})}_u(e){this.Za.push(e)}ru(e){const n=this.ja.indexOf(e);this.ja.splice(n,1)}}function tv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class xB{constructor(){this._progressObserver={},this._taskCompletionResolver=new at,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=-1;let Ve=class extends Wl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new kB}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ub(this),this._firestoreClient.terminate()}};function dt(t){return t._firestoreClient||Ub(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ub(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,l,c){return new a9(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,xb(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new _B(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function NB(t,e){jb(t=ae(t,Ve));const n=dt(t);if(n._uninitializedComponentsProvider)throw new b(C.FAILED_PRECONDITION,"SDK cache is already specified.");Bn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new J_;return Bb(n,i,new Ab(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function OB(t){jb(t=ae(t,Ve));const e=dt(t);if(e._uninitializedComponentsProvider)throw new b(C.FAILED_PRECONDITION,"SDK cache is already specified.");Bn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new J_;return Bb(e,r,new mB(r,n.cacheSizeBytes))}function Bb(t,e,n){const r=new at;return t.asyncQueue.enqueue(async()=>{try{await od(t,n),await ev(t,e),r.resolve()}catch(i){const s=i;if(!Cb(s))throw s;Bn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function VB(t){if(t._initialized&&!t._terminated)throw new b(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new at;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!On.v())return Promise.resolve();const i=r+"main";await On.delete(i)}(N_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function FB(t){return function(n){const r=new at;return n.asyncQueue.enqueueAndForget(async()=>rB(await e0(n),r)),r.promise}(dt(t=ae(t,Ve)))}function LB(t){return wB(dt(t=ae(t,Ve)))}function MB(t){return IB(dt(t=ae(t,Ve)))}function $B(t,e){const n=dt(t=ae(t,Ve)),r=new xB;return CB(n,t._databaseId,e,r),r}function UB(t,e){return RB(dt(t=ae(t,Ve)),e).then(n=>n?new qt(t,null,n.query):null)}function jb(t){if(t._initialized||t._terminated)throw new b(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hr(et.fromBase64String(e))}catch(n){throw new b(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hr(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ci=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new b(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=/^__.*__$/;class jB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ca(e,this.data,n,this.fieldTransforms)}}class zb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}class kf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.au(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get uu(){return this.settings.uu}cu(e){return new kf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}lu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.cu({path:r,hu:!1});return i.Pu(e),i}Iu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.cu({path:r,hu:!1});return i.au(),i}Tu(e){return this.cu({path:void 0,hu:!0})}Eu(e){return lh(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}au(){if(this.path)for(let e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}Pu(e){if(e.length===0)throw this.Eu("Document fields must not be empty");if(qb(this.uu)&&BB.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}class zB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ql(e)}Ru(e,n,r,i=!1){return new kf({uu:e,methodName:n,Au:r,path:$e.emptyPath(),hu:!1,du:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ms(t){const e=t._freezeSettings(),n=ql(t._databaseId);return new zB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xf(t,e,n,r,i,s={}){const o=t.Ru(s.merge||s.mergeFields?2:0,e,n,i);s0("Data must be an object, but it was:",o,r);const a=Gb(r,o);let u,l;if(s.merge)u=new Zt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=nv(e,d,n);if(!o.contains(h))throw new b(C.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Qb(c,h)||c.push(h)}u=new Zt(c),l=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=o.fieldTransforms;return new jB(new vt(a),u,l)}class Gl extends Ls{_toFieldTransform(e){if(e.uu!==2)throw e.uu===1?e.Eu(`${this._methodName}() can only appear at the top level of your update data`):e.Eu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gl}}function Hb(t,e,n){return new kf({uu:3,Au:e.settings.Au,methodName:t._methodName,hu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class n0 extends Ls{_toFieldTransform(e){return new Bl(e.path,new Uo)}isEqual(e){return e instanceof n0}}class qB extends Ls{constructor(e,n){super(e),this.Vu=n}_toFieldTransform(e){const n=Hb(this,e,!0),r=this.Vu.map(s=>$s(s,n)),i=new Ts(r);return new Bl(e.path,i)}isEqual(e){return this===e}}class HB extends Ls{constructor(e,n){super(e),this.Vu=n}_toFieldTransform(e){const n=Hb(this,e,!0),r=this.Vu.map(s=>$s(s,n)),i=new Ss(r);return new Bl(e.path,i)}isEqual(e){return this===e}}class WB extends Ls{constructor(e,n){super(e),this.mu=n}_toFieldTransform(e){const n=new Bo(e.serializer,IP(e.serializer,this.mu));return new Bl(e.path,n)}isEqual(e){return this===e}}function r0(t,e,n,r){const i=t.Ru(1,e,n);s0("Data must be an object, but it was:",i,r);const s=[],o=vt.empty();Fs(r,(u,l)=>{const c=o0(e,u,n);l=H(l);const d=i.Iu(c);if(l instanceof Gl)s.push(c);else{const h=$s(l,d);h!=null&&(s.push(c),o.set(c,h))}});const a=new Zt(s);return new zb(o,a,i.fieldTransforms)}function i0(t,e,n,r,i,s){const o=t.Ru(1,e,n),a=[nv(e,r,n)],u=[i];if(s.length%2!=0)throw new b(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(nv(e,s[h])),u.push(s[h+1]);const l=[],c=vt.empty();for(let h=a.length-1;h>=0;--h)if(!Qb(l,a[h])){const f=a[h];let m=u[h];m=H(m);const g=o.Iu(f);if(m instanceof Gl)l.push(f);else{const _=$s(m,g);_!=null&&(l.push(f),c.set(f,_))}}const d=new Zt(l);return new zb(c,d,o.fieldTransforms)}function Wb(t,e,n,r=!1){return $s(n,t.Ru(r?4:3,e))}function $s(t,e){if(Kb(t=H(t)))return s0("Unsupported field value:",e,t),Gb(t,e);if(t instanceof Ls)return function(r,i){if(!qb(i.uu))throw i.Eu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Eu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.hu&&e.uu!==4)throw e.Eu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=$s(a,i.Tu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=H(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:jo(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jo(i.serializer,s)}}if(r instanceof bf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hr)return{bytesValue:OP(i.serializer,r._byteString)};if(r instanceof Pe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Eu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:R_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Eu(`Unsupported field value: ${Pf(r)}`)}(t,e)}function Gb(t,e){const n={};return nP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,(r,i)=>{const s=$s(i,e.lu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Kb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof bf||t instanceof hr||t instanceof Pe||t instanceof Ls)}function s0(t,e,n){if(!Kb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Pf(n);throw r==="an object"?e.Eu(t+" a custom object"):e.Eu(t+" "+r)}}function nv(t,e,n){if((e=H(e))instanceof Ci)return e._internalPath;if(typeof e=="string")return o0(t,e);throw lh("Field path arguments must be of type string or ",t,!1,void 0,n)}const GB=new RegExp("[~\\*/\\[\\]]");function o0(t,e,n){if(e.search(GB)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ci(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new b(C.INVALID_ARGUMENT,a+t+u)}function Qb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Df("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KB extends cl{data(){return super.data()}}function Df(t,e){return typeof e=="string"?o0(t,e):e instanceof Ci?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new b(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a0{}class Kl extends a0{}function Hr(t,e,...n){let r=[];e instanceof a0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof u0).length,a=s.filter(u=>u instanceof Nf).length;if(o>1||o>0&&a>0)throw new b(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Nf extends Kl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nf(e,n,r)}_apply(e){const n=this._parse(e);return Xb(e._query,n),new qt(e.firestore,e.converter,jg(e._query,n))}_parse(e){const n=Ms(e.firestore);return function(s,o,a,u,l,c,d){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new b(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){K1(d,c);const f=[];for(const m of d)f.push(G1(u,s,m));h={arrayValue:{values:f}}}else h=G1(u,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||K1(d,c),h=Wb(a,o,d,c==="in"||c==="not-in");return Z.create(l,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function QB(t,e,n){const r=e,i=Df("where",t);return Nf._create(i,r,n)}class u0 extends a0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new u0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:de.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)Xb(o,u),o=jg(o,u)}(e._query,n),new qt(e.firestore,e.converter,jg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l0 extends Kl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new l0(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new b(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new b(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new To(s,o);return function(l,c){if(y_(l)===null){const d=_f(l);d!==null&&Zb(l,d,c.field)}}(i,a),a}(e._query,this._field,this._direction);return new qt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Fr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function YB(t,e="asc"){const n=e,r=Df("orderBy",t);return l0._create(r,n)}class Of extends Kl{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Of(e,n,r)}_apply(e){return new qt(e.firestore,e.converter,eh(e._query,this._limit,this._limitType))}}function JB(t){return Nb("limit",t),Of._create("limit",t,"F")}function XB(t){return Nb("limitToLast",t),Of._create("limitToLast",t,"L")}class Vf extends Kl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vf(e,n,r)}_apply(e){const n=Jb(e,this.type,this._docOrFields,this._inclusive);return new qt(e.firestore,e.converter,function(i,s){return new Fr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function ZB(...t){return Vf._create("startAt",t,!0)}function e5(...t){return Vf._create("startAfter",t,!1)}class Ff extends Kl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ff(e,n,r)}_apply(e){const n=Jb(e,this.type,this._docOrFields,this._inclusive);return new qt(e.firestore,e.converter,function(i,s){return new Fr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function t5(...t){return Ff._create("endBefore",t,!1)}function n5(...t){return Ff._create("endAt",t,!0)}function Jb(t,e,n,r){if(n[0]=H(n[0]),n[0]instanceof cl)return function(s,o,a,u,l){if(!u)throw new b(C.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const d of cs(s))if(d.field.isKeyField())c.push(ws(o,u.key));else{const h=u.data.field(d.field);if(yf(h))throw new b(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=d.field.canonicalString();throw new b(C.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}c.push(h)}return new Si(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ms(t.firestore);return function(o,a,u,l,c,d){const h=o.explicitOrderBy;if(c.length>h.length)throw new b(C.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let m=0;m<c.length;m++){const g=c[m];if(h[m].field.isKeyField()){if(typeof g!="string")throw new b(C.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof g}`);if(!__(o)&&g.indexOf("/")!==-1)throw new b(C.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${g}' contains a slash.`);const _=o.path.child(ie.fromString(g));if(!O.isDocumentKey(_))throw new b(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const p=new O(_);f.push(ws(a,p))}else{const _=Wb(u,l,g);f.push(_)}}return new Si(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function G1(t,e,n){if(typeof(n=H(n))=="string"){if(n==="")throw new b(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__(e)&&n.indexOf("/")!==-1)throw new b(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ie.fromString(n));if(!O.isDocumentKey(r))throw new b(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ws(t,new O(r))}if(n instanceof Pe)return ws(t,n._key);throw new b(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pf(n)}.`)}function K1(t,e){if(!Array.isArray(t)||t.length===0)throw new b(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xb(t,e){if(e.isInequality()){const r=_f(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new b(C.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=y_(t);s!==null&&Zb(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new b(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new b(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Zb(t,e,n){if(!n.isEqual(e))throw new b(C.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class c0{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw $()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new bf(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=g_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=Ei(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ie.fromString(e);z(qP(r));const i=new Ii(r.get(1),r.get(3)),s=new O(r.popFirst(5));return i.isEqual(n)||Me(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class r5 extends c0{constructor(e){super(),this.firestore=e}convertBytes(e){return new hr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Dr=class extends cl{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Df("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},yu=class extends Dr{data(e={}){return super.data(e)}},Ri=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ts(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yu(this._firestore,this._userDataWriter,r.key,r,new ts(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new yu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ts(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new yu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ts(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:i5(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function i5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}function ek(t,e){return t instanceof Dr&&e instanceof Dr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ri&&e instanceof Ri&&t._firestore===e._firestore&&$b(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(t){t=ae(t,Pe);const e=ae(t.firestore,Ve);return bb(dt(e),t._key).then(n=>d0(e,t,n))}class Us extends c0{constructor(e){super(),this.firestore=e}convertBytes(e){return new hr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}function o5(t){t=ae(t,Pe);const e=ae(t.firestore,Ve),n=dt(e),r=new Us(e);return TB(n,t._key).then(i=>new Dr(e,r,t._key,i,new ts(i!==null&&i.hasLocalMutations,!0),t.converter))}function a5(t){t=ae(t,Pe);const e=ae(t.firestore,Ve);return bb(dt(e),t._key,{source:"server"}).then(n=>d0(e,t,n))}function u5(t){t=ae(t,qt);const e=ae(t.firestore,Ve),n=dt(e),r=new Us(e);return Yb(t._query),kb(n,t._query).then(i=>new Ri(e,r,t,i))}function l5(t){t=ae(t,qt);const e=ae(t.firestore,Ve),n=dt(e),r=new Us(e);return SB(n,t._query).then(i=>new Ri(e,r,t,i))}function c5(t){t=ae(t,qt);const e=ae(t.firestore,Ve),n=dt(e),r=new Us(e);return kb(n,t._query,{source:"server"}).then(i=>new Ri(e,r,t,i))}function Q1(t,e,n){t=ae(t,Pe);const r=ae(t.firestore,Ve),i=Lf(t.converter,e,n);return Ql(r,[xf(Ms(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Se.none())])}function Y1(t,e,n,...r){t=ae(t,Pe);const i=ae(t.firestore,Ve),s=Ms(i);let o;return o=typeof(e=H(e))=="string"||e instanceof Ci?i0(s,"updateDoc",t._key,e,n,r):r0(s,"updateDoc",t._key,e),Ql(i,[o.toMutation(t._key,Se.exists(!0))])}function d5(t){return Ql(ae(t.firestore,Ve),[new da(t._key,Se.none())])}function h5(t,e){const n=ae(t.firestore,Ve),r=uh(t),i=Lf(t.converter,e);return Ql(n,[xf(Ms(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Se.exists(!1))]).then(()=>r)}function tk(t,...e){var n,r,i;t=H(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||tv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(tv(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,l,c;if(t instanceof Pe)l=ae(t.firestore,Ve),c=la(t._key.path),u={next:d=>{e[o]&&e[o](d0(l,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ae(t,qt);l=ae(d.firestore,Ve),c=d._query;const h=new Us(l);u={next:f=>{e[o]&&e[o](new Ri(l,h,d,f))},error:e[o+1],complete:e[o+2]},Yb(t._query)}return function(h,f,m,g){const _=new Cf(g),p=new q_(f,_,m);return h.asyncQueue.enqueueAndForget(async()=>B_(await Go(h),p)),()=>{_.Ca(),h.asyncQueue.enqueueAndForget(async()=>j_(await Go(h),p))}}(dt(l),c,a,u)}function f5(t,e){return AB(dt(t=ae(t,Ve)),tv(e)?e:{next:e})}function Ql(t,e){return function(r,i){const s=new at;return r.asyncQueue.enqueueAndForget(async()=>ZU(await e0(r),i,s)),s.promise}(dt(t),e)}function d0(t,e,n){const r=n.docs.get(e._key),i=new Us(t);return new Dr(t,i,e._key,r,new ts(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m5=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ms(e)}set(e,n,r){this._verifyNotCommitted();const i=Jr(e,this._firestore),s=Lf(i.converter,n,r),o=xf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Se.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Jr(e,this._firestore);let o;return o=typeof(n=H(n))=="string"||n instanceof Ci?i0(this._dataReader,"WriteBatch.update",s._key,n,r,i):r0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Se.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jr(e,this._firestore);return this._mutations=this._mutations.concat(new da(n._key,Se.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new b(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Jr(t,e){if((t=H(t)).firestore!==e)throw new b(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g5=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ms(n)}get(n){const r=Jr(n,this._firestore),i=new r5(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return $();const o=s[0];if(o.isFoundDocument())return new cl(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new cl(this._firestore,i,r._key,null,r.converter);throw $()})}set(n,r,i){const s=Jr(n,this._firestore),o=Lf(s.converter,r,i),a=xf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Jr(n,this._firestore);let a;return a=typeof(r=H(r))=="string"||r instanceof Ci?i0(this._dataReader,"Transaction.update",o._key,r,i,s):r0(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Jr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Jr(e,this._firestore),r=new Us(this._firestore);return super.get(e).then(i=>new Dr(this._firestore,r,n._key,i._document,new ts(!1,!1),n.converter))}};function v5(t,e,n){t=ae(t,Ve);const r=Object.assign(Object.assign({},p5),n);return function(s){if(s.maxAttempts<1)throw new b(C.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new at;return s.asyncQueue.enqueueAndForget(async()=>{const l=await EB(s);new yB(s.asyncQueue,l,a,o,u).run()}),u.promise}(dt(t),i=>e(new g5(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(){return new Gl("deleteField")}function _5(){return new n0("serverTimestamp")}function E5(...t){return new qB("arrayUnion",t)}function w5(...t){return new HB("arrayRemove",t)}function I5(t){return new WB("increment",t)}(function(e,n=!0){(function(i){ua=i})(xi),vi(new lr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ve(new b3(r.getProvider("auth-internal")),new N3(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new b(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ii(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),or(Hw,"4.1.0",e),or(Hw,"4.1.0","esm2017")})();const T5="@firebase/firestore-compat",S5="0.3.14";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new b("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(){if(typeof Uint8Array>"u")throw new b("unimplemented","Uint8Arrays are not available in this environment.")}function X1(){if(!s9())throw new b("unimplemented","Blobs are unavailable in Firestore in this environment.")}let nk=class rv{constructor(e){this._delegate=e}static fromBase64String(e){return X1(),new rv(hr.fromBase64String(e))}static fromUint8Array(e){return J1(),new rv(hr.fromUint8Array(e))}toBase64(){return X1(),this._delegate.toBase64()}toUint8Array(){return J1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){return A5(t,["next","error","complete"])}function A5(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{enableIndexedDbPersistence(e,n){return NB(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return OB(e._delegate)}clearIndexedDbPersistence(e){return VB(e._delegate)}}class rk{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ii||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Bn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){PB(this._delegate,e,n,r)}enableNetwork(){return LB(this._delegate)}disableNetwork(){return MB(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Db("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return FB(this._delegate)}onSnapshotsInSync(e){return f5(this._delegate,e)}get app(){if(!this._appCompat)throw new b("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ko(this,Lb(this._delegate,e))}catch(n){throw $t(n,"collection()","Firestore.collection()")}}doc(e){try{return new Sn(this,uh(this._delegate,e))}catch(n){throw $t(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mt(this,bB(this._delegate,e))}catch(n){throw $t(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return v5(this._delegate,n=>e(new ik(this,n)))}batch(){return dt(this._delegate),new sk(new m5(this._delegate,e=>Ql(this._delegate,e)))}loadBundle(e){return $B(this._delegate,e)}namedQuery(e){return UB(this._delegate,e).then(n=>n?new Mt(this,n):null)}}class Mf extends c0{constructor(e){super(),this.firestore=e}convertBytes(e){return new nk(new hr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Sn.forKey(n,this.firestore,null)}}function R5(t){A3(t)}class ik{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Mf(e)}get(e){const n=ns(e);return this._delegate.get(n).then(r=>new dl(this._firestore,new Dr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=ns(e);return r?(h0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ns(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ns(e);return this._delegate.delete(n),this}}class sk{constructor(e){this._delegate=e}set(e,n,r){const i=ns(e);return r?(h0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ns(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ns(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ps{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new yu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hl(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ps.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Ps(e,new Mf(e),n),i.set(n,s)),s}}Ps.INSTANCES=new WeakMap;class Sn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Mf(e)}static forPath(e,n,r){if(e.length%2!==0)throw new b("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sn(n,new Pe(n._delegate,r,new O(e)))}static forKey(e,n,r){return new Sn(n,new Pe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ko(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ko(this.firestore,Lb(this._delegate,e))}catch(n){throw $t(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=H(e),e instanceof Pe?Mb(this._delegate,e):!1}set(e,n){n=h0("DocumentReference.set",n);try{return n?Q1(this._delegate,e,n):Q1(this._delegate,e)}catch(r){throw $t(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Y1(this._delegate,e):Y1(this._delegate,e,n,...r)}catch(i){throw $t(i,"updateDoc()","DocumentReference.update()")}}delete(){return d5(this._delegate)}onSnapshot(...e){const n=ok(e),r=ak(e,i=>new dl(this.firestore,new Dr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return tk(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=o5(this._delegate):(e==null?void 0:e.source)==="server"?n=a5(this._delegate):n=s5(this._delegate),n.then(r=>new dl(this.firestore,new Dr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sn(this.firestore,e?this._delegate.withConverter(Ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $t(t,e,n){return t.message=t.message.replace(e,n),t}function ok(t){for(const e of t)if(typeof e=="object"&&!iv(e))return e;return{}}function ak(t,e){var n,r;let i;return iv(t[0])?i=t[0]:iv(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class dl{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Sn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ek(this._delegate,e._delegate)}}class hl extends dl{data(e){const n=this._delegate.data(e);return C3(n!==void 0),n}}class Mt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Mf(e)}where(e,n,r){try{return new Mt(this.firestore,Hr(this._delegate,QB(e,n,r)))}catch(i){throw $t(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Mt(this.firestore,Hr(this._delegate,YB(e,n)))}catch(r){throw $t(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mt(this.firestore,Hr(this._delegate,JB(e)))}catch(n){throw $t(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Mt(this.firestore,Hr(this._delegate,XB(e)))}catch(n){throw $t(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Mt(this.firestore,Hr(this._delegate,ZB(...e)))}catch(n){throw $t(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Mt(this.firestore,Hr(this._delegate,e5(...e)))}catch(n){throw $t(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Mt(this.firestore,Hr(this._delegate,t5(...e)))}catch(n){throw $t(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Mt(this.firestore,Hr(this._delegate,n5(...e)))}catch(n){throw $t(n,"endAt()","Query.endAt()")}}isEqual(e){return $b(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=l5(this._delegate):(e==null?void 0:e.source)==="server"?n=c5(this._delegate):n=u5(this._delegate),n.then(r=>new sv(this.firestore,new Ri(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=ok(e),r=ak(e,i=>new sv(this.firestore,new Ri(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return tk(this._delegate,n,r)}withConverter(e){return new Mt(this.firestore,e?this._delegate.withConverter(Ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class P5{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new hl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sv{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Mt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new hl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new P5(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new hl(this._firestore,r))})}isEqual(e){return ek(this._delegate,e._delegate)}}class Ko extends Mt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sn(this.firestore,e):null}doc(e){try{return e===void 0?new Sn(this.firestore,uh(this._delegate)):new Sn(this.firestore,uh(this._delegate,e))}catch(n){throw $t(n,"doc()","CollectionReference.doc()")}}add(e){return h5(this._delegate,e).then(n=>new Sn(this.firestore,n))}isEqual(e){return Mb(this._delegate,e._delegate)}withConverter(e){return new Ko(this.firestore,e?this._delegate.withConverter(Ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ns(t){return ae(t,Pe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(...e){this._delegate=new Ci(...e)}static documentId(){return new f0($e.keyField().canonicalString())}isEqual(e){return e=H(e),e instanceof Ci?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._delegate=e}static serverTimestamp(){const e=_5();return e._methodName="FieldValue.serverTimestamp",new Ki(e)}static delete(){const e=y5();return e._methodName="FieldValue.delete",new Ki(e)}static arrayUnion(...e){const n=E5(...e);return n._methodName="FieldValue.arrayUnion",new Ki(n)}static arrayRemove(...e){const n=w5(...e);return n._methodName="FieldValue.arrayRemove",new Ki(n)}static increment(e){const n=I5(e);return n._methodName="FieldValue.increment",new Ki(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5={Firestore:rk,GeoPoint:bf,Timestamp:Ae,Blob:nk,Transaction:ik,WriteBatch:sk,DocumentReference:Sn,DocumentSnapshot:dl,Query:Mt,QueryDocumentSnapshot:hl,QuerySnapshot:sv,CollectionReference:Ko,FieldPath:f0,FieldValue:Ki,setLogLevel:R5,CACHE_SIZE_UNLIMITED:DB};function k5(t,e){t.INTERNAL.registerComponent(new lr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},b5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){k5(t,(e,n)=>new rk(e,n,new C5)),t.registerVersion(T5,S5)}x5(yt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ov=function(t,e){return ov=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ov(t,e)};function D5(t,e){ov(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var av=function(){return av=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},av.apply(this,arguments)};function N5(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n}var O5=100,V5=100,Z1=50,uv=50,lv=50;function eI(t){var e=t.className,n=t.counterClockwise,r=t.dashRatio,i=t.pathRadius,s=t.strokeWidth,o=t.style;return w.createElement("path",{className:e,style:Object.assign({},o,L5({pathRadius:i,dashRatio:r,counterClockwise:n})),d:F5({pathRadius:i,counterClockwise:n}),strokeWidth:s,fillOpacity:0})}function F5(t){var e=t.pathRadius,n=t.counterClockwise,r=e,i=n?1:0;return`
      M `+uv+","+lv+`
      m 0,-`+r+`
      a `+r+","+r+" "+i+" 1 1 0,"+2*r+`
      a `+r+","+r+" "+i+" 1 1 0,-"+2*r+`
    `}function L5(t){var e=t.counterClockwise,n=t.dashRatio,r=t.pathRadius,i=Math.PI*2*r,s=(1-n)*i;return{strokeDasharray:i+"px "+i+"px",strokeDashoffset:(e?-s:s)+"px"}}var M5=function(t){D5(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return Z1-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,r=n.value,i=n.minValue,s=n.maxValue,o=Math.min(Math.max(r,i),s);return(o-i)/(s-i)},e.prototype.render=function(){var n=this.props,r=n.circleRatio,i=n.className,s=n.classes,o=n.counterClockwise,a=n.styles,u=n.strokeWidth,l=n.text,c=this.getPathRadius(),d=this.getPathRatio();return w.createElement("svg",{className:s.root+" "+i,style:a.root,viewBox:"0 0 "+O5+" "+V5,"data-test-id":"CircularProgressbar"},this.props.background?w.createElement("circle",{className:s.background,style:a.background,cx:uv,cy:lv,r:Z1}):null,w.createElement(eI,{className:s.trail,counterClockwise:o,dashRatio:r,pathRadius:c,strokeWidth:u,style:a.trail}),w.createElement(eI,{className:s.path,counterClockwise:o,dashRatio:d*r,pathRadius:c,strokeWidth:u,style:a.path}),l?w.createElement("text",{className:s.text,style:a.text,x:uv,y:lv},l):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(w.Component);function uk(t){t.children;var e=N5(t,["children"]);return w.createElement("div",{"data-test-id":"CircularProgressbarWithChildren"},w.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},w.createElement(M5,av({},e)),t.children?w.createElement("div",{"data-test-id":"CircularProgressbarWithChildren__children",style:{position:"absolute",width:"100%",height:"100%",marginTop:"-100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},t.children):null))}function $5({filters:t,onFilterSelect:e,onCreateFilter:n,loadingCredits:r,remaining:i,total:s}){return R.jsxs("div",{className:"w-full max-w-screen-sm",children:[r?R.jsx("div",{children:"Loading..."}):R.jsx("div",{className:"usage-summary",children:R.jsxs("div",{className:"usage-tile",children:[R.jsxs("div",{className:"filer-title-bar",children:[R.jsx("div",{className:"div",children:"Usage"}),R.jsx("div",{className:"spacer-2"}),R.jsx("div",{className:"buy-button",children:R.jsx("div",{className:"text-wrapper-2",children:"Buy More"})})]}),R.jsxs("div",{className:"max-h-52",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[R.jsx(uk,{value:(i/s+0)*100,className:"max-h-52",styles:{path:{stroke:"rgba(60, 91, 243, 1)"}}}),R.jsxs("div",{className:"description",style:{position:"absolute"},children:[R.jsx("h1",{className:"h-1",children:i}),R.jsxs("div",{className:"emails-remaining",children:["emails",R.jsx("br",{}),"remaining"]})]})]})]})}),R.jsxs("div",{className:"usage-summary-2",children:[R.jsx("div",{className:"text-wrapper-3",children:"GPT Filters"}),R.jsx("ul",{className:"filters-list",children:t.map((o,a)=>R.jsx("button",{className:"filter",onClick:()=>e(o),children:R.jsxs("div",{className:"filer-title-bar",children:[R.jsx("div",{className:"text-wrapper-3",children:o.name}),R.jsx("div",{className:"spacer-2"}),R.jsx("svg",{className:"img",viewBox:"0 0 10 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{d:"M9.6404 8.74258L2.09714 15.1921C1.6173 15.6026 0.839333 15.6026 0.359731 15.1921C-0.11991 14.782 -0.11991 14.1168 0.359731 13.7068L7.0341 7.99983L0.359731 2.29322C-0.11991 1.88294 -0.11991 1.21783 0.359731 0.807713C0.839372 0.397429 1.6173 0.397429 2.09714 0.807713L9.6404 7.25727C9.88023 7.46243 10 7.73103 10 7.99976C10 8.26862 9.87999 8.53742 9.64021 8.74248",fill:"white"})})]})},a))}),R.jsx("button",{className:"sign-in-with-google",onClick:()=>n(),children:R.jsx("div",{className:"text-wrapper-4",children:"Create Filter"})})]})]})}function bs(t){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bs(t)}function U5(t,e){if(bs(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bs(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lk(t){var e=U5(t,"string");return bs(e)==="symbol"?e:String(e)}function Za(t,e,n){return e=lk(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(n),!0).forEach(function(r){Za(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B5(t){if(Array.isArray(t))return t}function j5(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}function cv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ck(t,e){if(t){if(typeof t=="string")return cv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cv(t,e)}}function z5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(t,e){return B5(t)||j5(t,e)||ck(t,e)||z5()}function dk(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $r(t,e){if(t==null)return{};var n=dk(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var q5=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function H5(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,s=t.defaultValue,o=s===void 0?null:s,a=t.inputValue,u=t.menuIsOpen,l=t.onChange,c=t.onInputChange,d=t.onMenuClose,h=t.onMenuOpen,f=t.value,m=$r(t,q5),g=w.useState(a!==void 0?a:n),_=Ar(g,2),p=_[0],v=_[1],y=w.useState(u!==void 0?u:i),E=Ar(y,2),T=E[0],I=E[1],A=w.useState(f!==void 0?f:o),k=Ar(A,2),U=k[0],M=k[1],ve=w.useCallback(function(V,K){typeof l=="function"&&l(V,K),M(V)},[l]),je=w.useCallback(function(V,K){var Q;typeof c=="function"&&(Q=c(V,K)),v(Q!==void 0?Q:V)},[c]),St=w.useCallback(function(){typeof h=="function"&&h(),I(!0)},[h]),Fe=w.useCallback(function(){typeof d=="function"&&d(),I(!1)},[d]),ze=a!==void 0?a:p,Ot=u!==void 0?u:T,Gt=f!==void 0?f:U;return q(q({},m),{},{inputValue:ze,menuIsOpen:Ot,onChange:ve,onInputChange:je,onMenuClose:Fe,onMenuOpen:St,value:Gt})}function W(){return W=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W.apply(this,arguments)}function W5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lk(r.key),r)}}function G5(t,e,n){return e&&nI(t.prototype,e),n&&nI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dv(t,e){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dv(t,e)}function K5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dv(t,e)}function ch(t){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ch(t)}function Q5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Y5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J5(t,e){if(e&&(bs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y5(t)}function X5(t){var e=Q5();return function(){var r=ch(t),i;if(e){var s=ch(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return J5(this,i)}}function Z5(t){if(Array.isArray(t))return cv(t)}function e6(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hk(t){return Z5(t)||e6(t)||ck(t)||t6()}function n6(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function r6(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var i6=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(r6(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=n6(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),bt="-ms-",dh="-moz-",ue="-webkit-",fk="comm",p0="rule",m0="decl",s6="@import",pk="@keyframes",o6="@layer",a6=Math.abs,$f=String.fromCharCode,u6=Object.assign;function l6(t,e){return mt(t,0)^45?(((e<<2^mt(t,0))<<2^mt(t,1))<<2^mt(t,2))<<2^mt(t,3):0}function mk(t){return t.trim()}function c6(t,e){return(t=e.exec(t))?t[0]:t}function le(t,e,n){return t.replace(e,n)}function hv(t,e){return t.indexOf(e)}function mt(t,e){return t.charCodeAt(e)|0}function fl(t,e,n){return t.slice(e,n)}function qn(t){return t.length}function g0(t){return t.length}function Pc(t,e){return e.push(t),t}function d6(t,e){return t.map(e).join("")}var Uf=1,Qo=1,gk=0,on=0,We=0,ga="";function Bf(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Uf,column:Qo,length:o,return:""}}function Ma(t,e){return u6(Bf("",null,null,"",null,null,0),t,{length:-t.length},e)}function h6(){return We}function f6(){return We=on>0?mt(ga,--on):0,Qo--,We===10&&(Qo=1,Uf--),We}function hn(){return We=on<gk?mt(ga,on++):0,Qo++,We===10&&(Qo=1,Uf++),We}function ur(){return mt(ga,on)}function ad(){return on}function Yl(t,e){return fl(ga,t,e)}function pl(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vk(t){return Uf=Qo=1,gk=qn(ga=t),on=0,[]}function yk(t){return ga="",t}function ud(t){return mk(Yl(on-1,fv(t===91?t+2:t===40?t+1:t)))}function p6(t){for(;(We=ur())&&We<33;)hn();return pl(t)>2||pl(We)>3?"":" "}function m6(t,e){for(;--e&&hn()&&!(We<48||We>102||We>57&&We<65||We>70&&We<97););return Yl(t,ad()+(e<6&&ur()==32&&hn()==32))}function fv(t){for(;hn();)switch(We){case t:return on;case 34:case 39:t!==34&&t!==39&&fv(We);break;case 40:t===41&&fv(t);break;case 92:hn();break}return on}function g6(t,e){for(;hn()&&t+We!==47+10;)if(t+We===42+42&&ur()===47)break;return"/*"+Yl(e,on-1)+"*"+$f(t===47?t:hn())}function v6(t){for(;!pl(ur());)hn();return Yl(t,on)}function y6(t){return yk(ld("",null,null,null,[""],t=vk(t),0,[0],t))}function ld(t,e,n,r,i,s,o,a,u){for(var l=0,c=0,d=o,h=0,f=0,m=0,g=1,_=1,p=1,v=0,y="",E=i,T=s,I=r,A=y;_;)switch(m=v,v=hn()){case 40:if(m!=108&&mt(A,d-1)==58){hv(A+=le(ud(v),"&","&\f"),"&\f")!=-1&&(p=-1);break}case 34:case 39:case 91:A+=ud(v);break;case 9:case 10:case 13:case 32:A+=p6(m);break;case 92:A+=m6(ad()-1,7);continue;case 47:switch(ur()){case 42:case 47:Pc(_6(g6(hn(),ad()),e,n),u);break;default:A+="/"}break;case 123*g:a[l++]=qn(A)*p;case 125*g:case 59:case 0:switch(v){case 0:case 125:_=0;case 59+c:p==-1&&(A=le(A,/\f/g,"")),f>0&&qn(A)-d&&Pc(f>32?iI(A+";",r,n,d-1):iI(le(A," ","")+";",r,n,d-2),u);break;case 59:A+=";";default:if(Pc(I=rI(A,e,n,l,c,i,a,y,E=[],T=[],d),s),v===123)if(c===0)ld(A,e,I,I,E,s,d,a,T);else switch(h===99&&mt(A,3)===110?100:h){case 100:case 108:case 109:case 115:ld(t,I,I,r&&Pc(rI(t,I,I,0,0,i,a,y,i,E=[],d),T),i,T,d,a,r?E:T);break;default:ld(A,I,I,I,[""],T,0,a,T)}}l=c=f=0,g=p=1,y=A="",d=o;break;case 58:d=1+qn(A),f=m;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&f6()==125)continue}switch(A+=$f(v),v*g){case 38:p=c>0?1:(A+="\f",-1);break;case 44:a[l++]=(qn(A)-1)*p,p=1;break;case 64:ur()===45&&(A+=ud(hn())),h=ur(),c=d=qn(y=A+=v6(ad())),v++;break;case 45:m===45&&qn(A)==2&&(g=0)}}return s}function rI(t,e,n,r,i,s,o,a,u,l,c){for(var d=i-1,h=i===0?s:[""],f=g0(h),m=0,g=0,_=0;m<r;++m)for(var p=0,v=fl(t,d+1,d=a6(g=o[m])),y=t;p<f;++p)(y=mk(g>0?h[p]+" "+v:le(v,/&\f/g,h[p])))&&(u[_++]=y);return Bf(t,e,n,i===0?p0:a,u,l,c)}function _6(t,e,n){return Bf(t,e,n,fk,$f(h6()),fl(t,2,-2),0)}function iI(t,e,n,r){return Bf(t,e,n,m0,fl(t,0,r),fl(t,r+1,-1),r)}function Ao(t,e){for(var n="",r=g0(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function E6(t,e,n,r){switch(t.type){case o6:if(t.children.length)break;case s6:case m0:return t.return=t.return||t.value;case fk:return"";case pk:return t.return=t.value+"{"+Ao(t.children,r)+"}";case p0:t.value=t.props.join(",")}return qn(n=Ao(t.children,r))?t.return=t.value+"{"+n+"}":""}function w6(t){var e=g0(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function I6(t){return function(e){e.root||(e=e.return)&&t(e)}}function T6(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var S6=function(e,n,r){for(var i=0,s=0;i=s,s=ur(),i===38&&s===12&&(n[r]=1),!pl(s);)hn();return Yl(e,on)},A6=function(e,n){var r=-1,i=44;do switch(pl(i)){case 0:i===38&&ur()===12&&(n[r]=1),e[r]+=S6(on-1,n,r);break;case 2:e[r]+=ud(i);break;case 4:if(i===44){e[++r]=ur()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=$f(i)}while(i=hn());return e},C6=function(e,n){return yk(A6(vk(e),n))},sI=new WeakMap,R6=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!sI.get(r))&&!i){sI.set(e,!0);for(var s=[],o=C6(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)e.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},P6=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function _k(t,e){switch(l6(t,e)){case 5103:return ue+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ue+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ue+t+dh+t+bt+t+t;case 6828:case 4268:return ue+t+bt+t+t;case 6165:return ue+t+bt+"flex-"+t+t;case 5187:return ue+t+le(t,/(\w+).+(:[^]+)/,ue+"box-$1$2"+bt+"flex-$1$2")+t;case 5443:return ue+t+bt+"flex-item-"+le(t,/flex-|-self/,"")+t;case 4675:return ue+t+bt+"flex-line-pack"+le(t,/align-content|flex-|-self/,"")+t;case 5548:return ue+t+bt+le(t,"shrink","negative")+t;case 5292:return ue+t+bt+le(t,"basis","preferred-size")+t;case 6060:return ue+"box-"+le(t,"-grow","")+ue+t+bt+le(t,"grow","positive")+t;case 4554:return ue+le(t,/([^-])(transform)/g,"$1"+ue+"$2")+t;case 6187:return le(le(le(t,/(zoom-|grab)/,ue+"$1"),/(image-set)/,ue+"$1"),t,"")+t;case 5495:case 3959:return le(t,/(image-set\([^]*)/,ue+"$1$`$1");case 4968:return le(le(t,/(.+:)(flex-)?(.*)/,ue+"box-pack:$3"+bt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ue+t+t;case 4095:case 3583:case 4068:case 2532:return le(t,/(.+)-inline(.+)/,ue+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qn(t)-1-e>6)switch(mt(t,e+1)){case 109:if(mt(t,e+4)!==45)break;case 102:return le(t,/(.+:)(.+)-([^]+)/,"$1"+ue+"$2-$3$1"+dh+(mt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~hv(t,"stretch")?_k(le(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(mt(t,e+1)!==115)break;case 6444:switch(mt(t,qn(t)-3-(~hv(t,"!important")&&10))){case 107:return le(t,":",":"+ue)+t;case 101:return le(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ue+(mt(t,14)===45?"inline-":"")+"box$3$1"+ue+"$2$3$1"+bt+"$2box$3")+t}break;case 5936:switch(mt(t,e+11)){case 114:return ue+t+bt+le(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ue+t+bt+le(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ue+t+bt+le(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ue+t+bt+t+t}return t}var b6=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case m0:e.return=_k(e.value,e.length);break;case pk:return Ao([Ma(e,{value:le(e.value,"@","@"+ue)})],i);case p0:if(e.length)return d6(e.props,function(s){switch(c6(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ao([Ma(e,{props:[le(s,/:(read-\w+)/,":"+dh+"$1")]})],i);case"::placeholder":return Ao([Ma(e,{props:[le(s,/:(plac\w+)/,":"+ue+"input-$1")]}),Ma(e,{props:[le(s,/:(plac\w+)/,":"+dh+"$1")]}),Ma(e,{props:[le(s,/:(plac\w+)/,bt+"input-$1")]})],i)}return""})}},k6=[b6],x6=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var _=g.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||k6,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var _=g.getAttribute("data-emotion").split(" "),p=1;p<_.length;p++)s[_[p]]=!0;a.push(g)});var u,l=[R6,P6];{var c,d=[E6,I6(function(g){c.insert(g)})],h=w6(l.concat(i,d)),f=function(_){return Ao(y6(_),h)};u=function(_,p,v,y){c=v,f(_?_+"{"+p.styles+"}":p.styles),y&&(m.inserted[p.name]=!0)}}var m={key:n,sheet:new i6({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:u};return m.sheet.hydrate(a),m},Ek={exports:{}},pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ht=typeof Symbol=="function"&&Symbol.for,v0=ht?Symbol.for("react.element"):60103,y0=ht?Symbol.for("react.portal"):60106,jf=ht?Symbol.for("react.fragment"):60107,zf=ht?Symbol.for("react.strict_mode"):60108,qf=ht?Symbol.for("react.profiler"):60114,Hf=ht?Symbol.for("react.provider"):60109,Wf=ht?Symbol.for("react.context"):60110,_0=ht?Symbol.for("react.async_mode"):60111,Gf=ht?Symbol.for("react.concurrent_mode"):60111,Kf=ht?Symbol.for("react.forward_ref"):60112,Qf=ht?Symbol.for("react.suspense"):60113,D6=ht?Symbol.for("react.suspense_list"):60120,Yf=ht?Symbol.for("react.memo"):60115,Jf=ht?Symbol.for("react.lazy"):60116,N6=ht?Symbol.for("react.block"):60121,O6=ht?Symbol.for("react.fundamental"):60117,V6=ht?Symbol.for("react.responder"):60118,F6=ht?Symbol.for("react.scope"):60119;function yn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case v0:switch(t=t.type,t){case _0:case Gf:case jf:case qf:case zf:case Qf:return t;default:switch(t=t&&t.$$typeof,t){case Wf:case Kf:case Jf:case Yf:case Hf:return t;default:return e}}case y0:return e}}}function wk(t){return yn(t)===Gf}pe.AsyncMode=_0;pe.ConcurrentMode=Gf;pe.ContextConsumer=Wf;pe.ContextProvider=Hf;pe.Element=v0;pe.ForwardRef=Kf;pe.Fragment=jf;pe.Lazy=Jf;pe.Memo=Yf;pe.Portal=y0;pe.Profiler=qf;pe.StrictMode=zf;pe.Suspense=Qf;pe.isAsyncMode=function(t){return wk(t)||yn(t)===_0};pe.isConcurrentMode=wk;pe.isContextConsumer=function(t){return yn(t)===Wf};pe.isContextProvider=function(t){return yn(t)===Hf};pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===v0};pe.isForwardRef=function(t){return yn(t)===Kf};pe.isFragment=function(t){return yn(t)===jf};pe.isLazy=function(t){return yn(t)===Jf};pe.isMemo=function(t){return yn(t)===Yf};pe.isPortal=function(t){return yn(t)===y0};pe.isProfiler=function(t){return yn(t)===qf};pe.isStrictMode=function(t){return yn(t)===zf};pe.isSuspense=function(t){return yn(t)===Qf};pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===jf||t===Gf||t===qf||t===zf||t===Qf||t===D6||typeof t=="object"&&t!==null&&(t.$$typeof===Jf||t.$$typeof===Yf||t.$$typeof===Hf||t.$$typeof===Wf||t.$$typeof===Kf||t.$$typeof===O6||t.$$typeof===V6||t.$$typeof===F6||t.$$typeof===N6)};pe.typeOf=yn;Ek.exports=pe;var L6=Ek.exports,Ik=L6,M6={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$6={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Tk={};Tk[Ik.ForwardRef]=M6;Tk[Ik.Memo]=$6;var U6=!0;function B6(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var Sk=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||U6===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},j6=function(e,n,r){Sk(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function z6(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var q6={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},H6=/[A-Z]|^ms/g,W6=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ak=function(e){return e.charCodeAt(1)===45},oI=function(e){return e!=null&&typeof e!="boolean"},nm=T6(function(t){return Ak(t)?t:t.replace(H6,"-$&").toLowerCase()}),aI=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(W6,function(r,i,s){return Hn={name:i,styles:s,next:Hn},i})}return q6[e]!==1&&!Ak(e)&&typeof n=="number"&&n!==0?n+"px":n};function ml(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Hn={name:n.name,styles:n.styles,next:Hn},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Hn={name:r.name,styles:r.styles,next:Hn},r=r.next;var i=n.styles+";";return i}return G6(t,e,n)}case"function":{if(t!==void 0){var s=Hn,o=n(t);return Hn=s,ml(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function G6(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=ml(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":oI(o)&&(r+=nm(s)+":"+aI(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)oI(o[a])&&(r+=nm(s)+":"+aI(s,o[a])+";");else{var u=ml(t,e,o);switch(s){case"animation":case"animationName":{r+=nm(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var uI=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Hn,Ck=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Hn=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=ml(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=ml(r,n,e[a]),i&&(s+=o[a]);uI.lastIndex=0;for(var u="",l;(l=uI.exec(s))!==null;)u+="-"+l[1];var c=z6(s)+u;return{name:c,styles:s,next:Hn}},K6=function(e){return e()},Q6=lm["useInsertionEffect"]?lm["useInsertionEffect"]:!1,Y6=Q6||K6,E0={}.hasOwnProperty,Rk=w.createContext(typeof HTMLElement<"u"?x6({key:"css"}):null);Rk.Provider;var J6=function(e){return w.forwardRef(function(n,r){var i=w.useContext(Rk);return e(n,i,r)})},X6=w.createContext({}),pv="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Z6=function(e,n){var r={};for(var i in n)E0.call(n,i)&&(r[i]=n[i]);return r[pv]=e,r},ej=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return Sk(n,r,i),Y6(function(){return j6(n,r,i)}),null},tj=J6(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[pv],s=[r],o="";typeof t.className=="string"?o=B6(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=Ck(s,void 0,w.useContext(X6));o+=e.key+"-"+a.name;var u={};for(var l in t)E0.call(t,l)&&l!=="css"&&l!==pv&&(u[l]=t[l]);return u.ref=n,u.className=o,w.createElement(w.Fragment,null,w.createElement(ej,{cache:e,serialized:a,isStringTag:typeof i=="string"}),w.createElement(i,u))}),nj=tj,G=function(e,n){var r=arguments;if(n==null||!E0.call(n,"css"))return w.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=nj,s[1]=Z6(e,n);for(var o=2;o<i;o++)s[o]=r[o];return w.createElement.apply(null,s)};function w0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ck(e)}var rj=function(){var e=w0.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function ij(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const sj=Math.min,oj=Math.max,hh=Math.round,bc=Math.floor,fh=t=>({x:t,y:t});function aj(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Pk(t){return kk(t)?(t.nodeName||"").toLowerCase():"#document"}function Ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bk(t){var e;return(e=(kk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function kk(t){return t instanceof Node||t instanceof Ln(t).Node}function mv(t){return t instanceof Element||t instanceof Ln(t).Element}function I0(t){return t instanceof HTMLElement||t instanceof Ln(t).HTMLElement}function lI(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ln(t).ShadowRoot}function xk(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=T0(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function uj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function lj(t){return["html","body","#document"].includes(Pk(t))}function T0(t){return Ln(t).getComputedStyle(t)}function cj(t){if(Pk(t)==="html")return t;const e=t.assignedSlot||t.parentNode||lI(t)&&t.host||bk(t);return lI(e)?e.host:e}function Dk(t){const e=cj(t);return lj(e)?t.ownerDocument?t.ownerDocument.body:t.body:I0(e)&&xk(e)?e:Dk(e)}function gv(t,e){var n;e===void 0&&(e=[]);const r=Dk(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Ln(r);return i?e.concat(s,s.visualViewport||[],xk(r)?r:[]):e.concat(r,gv(r))}function dj(t){const e=T0(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=I0(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=hh(n)!==s||hh(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function S0(t){return mv(t)?t:t.contextElement}function rm(t){const e=S0(t);if(!I0(e))return fh(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=dj(e);let o=(s?hh(n.width):n.width)/r,a=(s?hh(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const hj=fh(0);function fj(t){const e=Ln(t);return!uj()||!e.visualViewport?hj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function pj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ln(t)?!1:e}function cI(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=S0(t);let o=fh(1);e&&(r?mv(r)&&(o=rm(r)):o=rm(t));const a=pj(s,n,r)?fj(s):fh(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const h=Ln(s),f=r&&mv(r)?Ln(r):r;let m=h.frameElement;for(;m&&r&&f!==h;){const g=rm(m),_=m.getBoundingClientRect(),p=T0(m),v=_.left+(m.clientLeft+parseFloat(p.paddingLeft))*g.x,y=_.top+(m.clientTop+parseFloat(p.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,d*=g.y,u+=v,l+=y,m=Ln(m).frameElement}}return aj({width:c,height:d,x:u,y:l})}function mj(t,e){let n=null,r;const i=bk(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const f=bc(c),m=bc(i.clientWidth-(l+d)),g=bc(i.clientHeight-(c+h)),_=bc(l),v={rootMargin:-f+"px "+-m+"px "+-g+"px "+-_+"px",threshold:oj(0,sj(1,u))||1};let y=!0;function E(T){const I=T[0].intersectionRatio;if(I!==u){if(!y)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},100)}y=!1}try{n=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(t)}return o(!0),s}function gj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=S0(t),c=i||s?[...l?gv(l):[],...gv(e)]:[];c.forEach(p=>{i&&p.addEventListener("scroll",n,{passive:!0}),s&&p.addEventListener("resize",n)});const d=l&&a?mj(l,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(p=>{let[v]=p;v&&v.target===l&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{f&&f.observe(e)})),n()}),l&&!u&&f.observe(l),f.observe(e));let m,g=u?cI(t):null;u&&_();function _(){const p=cI(t);g&&(p.x!==g.x||p.y!==g.y||p.width!==g.width||p.height!==g.height)&&n(),g=p,m=requestAnimationFrame(_)}return n(),()=>{c.forEach(p=>{i&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),d&&d(),f&&f.disconnect(),f=null,u&&cancelAnimationFrame(m)}}var ph=w.useLayoutEffect,vj=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],mh=function(){};function yj(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function _j(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=[].concat(r);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(yj(t,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var dI=function(e){return Pj(e)?e.filter(Boolean):bs(e)==="object"&&e!==null?[e]:[]},Nk=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=$r(e,vj);return q({},n)},Ne=function(e,n,r){var i=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(n,e),className:i(r??{},o(n,e),a)}};function Xf(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Ej(t){return Xf(t)?window.innerHeight:t.clientHeight}function Ok(t){return Xf(t)?window.pageYOffset:t.scrollTop}function gh(t,e){if(Xf(t)){window.scrollTo(0,e);return}t.scrollTop=e}function wj(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function Ij(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function kc(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:mh,i=Ok(t),s=e-i,o=10,a=0;function u(){a+=o;var l=Ij(a,i,s,n);gh(t,l),a<n?window.requestAnimationFrame(u):r(t)}u()}function hI(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?gh(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&gh(t,Math.max(e.offsetTop-i,0))}function Tj(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function fI(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Sj(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Vk=!1,Aj={get passive(){return Vk=!0}},xc=typeof window<"u"?window:{};xc.addEventListener&&xc.removeEventListener&&(xc.addEventListener("p",mh,Aj),xc.removeEventListener("p",mh,!1));var Cj=Vk;function Rj(t){return t!=null}function Pj(t){return Array.isArray(t)}function Dc(t,e,n){return t?e:n}var bj=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var a=Ar(o,1),u=a[0];return!r.includes(u)});return s.reduce(function(o,a){var u=Ar(a,2),l=u[0],c=u[1];return o[l]=c,o},{})},kj=["children","innerProps"],xj=["children","innerProps"];function Dj(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,a=t.controlHeight,u=wj(n),l={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return l;var c=u.getBoundingClientRect(),d=c.height,h=n.getBoundingClientRect(),f=h.bottom,m=h.height,g=h.top,_=n.offsetParent.getBoundingClientRect(),p=_.top,v=o?window.innerHeight:Ej(u),y=Ok(u),E=parseInt(getComputedStyle(n).marginBottom,10),T=parseInt(getComputedStyle(n).marginTop,10),I=p-T,A=v-g,k=I+y,U=d-y-g,M=f-v+y+E,ve=y+g-T,je=160;switch(i){case"auto":case"bottom":if(A>=m)return{placement:"bottom",maxHeight:e};if(U>=m&&!o)return s&&kc(u,M,je),{placement:"bottom",maxHeight:e};if(!o&&U>=r||o&&A>=r){s&&kc(u,M,je);var St=o?A-E:U-E;return{placement:"bottom",maxHeight:St}}if(i==="auto"||o){var Fe=e,ze=o?I:k;return ze>=r&&(Fe=Math.min(ze-E-a,e)),{placement:"top",maxHeight:Fe}}if(i==="bottom")return s&&gh(u,M),{placement:"bottom",maxHeight:e};break;case"top":if(I>=m)return{placement:"top",maxHeight:e};if(k>=m&&!o)return s&&kc(u,ve,je),{placement:"top",maxHeight:e};if(!o&&k>=r||o&&I>=r){var Ot=e;return(!o&&k>=r||o&&I>=r)&&(Ot=o?I-T:k-T),s&&kc(u,ve,je),{placement:"top",maxHeight:Ot}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return l}function Nj(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var Fk=function(e){return e==="auto"?"bottom":e},Oj=function(e,n){var r,i=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,u=s.colors;return q((r={label:"menu"},Za(r,Nj(i),"100%"),Za(r,"position","absolute"),Za(r,"width","100%"),Za(r,"zIndex",1),r),n?{}:{backgroundColor:u.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},Lk=w.createContext(null),Vj=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,u=e.theme,l=w.useContext(Lk)||{},c=l.setPortalPlacement,d=w.useRef(null),h=w.useState(i),f=Ar(h,2),m=f[0],g=f[1],_=w.useState(null),p=Ar(_,2),v=p[0],y=p[1],E=u.spacing.controlHeight;return ph(function(){var T=d.current;if(T){var I=o==="fixed",A=a&&!I,k=Dj({maxHeight:i,menuEl:T,minHeight:r,placement:s,shouldScroll:A,isFixedPosition:I,controlHeight:E});g(k.maxHeight),y(k.placement),c==null||c(k.placement)}},[i,s,o,a,r,c,E]),n({ref:d,placerProps:q(q({},e),{},{placement:v||Fk(s),maxHeight:m})})},Fj=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return G("div",W({},Ne(e,"menu",{menu:!0}),{ref:r},i),n)},Lj=Fj,Mj=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return q({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},$j=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,s=e.isMulti;return G("div",W({},Ne(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},r),n)},Mk=function(e,n){var r=e.theme,i=r.spacing.baseUnit,s=r.colors;return q({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Uj=Mk,Bj=Mk,jj=function(e){var n=e.children,r=n===void 0?"No options":n,i=e.innerProps,s=$r(e,kj);return G("div",W({},Ne(q(q({},s),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},zj=function(e){var n=e.children,r=n===void 0?"Loading...":n,i=e.innerProps,s=$r(e,xj);return G("div",W({},Ne(q(q({},s),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},qj=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},Hj=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,u=w.useRef(null),l=w.useRef(null),c=w.useState(Fk(o)),d=Ar(c,2),h=d[0],f=d[1],m=w.useMemo(function(){return{setPortalPlacement:f}},[]),g=w.useState(null),_=Ar(g,2),p=_[0],v=_[1],y=w.useCallback(function(){if(i){var A=Tj(i),k=a==="fixed"?0:window.pageYOffset,U=A[h]+k;(U!==(p==null?void 0:p.offset)||A.left!==(p==null?void 0:p.rect.left)||A.width!==(p==null?void 0:p.rect.width))&&v({offset:U,rect:A})}},[i,a,h,p==null?void 0:p.offset,p==null?void 0:p.rect.left,p==null?void 0:p.rect.width]);ph(function(){y()},[y]);var E=w.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),i&&u.current&&(l.current=gj(i,u.current,y,{elementResize:"ResizeObserver"in window}))},[i,y]);ph(function(){E()},[E]);var T=w.useCallback(function(A){u.current=A,E()},[E]);if(!n&&a!=="fixed"||!p)return null;var I=G("div",W({ref:T},Ne(q(q({},e),{},{offset:p.offset,position:a,rect:p.rect}),"menuPortal",{"menu-portal":!0}),s),r);return G(Lk.Provider,{value:m},n?QS.createPortal(I,n):I)},Wj=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Gj=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,s=e.isRtl;return G("div",W({},Ne(e,"container",{"--is-disabled":i,"--is-rtl":s}),r),n)},Kj=function(e,n){var r=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return q({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},Qj=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,s=e.hasValue;return G("div",W({},Ne(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),r),n)},Yj=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Jj=function(e){var n=e.children,r=e.innerProps;return G("div",W({},Ne(e,"indicatorsContainer",{indicators:!0}),r),n)},pI,Xj=["size"],Zj=["innerProps","isRtl","size"],ez={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},$k=function(e){var n=e.size,r=$r(e,Xj);return G("svg",W({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:ez},r))},A0=function(e){return G($k,W({size:20},e),G("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Uk=function(e){return G($k,W({size:20},e),G("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Bk=function(e,n){var r=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return q({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?o.neutral60:o.neutral20,padding:s*2,":hover":{color:r?o.neutral80:o.neutral40}})},tz=Bk,nz=function(e){var n=e.children,r=e.innerProps;return G("div",W({},Ne(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||G(Uk,null))},rz=Bk,iz=function(e){var n=e.children,r=e.innerProps;return G("div",W({},Ne(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||G(A0,null))},sz=function(e,n){var r=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return q({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},oz=function(e){var n=e.innerProps;return G("span",W({},n,Ne(e,"indicatorSeparator",{"indicator-separator":!0})))},az=rj(pI||(pI=ij([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),uz=function(e,n){var r=e.isFocused,i=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return q({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?o.neutral60:o.neutral20,padding:a*2})},im=function(e){var n=e.delay,r=e.offset;return G("span",{css:w0({animation:"".concat(az," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},lz=function(e){var n=e.innerProps,r=e.isRtl,i=e.size,s=i===void 0?4:i,o=$r(e,Zj);return G("div",W({},Ne(q(q({},o),{},{innerProps:n,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),G(im,{delay:0,offset:r}),G(im,{delay:160,offset:!0}),G(im,{delay:320,offset:!r}))},cz=function(e,n){var r=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,u=s.spacing;return q({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:u.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:i?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},dz=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return G("div",W({ref:s},Ne(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),o),n)},hz=dz,fz=["data"],pz=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},mz=function(e){var n=e.children,r=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,u=e.innerProps,l=e.label,c=e.theme,d=e.selectProps;return G("div",W({},Ne(e,"group",{group:!0}),u),G(o,W({},a,{selectProps:d,theme:c,getStyles:i,getClassNames:s,cx:r}),l),G("div",null,n))},gz=function(e,n){var r=e.theme,i=r.colors,s=r.spacing;return q({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},vz=function(e){var n=Nk(e);n.data;var r=$r(n,fz);return G("div",W({},Ne(e,"groupHeading",{"group-heading":!0}),r))},yz=mz,_z=["innerRef","isDisabled","isHidden","inputClassName"],Ez=function(e,n){var r=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,a=s.colors;return q(q({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},wz),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},jk={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},wz={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":q({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},jk)},Iz=function(e){return q({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},jk)},Tz=function(e){var n=e.cx,r=e.value,i=Nk(e),s=i.innerRef,o=i.isDisabled,a=i.isHidden,u=i.inputClassName,l=$r(i,_z);return G("div",W({},Ne(e,"input",{"input-container":!0}),{"data-value":r||""}),G("input",W({className:n({input:!0},u),ref:s,style:Iz(a),disabled:o},l)))},Sz=Tz,Az=function(e,n){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors;return q({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},Cz=function(e,n){var r=e.theme,i=r.borderRadius,s=r.colors,o=e.cropWithEllipsis;return q({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Rz=function(e,n){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors,a=e.isFocused;return q({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},zk=function(e){var n=e.children,r=e.innerProps;return G("div",r,n)},Pz=zk,bz=zk;function kz(t){var e=t.children,n=t.innerProps;return G("div",W({role:"button"},n),e||G(A0,{size:14}))}var xz=function(e){var n=e.children,r=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,u=e.selectProps,l=r.Container,c=r.Label,d=r.Remove;return G(l,{data:i,innerProps:q(q({},Ne(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:u},G(c,{data:i,innerProps:q({},Ne(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:u},n),G(d,{data:i,innerProps:q(q({},Ne(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:u}))},Dz=xz,Nz=function(e,n){var r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,u=o.colors;return q({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?u.primary:i?u.primary25:"transparent",color:r?u.neutral20:s?u.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?u.primary:u.primary50}})},Oz=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return G("div",W({},Ne(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":r},a),n)},Vz=Oz,Fz=function(e,n){var r=e.theme,i=r.spacing,s=r.colors;return q({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Lz=function(e){var n=e.children,r=e.innerProps;return G("div",W({},Ne(e,"placeholder",{placeholder:!0}),r),n)},Mz=Lz,$z=function(e,n){var r=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return q({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Uz=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return G("div",W({},Ne(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},Bz=Uz,jz={ClearIndicator:iz,Control:hz,DropdownIndicator:nz,DownChevron:Uk,CrossIcon:A0,Group:yz,GroupHeading:vz,IndicatorsContainer:Jj,IndicatorSeparator:oz,Input:Sz,LoadingIndicator:lz,Menu:Lj,MenuList:$j,MenuPortal:Hj,LoadingMessage:zj,NoOptionsMessage:jj,MultiValue:Dz,MultiValueContainer:Pz,MultiValueLabel:bz,MultiValueRemove:kz,Option:Vz,Placeholder:Mz,SelectContainer:Gj,SingleValue:Bz,ValueContainer:Qj},zz=function(e){return q(q({},jz),e.components)},mI=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function qz(t,e){return!!(t===e||mI(t)&&mI(e))}function Hz(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!qz(t[n],e[n]))return!1;return!0}function Wz(t,e){e===void 0&&(e=Hz);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var Gz={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Kz=function(e){return G("span",W({css:Gz},e))},gI=Kz,Qz={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.isDisabled,s=e.tabSelectsValue,o=e.context;switch(o){case"menu":return"Use Up and Down to choose options".concat(i?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,u=e.isDisabled,l=e.isSelected,c=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(n==="value"&&a)return"value ".concat(o," focused, ").concat(c(a,r),".");if(n==="menu"){var d=u?" disabled":"",h="".concat(l?"selected":"focused").concat(d);return"option ".concat(o," ").concat(h,", ").concat(c(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},Yz=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,u=e.selectProps,l=e.id,c=u.ariaLiveMessages,d=u.getOptionLabel,h=u.inputValue,f=u.isMulti,m=u.isOptionDisabled,g=u.isSearchable,_=u.menuIsOpen,p=u.options,v=u.screenReaderStatus,y=u.tabSelectsValue,E=u["aria-label"],T=u["aria-live"],I=w.useMemo(function(){return q(q({},Qz),c||{})},[c]),A=w.useMemo(function(){var Fe="";if(n&&I.onChange){var ze=n.option,Ot=n.options,Gt=n.removedValue,V=n.removedValues,K=n.value,Q=function(Vt){return Array.isArray(Vt)?null:Vt},ce=Gt||ze||Q(K),te=ce?d(ce):"",Qe=Ot||V||void 0,At=Qe?Qe.map(d):[],_n=q({isDisabled:ce&&m(ce,a),label:te,labels:At},n);Fe=I.onChange(_n)}return Fe},[n,I,m,a,d]),k=w.useMemo(function(){var Fe="",ze=r||i,Ot=!!(r&&a&&a.includes(r));if(ze&&I.onFocus){var Gt={focused:ze,label:d(ze),isDisabled:m(ze,a),isSelected:Ot,options:s,context:ze===r?"menu":"value",selectValue:a};Fe=I.onFocus(Gt)}return Fe},[r,i,d,m,I,s,a]),U=w.useMemo(function(){var Fe="";if(_&&p.length&&I.onFilter){var ze=v({count:s.length});Fe=I.onFilter({inputValue:h,resultsMessage:ze})}return Fe},[s,h,_,I,p,v]),M=w.useMemo(function(){var Fe="";if(I.guidance){var ze=i?"value":_?"menu":"input";Fe=I.guidance({"aria-label":E,context:ze,isDisabled:r&&m(r,a),isMulti:f,isSearchable:g,tabSelectsValue:y})}return Fe},[E,r,i,f,m,g,_,I,a,y]),ve="".concat(k," ").concat(U," ").concat(M),je=G(w.Fragment,null,G("span",{id:"aria-selection"},A),G("span",{id:"aria-context"},ve)),St=(n==null?void 0:n.action)==="initial-input-focus";return G(w.Fragment,null,G(gI,{id:l},St&&je),G(gI,{"aria-live":T,"aria-atomic":"false","aria-relevant":"additions text"},o&&!St&&je))},Jz=Yz,vv=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Xz=new RegExp("["+vv.map(function(t){return t.letters}).join("")+"]","g"),qk={};for(var sm=0;sm<vv.length;sm++)for(var om=vv[sm],am=0;am<om.letters.length;am++)qk[om.letters[am]]=om.base;var Hk=function(e){return e.replace(Xz,function(n){return qk[n]})},Zz=Wz(Hk),vI=function(e){return e.replace(/^\s+|\s+$/g,"")},e7=function(e){return"".concat(e.label," ").concat(e.value)},t7=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=q({ignoreCase:!0,ignoreAccents:!0,stringify:e7,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,a=i.stringify,u=i.trim,l=i.matchFrom,c=u?vI(r):r,d=u?vI(a(n)):a(n);return s&&(c=c.toLowerCase(),d=d.toLowerCase()),o&&(c=Zz(c),d=Hk(d)),l==="start"?d.substr(0,c.length)===c:d.indexOf(c)>-1}},n7=["innerRef"];function r7(t){var e=t.innerRef,n=$r(t,n7),r=bj(n,"onExited","in","enter","exit","appear");return G("input",W({ref:e},r,{css:w0({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var i7=function(e){e.preventDefault(),e.stopPropagation()};function s7(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=w.useRef(!1),a=w.useRef(!1),u=w.useRef(0),l=w.useRef(null),c=w.useCallback(function(_,p){if(l.current!==null){var v=l.current,y=v.scrollTop,E=v.scrollHeight,T=v.clientHeight,I=l.current,A=p>0,k=E-T-y,U=!1;k>p&&o.current&&(r&&r(_),o.current=!1),A&&a.current&&(s&&s(_),a.current=!1),A&&p>k?(n&&!o.current&&n(_),I.scrollTop=E,U=!0,o.current=!0):!A&&-p>y&&(i&&!a.current&&i(_),I.scrollTop=0,U=!0,a.current=!0),U&&i7(_)}},[n,r,i,s]),d=w.useCallback(function(_){c(_,_.deltaY)},[c]),h=w.useCallback(function(_){u.current=_.changedTouches[0].clientY},[]),f=w.useCallback(function(_){var p=u.current-_.changedTouches[0].clientY;c(_,p)},[c]),m=w.useCallback(function(_){if(_){var p=Cj?{passive:!1}:!1;_.addEventListener("wheel",d,p),_.addEventListener("touchstart",h,p),_.addEventListener("touchmove",f,p)}},[f,h,d]),g=w.useCallback(function(_){_&&(_.removeEventListener("wheel",d,!1),_.removeEventListener("touchstart",h,!1),_.removeEventListener("touchmove",f,!1))},[f,h,d]);return w.useEffect(function(){if(e){var _=l.current;return m(_),function(){g(_)}}},[e,m,g]),function(_){l.current=_}}var yI=["boxSizing","height","overflow","paddingRight","position"],_I={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function EI(t){t.preventDefault()}function wI(t){t.stopPropagation()}function II(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function TI(){return"ontouchstart"in window||navigator.maxTouchPoints}var SI=!!(typeof window<"u"&&window.document&&window.document.createElement),$a=0,Ws={capture:!1,passive:!1};function o7(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=w.useRef({}),s=w.useRef(null),o=w.useCallback(function(u){if(SI){var l=document.body,c=l&&l.style;if(r&&yI.forEach(function(m){var g=c&&c[m];i.current[m]=g}),r&&$a<1){var d=parseInt(i.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,f=window.innerWidth-h+d||0;Object.keys(_I).forEach(function(m){var g=_I[m];c&&(c[m]=g)}),c&&(c.paddingRight="".concat(f,"px"))}l&&TI()&&(l.addEventListener("touchmove",EI,Ws),u&&(u.addEventListener("touchstart",II,Ws),u.addEventListener("touchmove",wI,Ws))),$a+=1}},[r]),a=w.useCallback(function(u){if(SI){var l=document.body,c=l&&l.style;$a=Math.max($a-1,0),r&&$a<1&&yI.forEach(function(d){var h=i.current[d];c&&(c[d]=h)}),l&&TI()&&(l.removeEventListener("touchmove",EI,Ws),u&&(u.removeEventListener("touchstart",II,Ws),u.removeEventListener("touchmove",wI,Ws)))}},[r]);return w.useEffect(function(){if(e){var u=s.current;return o(u),function(){a(u)}}},[e,o,a]),function(u){s.current=u}}var a7=function(){return document.activeElement&&document.activeElement.blur()},u7={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function l7(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,s=t.onBottomArrive,o=t.onBottomLeave,a=t.onTopArrive,u=t.onTopLeave,l=s7({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:u}),c=o7({isEnabled:n}),d=function(f){l(f),c(f)};return G(w.Fragment,null,n&&G("div",{onClick:a7,css:u7}),e(d))}var c7={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},d7=function(e){var n=e.name,r=e.onFocus;return G("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:c7,value:"",onChange:function(){}})},h7=d7,f7=function(e){return e.label},p7=function(e){return e.label},m7=function(e){return e.value},g7=function(e){return!!e.isDisabled},v7={clearIndicator:rz,container:Wj,control:cz,dropdownIndicator:tz,group:pz,groupHeading:gz,indicatorsContainer:Yj,indicatorSeparator:sz,input:Ez,loadingIndicator:uz,loadingMessage:Bj,menu:Oj,menuList:Mj,menuPortal:qj,multiValue:Az,multiValueLabel:Cz,multiValueRemove:Rz,noOptionsMessage:Uj,option:Nz,placeholder:Fz,singleValue:$z,valueContainer:Kj},y7={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},_7=4,Wk=4,E7=38,w7=Wk*2,I7={baseUnit:Wk,controlHeight:E7,menuGutter:w7},um={borderRadius:_7,colors:y7,spacing:I7},T7={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:fI(),captureMenuScroll:!fI(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:t7(),formatGroupLabel:f7,getOptionLabel:p7,getOptionValue:m7,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:g7,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Sj(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function AI(t,e,n,r){var i=Yk(t,e,n),s=Jk(t,e,n),o=Qk(t,e),a=vh(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:a,index:r}}function Gk(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(o,a){return AI(t,o,e,a)}).filter(function(o){return CI(t,o)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var s=AI(t,n,e,r);return CI(t,s)?s:void 0}).filter(Rj)}function Kk(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,hk(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function S7(t,e){return Kk(Gk(t,e))}function CI(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,a=e.value;return(!Zk(t)||!s)&&Xk(t,{label:o,value:a,data:i},r)}function A7(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function C7(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var Qk=function(e,n){return e.getOptionLabel(n)},vh=function(e,n){return e.getOptionValue(n)};function Yk(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function Jk(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=vh(t,e);return n.some(function(i){return vh(t,i)===r})}function Xk(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var Zk=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},R7=1,ex=function(t){K5(n,t);var e=X5(n);function n(r){var i;if(W5(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.instancePrefix="",i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(a){i.controlRef=a},i.focusedOptionRef=null,i.getFocusedOptionRef=function(a){i.focusedOptionRef=a},i.menuListRef=null,i.getMenuListRef=function(a){i.menuListRef=a},i.inputRef=null,i.getInputRef=function(a){i.inputRef=a},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(a,u){var l=i.props,c=l.onChange,d=l.name;u.name=d,i.ariaOnChange(a,u),c(a,u)},i.setValue=function(a,u,l){var c=i.props,d=c.closeMenuOnSelect,h=c.isMulti,f=c.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:f}),d&&(i.setState({inputIsHiddenAfterUpdate:!h}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(a,{action:u,option:l})},i.selectOption=function(a){var u=i.props,l=u.blurInputOnSelect,c=u.isMulti,d=u.name,h=i.state.selectValue,f=c&&i.isOptionSelected(a,h),m=i.isOptionDisabled(a,h);if(f){var g=i.getOptionValue(a);i.setValue(h.filter(function(_){return i.getOptionValue(_)!==g}),"deselect-option",a)}else if(!m)c?i.setValue([].concat(hk(h),[a]),"select-option",a):i.setValue(a,"select-option");else{i.ariaOnChange(a,{action:"select-option",option:a,name:d});return}l&&i.blurInput()},i.removeValue=function(a){var u=i.props.isMulti,l=i.state.selectValue,c=i.getOptionValue(a),d=l.filter(function(f){return i.getOptionValue(f)!==c}),h=Dc(u,d,d[0]||null);i.onChange(h,{action:"remove-value",removedValue:a}),i.focusInput()},i.clearValue=function(){var a=i.state.selectValue;i.onChange(Dc(i.props.isMulti,[],null),{action:"clear",removedValues:a})},i.popValue=function(){var a=i.props.isMulti,u=i.state.selectValue,l=u[u.length-1],c=u.slice(0,u.length-1),d=Dc(a,c,c[0]||null);i.onChange(d,{action:"pop-value",removedValue:l})},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return _j.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(a){return Qk(i.props,a)},i.getOptionValue=function(a){return vh(i.props,a)},i.getStyles=function(a,u){var l=i.props.unstyled,c=v7[a](u,l);c.boxSizing="border-box";var d=i.props.styles[a];return d?d(c,u):c},i.getClassNames=function(a,u){var l,c;return(l=(c=i.props.classNames)[a])===null||l===void 0?void 0:l.call(c,u)},i.getElementId=function(a){return"".concat(i.instancePrefix,"-").concat(a)},i.getComponents=function(){return zz(i.props)},i.buildCategorizedOptions=function(){return Gk(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return Kk(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(a,u){i.setState({ariaSelection:q({value:a},u)})},i.onMenuMouseDown=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(a){i.blockOptionHover=!1},i.onControlMouseDown=function(a){if(!a.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.preventDefault()}},i.onDropdownIndicatorMouseDown=function(a){if(!(a&&a.type==="mousedown"&&a.button!==0)&&!i.props.isDisabled){var u=i.props,l=u.isMulti,c=u.menuIsOpen;i.focusInput(),c?(i.setState({inputIsHiddenAfterUpdate:!l}),i.onMenuClose()):i.openMenu("first"),a.preventDefault()}},i.onClearIndicatorMouseDown=function(a){a&&a.type==="mousedown"&&a.button!==0||(i.clearValue(),a.preventDefault(),i.openAfterFocus=!1,a.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(a){typeof i.props.closeMenuOnScroll=="boolean"?a.target instanceof HTMLElement&&Xf(a.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(a)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(a){var u=a.touches,l=u&&u.item(0);l&&(i.initialTouchX=l.clientX,i.initialTouchY=l.clientY,i.userIsDragging=!1)},i.onTouchMove=function(a){var u=a.touches,l=u&&u.item(0);if(l){var c=Math.abs(l.clientX-i.initialTouchX),d=Math.abs(l.clientY-i.initialTouchY),h=5;i.userIsDragging=c>h||d>h}},i.onTouchEnd=function(a){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(a.target)&&i.menuListRef&&!i.menuListRef.contains(a.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(a){i.userIsDragging||i.onControlMouseDown(a)},i.onClearIndicatorTouchEnd=function(a){i.userIsDragging||i.onClearIndicatorMouseDown(a)},i.onDropdownIndicatorTouchEnd=function(a){i.userIsDragging||i.onDropdownIndicatorMouseDown(a)},i.handleInputChange=function(a){var u=i.props.inputValue,l=a.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(l,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(a){i.props.onFocus&&i.props.onFocus(a),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(a){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(a),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(a){i.blockOptionHover||i.state.focusedOption===a||i.setState({focusedOption:a})},i.shouldHideSelectedOptions=function(){return Zk(i.props)},i.onValueInputFocus=function(a){a.preventDefault(),a.stopPropagation(),i.focus()},i.onKeyDown=function(a){var u=i.props,l=u.isMulti,c=u.backspaceRemovesValue,d=u.escapeClearsValue,h=u.inputValue,f=u.isClearable,m=u.isDisabled,g=u.menuIsOpen,_=u.onKeyDown,p=u.tabSelectsValue,v=u.openMenuOnFocus,y=i.state,E=y.focusedOption,T=y.focusedValue,I=y.selectValue;if(!m&&!(typeof _=="function"&&(_(a),a.defaultPrevented))){switch(i.blockOptionHover=!0,a.key){case"ArrowLeft":if(!l||h)return;i.focusValue("previous");break;case"ArrowRight":if(!l||h)return;i.focusValue("next");break;case"Delete":case"Backspace":if(h)return;if(T)i.removeValue(T);else{if(!c)return;l?i.popValue():f&&i.clearValue()}break;case"Tab":if(i.isComposing||a.shiftKey||!g||!p||!E||v&&i.isOptionSelected(E,I))return;i.selectOption(E);break;case"Enter":if(a.keyCode===229)break;if(g){if(!E||i.isComposing)return;i.selectOption(E);break}return;case"Escape":g?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:h}),i.onMenuClose()):f&&d&&i.clearValue();break;case" ":if(h)return;if(!g){i.openMenu("first");break}if(!E)return;i.selectOption(E);break;case"ArrowUp":g?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":g?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!g)return;i.focusOption("pageup");break;case"PageDown":if(!g)return;i.focusOption("pagedown");break;case"Home":if(!g)return;i.focusOption("first");break;case"End":if(!g)return;i.focusOption("last");break;default:return}a.preventDefault()}},i.instancePrefix="react-select-"+(i.props.instanceId||++R7),i.state.selectValue=dI(r.value),r.menuIsOpen&&i.state.selectValue.length){var s=i.buildFocusableOptions(),o=s.indexOf(i.state.selectValue[0]);i.state.focusedOption=s[o]}return i}return G5(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&hI(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,u=this.state.isFocused;(u&&!o&&i.isDisabled||u&&a&&!i.menuIsOpen)&&this.focusInput(),u&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!u&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(hI(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,a=o.selectValue,u=o.isFocused,l=this.buildFocusableOptions(),c=i==="first"?0:l.length-1;if(!this.props.isMulti){var d=l.indexOf(a[0]);d>-1&&(c=d)}this.scrollToFocusedOptionOnUpdate=!(u&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:l[c]},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var u=o.indexOf(a);a||(u=-1);var l=o.length-1,c=-1;if(o.length){switch(i){case"previous":u===0?c=0:u===-1?c=l:c=u-1;break;case"next":u>-1&&u<l&&(c=u+1);break}this.setState({inputIsHidden:c!==-1,focusedValue:o[c]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var u=0,l=a.indexOf(o);o||(l=-1),i==="up"?u=l>0?l-1:a.length-1:i==="down"?u=(l+1)%a.length:i==="pageup"?(u=l-s,u<0&&(u=0)):i==="pagedown"?(u=l+s,u>a.length-1&&(u=a.length-1)):i==="last"&&(u=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[u],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(um):q(q({},um),this.props.theme):um}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,u=this.getValue,l=this.selectOption,c=this.setValue,d=this.props,h=d.isMulti,f=d.isRtl,m=d.options,g=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:a,getValue:u,hasValue:g,isMulti:h,isRtl:f,options:m,selectOption:l,selectProps:d,setValue:c,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return Yk(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return Jk(this.props,i,s)}},{key:"filterOption",value:function(i,s){return Xk(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,a=i.inputId,u=i.inputValue,l=i.tabIndex,c=i.form,d=i.menuIsOpen,h=i.required,f=this.getComponents(),m=f.Input,g=this.state,_=g.inputIsHidden,p=g.ariaSelection,v=this.commonProps,y=a||this.getElementId("input"),E=q(q(q({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox"},d&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(p==null?void 0:p.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?w.createElement(m,W({},v,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:y,innerRef:this.getInputRef,isDisabled:s,isHidden:_,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:l,form:c,type:"text",value:u},E)):w.createElement(r7,W({id:y,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:mh,onFocus:this.onInputFocus,disabled:s,tabIndex:l,inputMode:"none",form:c,value:""},E))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,u=s.MultiValueLabel,l=s.MultiValueRemove,c=s.SingleValue,d=s.Placeholder,h=this.commonProps,f=this.props,m=f.controlShouldRenderValue,g=f.isDisabled,_=f.isMulti,p=f.inputValue,v=f.placeholder,y=this.state,E=y.selectValue,T=y.focusedValue,I=y.isFocused;if(!this.hasValue()||!m)return p?null:w.createElement(d,W({},h,{key:"placeholder",isDisabled:g,isFocused:I,innerProps:{id:this.getElementId("placeholder")}}),v);if(_)return E.map(function(k,U){var M=k===T,ve="".concat(i.getOptionLabel(k),"-").concat(i.getOptionValue(k));return w.createElement(o,W({},h,{components:{Container:a,Label:u,Remove:l},isFocused:M,isDisabled:g,key:ve,index:U,removeProps:{onClick:function(){return i.removeValue(k)},onTouchEnd:function(){return i.removeValue(k)},onMouseDown:function(St){St.preventDefault()}},data:k}),i.formatOptionLabel(k,"value"))});if(p)return null;var A=E[0];return w.createElement(c,W({},h,{data:A,isDisabled:g}),this.formatOptionLabel(A,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,a=this.props,u=a.isDisabled,l=a.isLoading,c=this.state.isFocused;if(!this.isClearable()||!s||u||!this.hasValue()||l)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(s,W({},o,{innerProps:d,isFocused:c}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,a=this.props,u=a.isDisabled,l=a.isLoading,c=this.state.isFocused;if(!s||!l)return null;var d={"aria-hidden":"true"};return w.createElement(s,W({},o,{innerProps:d,isDisabled:u,isFocused:c}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,u=this.props.isDisabled,l=this.state.isFocused;return w.createElement(o,W({},a,{isDisabled:u,isFocused:l}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,u=this.state.isFocused,l={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(s,W({},o,{innerProps:l,isDisabled:a,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,u=s.Menu,l=s.MenuList,c=s.MenuPortal,d=s.LoadingMessage,h=s.NoOptionsMessage,f=s.Option,m=this.commonProps,g=this.state.focusedOption,_=this.props,p=_.captureMenuScroll,v=_.inputValue,y=_.isLoading,E=_.loadingMessage,T=_.minMenuHeight,I=_.maxMenuHeight,A=_.menuIsOpen,k=_.menuPlacement,U=_.menuPosition,M=_.menuPortalTarget,ve=_.menuShouldBlockScroll,je=_.menuShouldScrollIntoView,St=_.noOptionsMessage,Fe=_.onMenuScrollToTop,ze=_.onMenuScrollToBottom;if(!A)return null;var Ot=function(Qe,At){var _n=Qe.type,nt=Qe.data,Vt=Qe.isDisabled,va=Qe.isSelected,Jl=Qe.label,nx=Qe.value,C0=g===nt,R0=Vt?void 0:function(){return i.onOptionHover(nt)},rx=Vt?void 0:function(){return i.selectOption(nt)},P0="".concat(i.getElementId("option"),"-").concat(At),ix={id:P0,onClick:rx,onMouseMove:R0,onMouseOver:R0,tabIndex:-1};return w.createElement(f,W({},m,{innerProps:ix,data:nt,isDisabled:Vt,isSelected:va,key:P0,label:Jl,type:_n,value:nx,isFocused:C0,innerRef:C0?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Qe.data,"menu"))},Gt;if(this.hasOptions())Gt=this.getCategorizedOptions().map(function(te){if(te.type==="group"){var Qe=te.data,At=te.options,_n=te.index,nt="".concat(i.getElementId("group"),"-").concat(_n),Vt="".concat(nt,"-heading");return w.createElement(o,W({},m,{key:nt,data:Qe,options:At,Heading:a,headingProps:{id:Vt,data:te.data},label:i.formatGroupLabel(te.data)}),te.options.map(function(va){return Ot(va,"".concat(_n,"-").concat(va.index))}))}else if(te.type==="option")return Ot(te,"".concat(te.index))});else if(y){var V=E({inputValue:v});if(V===null)return null;Gt=w.createElement(d,m,V)}else{var K=St({inputValue:v});if(K===null)return null;Gt=w.createElement(h,m,K)}var Q={minMenuHeight:T,maxMenuHeight:I,menuPlacement:k,menuPosition:U,menuShouldScrollIntoView:je},ce=w.createElement(Vj,W({},m,Q),function(te){var Qe=te.ref,At=te.placerProps,_n=At.placement,nt=At.maxHeight;return w.createElement(u,W({},m,Q,{innerRef:Qe,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove,id:i.getElementId("listbox")},isLoading:y,placement:_n}),w.createElement(l7,{captureEnabled:p,onTopArrive:Fe,onBottomArrive:ze,lockEnabled:ve},function(Vt){return w.createElement(l,W({},m,{innerRef:function(Jl){i.getMenuListRef(Jl),Vt(Jl)},isLoading:y,maxHeight:nt,focusedOption:g}),Gt)}))});return M||U==="fixed"?w.createElement(c,W({},m,{appendTo:M,controlElement:this.controlRef,menuPlacement:k,menuPosition:U}),ce):ce}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,a=s.isDisabled,u=s.isMulti,l=s.name,c=s.required,d=this.state.selectValue;if(c&&!this.hasValue()&&!a)return w.createElement(h7,{name:l,onFocus:this.onValueInputFocus});if(!(!l||a))if(u)if(o){var h=d.map(function(g){return i.getOptionValue(g)}).join(o);return w.createElement("input",{name:l,type:"hidden",value:h})}else{var f=d.length>0?d.map(function(g,_){return w.createElement("input",{key:"i-".concat(_),name:l,type:"hidden",value:i.getOptionValue(g)})}):w.createElement("input",{name:l,type:"hidden",value:""});return w.createElement("div",null,f)}else{var m=d[0]?this.getOptionValue(d[0]):"";return w.createElement("input",{name:l,type:"hidden",value:m})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,u=s.focusedValue,l=s.isFocused,c=s.selectValue,d=this.getFocusableOptions();return w.createElement(Jz,W({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:u,isFocused:l,selectValue:c,focusableOptions:d}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,a=i.SelectContainer,u=i.ValueContainer,l=this.props,c=l.className,d=l.id,h=l.isDisabled,f=l.menuIsOpen,m=this.state.isFocused,g=this.commonProps=this.getCommonProps();return w.createElement(a,W({},g,{className:c,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:m}),this.renderLiveRegion(),w.createElement(s,W({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:m,menuIsOpen:f}),w.createElement(u,W({},g,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),w.createElement(o,W({},g,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,u=s.inputIsHiddenAfterUpdate,l=s.ariaSelection,c=s.isFocused,d=s.prevWasFocused,h=i.options,f=i.value,m=i.menuIsOpen,g=i.inputValue,_=i.isMulti,p=dI(f),v={};if(o&&(f!==o.value||h!==o.options||m!==o.menuIsOpen||g!==o.inputValue)){var y=m?S7(i,p):[],E=a?A7(s,p):null,T=C7(s,y);v={selectValue:p,focusedOption:T,focusedValue:E,clearFocusValueOnUpdate:!1}}var I=u!=null&&i!==o?{inputIsHidden:u,inputIsHiddenAfterUpdate:void 0}:{},A=l,k=c&&d;return c&&!k&&(A={value:Dc(_,p,p[0]||null),options:p,action:"initial-input-focus"},k=!d),(l==null?void 0:l.action)==="initial-input-focus"&&(A=null),q(q(q({},v),I),{},{prevProps:i,ariaSelection:A,prevWasFocused:k})}}]),n}(w.Component);ex.defaultProps=T7;var P7=w.forwardRef(function(t,e){var n=H5(t);return w.createElement(ex,W({ref:e},n))}),RI=P7,b7=function(e){var n=w.useRef(e);return ph(function(){n.current=e}),n},PI=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},k7=function(e,n){var r=w.useRef();return w.useCallback(function(i){e.current=i,r.current&&PI(r.current,null),r.current=n,n&&PI(n,i)},[n])},bI={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},x7=function(e){Object.keys(bI).forEach(function(n){e.style.setProperty(n,bI[n],"important")})},kI=x7,Ft=null,xI=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function D7(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ft||(Ft=document.createElement("textarea"),Ft.setAttribute("tabindex","-1"),Ft.setAttribute("aria-hidden","true"),kI(Ft)),Ft.parentNode===null&&document.body.appendChild(Ft);var i=t.paddingSize,s=t.borderSize,o=t.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(h){var f=h;Ft.style[f]=o[f]}),kI(Ft),Ft.value=e;var u=xI(Ft,t);Ft.value=e,u=xI(Ft,t),Ft.value="x";var l=Ft.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var d=l*r;return a==="border-box"&&(d=d+i+s),u=Math.min(d,u),[u,l]}var DI=function(){},N7=function(e,n){return e.reduce(function(r,i){return r[i]=n[i],r},{})},O7=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],V7=!!document.documentElement.currentStyle,F7=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=N7(O7,n),i=r.boxSizing;if(i==="")return null;V7&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},L7=F7;function tx(t,e,n){var r=b7(n);w.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(t)return t.addEventListener(e,i),function(){return t.removeEventListener(e,i)}},[])}var M7=function(e){tx(window,"resize",e)},$7=function(e){tx(document.fonts,"loadingdone",e)},U7=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],B7=function(e,n){var r=e.cacheMeasurements,i=e.maxRows,s=e.minRows,o=e.onChange,a=o===void 0?DI:o,u=e.onHeightChange,l=u===void 0?DI:u,c=dk(e,U7),d=c.value!==void 0,h=w.useRef(null),f=k7(h,n),m=w.useRef(0),g=w.useRef(),_=function(){var y=h.current,E=r&&g.current?g.current:L7(y);if(E){g.current=E;var T=D7(E,y.value||y.placeholder||"x",s,i),I=T[0],A=T[1];m.current!==I&&(m.current=I,y.style.setProperty("height",I+"px","important"),l(I,{rowHeight:A}))}},p=function(y){d||_(),a(y)};return w.useLayoutEffect(_),M7(_),$7(_),w.createElement("textarea",W({},c,{onChange:p,ref:f}))},j7=w.forwardRef(B7);const NI={control:(t,e)=>({...t,height:"auto",minHeight:"40px",background:"rgba(242, 242, 242, 0.4)",borderColor:(e.isFocused,"#f2f2f2"),boxShadow:(e.isFocused,null),"&:hover":{borderColor:(e.isFocused,"#f2f2f2")}}),valueContainer:(t,e)=>({...t,padding:"0 6px"}),input:(t,e)=>({...t,margin:"0px",color:"white",fontFamily:"Inter, sans-serif",fontSize:"16px",fontWeight:"500"}),indicatorsContainer:(t,e)=>({...t,alignItems:"center",color:"white"}),dropdownIndicator:(t,e)=>({...t,color:"white"}),clearIndicator:(t,e)=>({...t,color:"white"}),placeholder:t=>({...t,color:"white",fontFamily:"Inter, sans-serif",fontSize:"16px",fontWeight:"500"}),multiValue:t=>({...t,backgroundColor:"white"})};function z7({filter:t,creatingNewFilter:e,onFilterCreated:n,onFilterDeleted:r}){const[i,s]=w.useState([]),[o,a]=w.useState([]),[u,l]=w.useState([]),[c,d]=w.useState(t.name||""),[h,f]=w.useState(t.taskInstructions||""),[m,g]=w.useState(!0);Lh(),w.useEffect(()=>{(async()=>{yt.auth().currentUser.getIdToken().then(async A=>{try{const U=(await cg.get("https://us-central1-social-inbox-7390f.cloudfunctions.net/api/labels",{headers:{Authorization:`Bearer ${A}`}})).data.labels.map(M=>({value:M.id,label:M.name}));s(U),console.log(t),t.labels&&a(U.filter(M=>t.labels.includes(M.value))),t.output&&l(U.filter(M=>t.output.includes(M.value)))}catch(k){console.log("Error fetching labels:",k)}finally{g(!1)}})})()},[t]);const _=I=>{a(I),console.log("Selected Input Labels: ",I.map(A=>A.value))},p=I=>{l(I),console.log("Selected Output Labels: ",I.map(A=>A.value))},v=I=>{d(I.target.value)},y=I=>{f(I.target.value)},E=async()=>{const I={name:c,taskInstructions:h,labels:o.map(U=>U.value),output:u.map(U=>U.value)};e||(I.filterId=t.id),console.log(I);const A=e?"https://us-central1-social-inbox-7390f.cloudfunctions.net/api/filters/create":"https://us-central1-social-inbox-7390f.cloudfunctions.net/api/filters/modify",k=e?"post":"patch";yt.auth().currentUser.getIdToken().then(async U=>{try{const M=await cg({method:k,url:A,data:I,headers:{Authorization:`Bearer ${U}`}});console.log("Response from server:",M.data),e&&n(M.data)}catch(M){console.log("Error sending request:",M)}})},T=async()=>{if(!e&&window.confirm("Are you sure you want to delete this filter?")){const I=yt.auth().currentUser;if(I){const A=I.uid;yt.firestore().collection("accounts").doc(A).collection("filters").doc(t.docId).delete().then(()=>{console.log("Filter successfully deleted!"),r(t)}).catch(U=>{console.error("Error removing filter: ",U)})}}};return m?R.jsx("div",{children:"Loading..."}):R.jsxs("div",{className:"mx-auto w-full max-w-screen-md py-6 px-5 flex flex-col items-center gap-4 text-sm",children:[R.jsxs("div",{className:"w-full flex flex-col items-start gap-2",children:[R.jsx("label",{className:"text-white text-base font-medium",children:"Filter Name"}),R.jsx("div",{className:"relative bg-gray-200 bg-opacity-40 border border-gray-400 rounded-md w-full",children:R.jsx("input",{className:"bg-transparent text-white text-base font-medium outline-none px-3 py-2 w-full h-11",type:"text",placeholder:"Jobs Filter",value:c,onChange:v})})]}),R.jsxs("div",{className:"w-full flex flex-col items-start gap-2",children:[R.jsx("label",{className:"text-white text-base font-medium",children:"GPT Filter Instructions"}),R.jsx("div",{className:"relative bg-gray-200 bg-opacity-40 border border-gray-400 rounded-md w-full",children:R.jsx(j7,{minRows:5,className:"bg-transparent text-white text-base font-medium outline-none px-3 py-2 w-full ",placeholder:"You are my AI assistant. You will be reading my email inbox and identifying any emails that are job offers. Do not include promotional emails about products. I want you to identify only emails related to potential job offers for me. These often include a job description and a little bit of information about a company. Respond with true if the email is a job opportunity and false otherwise.",value:h,onChange:y})})]}),R.jsxs("div",{className:"w-full flex flex-col items-start gap-2",children:[R.jsx("label",{className:"text-white text-base font-medium",children:"Labels To Read Emails From"}),R.jsx(RI,{className:"w-full",options:i,isMulti:!0,styles:NI,onChange:_,value:o})]}),R.jsxs("div",{className:"w-full flex flex-col items-start gap-2",children:[R.jsx("label",{className:"text-white text-base font-medium",children:"Labels To Put Filtered Emails In"}),R.jsx(RI,{className:"w-full",options:i,isMulti:!0,styles:NI,style:{width:"100%"},onChange:p,value:u})]}),R.jsx("div",{className:"h-5"}),R.jsx("button",{className:"fd-save-button",onClick:E,children:R.jsx("div",{className:"fd-save-text",children:e?"Create":"Save"})}),!e&&R.jsx("button",{className:"fd-delete-button",onClick:T,children:R.jsx("div",{className:"fd-del-text",children:"Delete Filter"})})]})}function q7({onLogout:t,loadingCredits:e,remaining:n,total:r}){return R.jsxs("div",{className:"w-full max-w-screen-sm",children:[e?R.jsx("div",{children:"Loading..."}):R.jsx("div",{className:"usage-summary",children:R.jsxs("div",{className:"usage-tile",children:[R.jsxs("div",{className:"filer-title-bar",children:[R.jsx("div",{className:"div",children:"GPT Email Credits"}),R.jsx("div",{className:"spacer-2"})]}),R.jsxs("div",{className:"max-h-52",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[R.jsx(uk,{value:(n/r+0)*100,className:"max-h-52",styles:{path:{stroke:"rgba(60, 91, 243, 1)"}}}),R.jsxs("div",{className:"description",style:{position:"absolute"},children:[R.jsx("h1",{className:"h-1",children:n}),R.jsxs("div",{className:"emails-remaining",children:["emails",R.jsx("br",{}),"remaining"]})]})]}),R.jsx("div",{className:"w-full px-20 pt-4",children:R.jsx("button",{className:"filer-buy-bar",onClick:()=>t(),children:R.jsxs("div",{className:"filer-title-bar",children:[R.jsx("div",{className:"spacer-2"}),R.jsx("div",{className:"text-wrapper-3",children:"Buy More"}),R.jsx("div",{className:"spacer-2"})]})})})]})}),R.jsxs("div",{className:"usage-summary-2",children:[R.jsx("div",{className:"text-wrapper-3  pt-8"}),R.jsxs("ul",{className:"filters-list",children:[R.jsx("button",{className:"filter",onClick:()=>console.log("clicked"),children:R.jsxs("div",{className:"filer-title-bar",children:[R.jsx("div",{className:"text-wrapper-3",children:"About Us"}),R.jsx("div",{className:"spacer-2"}),R.jsx("svg",{className:"img",viewBox:"0 0 10 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{d:"M9.6404 8.74258L2.09714 15.1921C1.6173 15.6026 0.839333 15.6026 0.359731 15.1921C-0.11991 14.782 -0.11991 14.1168 0.359731 13.7068L7.0341 7.99983L0.359731 2.29322C-0.11991 1.88294 -0.11991 1.21783 0.359731 0.807713C0.839372 0.397429 1.6173 0.397429 2.09714 0.807713L9.6404 7.25727C9.88023 7.46243 10 7.73103 10 7.99976C10 8.26862 9.87999 8.53742 9.64021 8.74248",fill:"white"})})]})}),R.jsx("button",{className:"filter",onClick:()=>console.log("clicked"),children:R.jsxs("div",{className:"filer-title-bar",children:[R.jsx("div",{className:"text-wrapper-3",children:"Privacy Policy"}),R.jsx("div",{className:"spacer-2"}),R.jsx("svg",{className:"img",viewBox:"0 0 10 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{d:"M9.6404 8.74258L2.09714 15.1921C1.6173 15.6026 0.839333 15.6026 0.359731 15.1921C-0.11991 14.782 -0.11991 14.1168 0.359731 13.7068L7.0341 7.99983L0.359731 2.29322C-0.11991 1.88294 -0.11991 1.21783 0.359731 0.807713C0.839372 0.397429 1.6173 0.397429 2.09714 0.807713L9.6404 7.25727C9.88023 7.46243 10 7.73103 10 7.99976C10 8.26862 9.87999 8.53742 9.64021 8.74248",fill:"white"})})]})}),R.jsx("button",{className:"filter",onClick:()=>console.log("clicked"),children:R.jsxs("div",{className:"filer-title-bar",children:[R.jsx("div",{className:"text-wrapper-3",children:"Terms and Conditions"}),R.jsx("div",{className:"spacer-2"}),R.jsx("svg",{className:"img",viewBox:"0 0 10 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{d:"M9.6404 8.74258L2.09714 15.1921C1.6173 15.6026 0.839333 15.6026 0.359731 15.1921C-0.11991 14.782 -0.11991 14.1168 0.359731 13.7068L7.0341 7.99983L0.359731 2.29322C-0.11991 1.88294 -0.11991 1.21783 0.359731 0.807713C0.839372 0.397429 1.6173 0.397429 2.09714 0.807713L9.6404 7.25727C9.88023 7.46243 10 7.73103 10 7.99976C10 8.26862 9.87999 8.53742 9.64021 8.74248",fill:"white"})})]})}),R.jsx("button",{className:"filter",onClick:()=>t(),children:R.jsxs("div",{className:"filer-title-bar",children:[R.jsx("div",{className:"spacer-2"}),R.jsx("div",{className:"fd-del-text",children:"Logout"}),R.jsx("div",{className:"spacer-2"})]})})]})]})]})}function H7(){let t=Lh();const[e,n]=w.useState([]),[r,i]=w.useState(null),[s,o]=w.useState(!1),[a,u]=w.useState(!1),[l,c]=w.useState(!0),[d,h]=w.useState(0),[f,m]=w.useState(0);w.useEffect(()=>{const T=yt.auth().currentUser;if(T){const I=T.uid;yt.firestore().collection("accounts").doc(I).collection("filters").get().then(U=>{const M=U.docs.map(ve=>({id:ve.id,...ve.data()}));n(M)}).catch(U=>{console.log("Error getting documents: ",U)}),(async()=>{yt.auth().currentUser.getIdToken().then(async U=>{try{const M=await cg.get("https://us-central1-social-inbox-7390f.cloudfunctions.net/api/credits",{headers:{Authorization:`Bearer ${U}`}});h(M.data.openai),m(M.data.fillup)}catch(M){console.log("Error fetching credits",M)}finally{c(!1)}})})()}else t("/login")},[]);const g=()=>{yt.auth().signOut().then(()=>{t("/login")}).catch(T=>{console.log(T)})},_=T=>{i(T)},p=()=>{i(null),o(!1),u(!1)},v=()=>{o(!0),i({})},y=T=>{n([...e,T]),i(T),o(!1)},E=T=>{n(e.filter(I=>I.id!==T.id)),i(null)};return R.jsxs("div",{className:"home-page",children:[R.jsxs("div",{className:"nav-bar",children:[r||a?R.jsx("button",{onClick:p,children:R.jsx("svg",{className:"vector",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{strokeWidth:"3",d:"M245.458824 490.706824L671.442824 64.752941a30.117647 30.117647 0 0 1 42.586352 42.586353L309.368471 512l404.570353 404.570353a30.087529 30.087529 0 0 1 0.060235 42.646588 29.967059 29.967059 0 0 1-42.646588-0.030117L245.519059 533.323294a30.087529 30.087529 0 0 1-0.030118-42.61647z",fill:"#FFFFFF"})})}):R.jsx(R.Fragment,{}),r||a?R.jsx("div",{className:"spacer"}):R.jsx(R.Fragment,{}),R.jsx("div",{className:"text-wrapper",children:"Filter GPT"}),R.jsx("div",{className:"spacer"}),R.jsx("button",{onClick:()=>u(!0),children:R.jsx("svg",{className:"vector",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.11111 0C0.497467 0 0 0.6396 0 1.42857C0 2.21754 0.497467 2.85714 1.11111 2.85714H18.8889C19.5026 2.85714 20 2.21754 20 1.42857C20 0.6396 19.5026 0 18.8889 0H1.11111ZM0 10C0 9.211 0.497467 8.57143 1.11111 8.57143H18.8889C19.5026 8.57143 20 9.211 20 10C20 10.789 19.5026 11.4286 18.8889 11.4286H1.11111C0.497467 11.4286 0 10.789 0 10ZM0 18.5714C0 17.7824 0.497467 17.1429 1.11111 17.1429H18.8889C19.5026 17.1429 20 17.7824 20 18.5714C20 19.3604 19.5026 20 18.8889 20H1.11111C0.497467 20 0 19.3604 0 18.5714Z",fill:"white"})})})]}),r||s?R.jsx(z7,{filter:r,creatingNewFilter:s,onFilterCreated:y,onFilterDeleted:E}):a?R.jsx(q7,{onLogout:g,loadingCredits:l,remaining:d,total:f}):R.jsx($5,{filters:e,onFilterSelect:_,onCreateFilter:v,loadingCredits:l,remaining:d,total:f})]})}const OI=()=>{let{token:t}=o2(),e=Lh();return w.useEffect(()=>{yt.auth().currentUser?e("/"):t&&yt.auth().signInWithCustomToken(t).then(()=>{e("/")}).catch(n=>{console.error("Error logging in with Custom token",n)})},[]),R.jsxs("div",{className:"login-screen",children:[R.jsxs("div",{className:"nav-bar",children:[R.jsx("div",{className:"text-wrapper",children:"Filter GPT"}),R.jsx("div",{className:"spacer"}),R.jsx("button",{onClick:()=>console.log("menu clicked"),children:R.jsx("svg",{className:"vector",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.11111 0C0.497467 0 0 0.6396 0 1.42857C0 2.21754 0.497467 2.85714 1.11111 2.85714H18.8889C19.5026 2.85714 20 2.21754 20 1.42857C20 0.6396 19.5026 0 18.8889 0H1.11111ZM0 10C0 9.211 0.497467 8.57143 1.11111 8.57143H18.8889C19.5026 8.57143 20 9.211 20 10C20 10.789 19.5026 11.4286 18.8889 11.4286H1.11111C0.497467 11.4286 0 10.789 0 10ZM0 18.5714C0 17.7824 0.497467 17.1429 1.11111 17.1429H18.8889C19.5026 17.1429 20 17.7824 20 18.5714C20 19.3604 19.5026 20 18.8889 20H1.11111C0.497467 20 0 19.3604 0 18.5714Z",fill:"white"})})})]}),R.jsx("div",{className:"mx-auto content w-full max-w-screen-md",children:R.jsxs("div",{className:"pitch",children:[R.jsx("h1",{className:"h-1 h-full",children:"AI Filters For Emails"}),R.jsx("p",{className:"p",children:"An easy-to-use AI tool that creates email that creates email filters for a more organized inbox on Gmail."}),R.jsx("a",{className:"sign-in-with-google",href:"https://accounts.google.com/o/oauth2/v2/auth?scope=email%20https://www.googleapis.com/auth/gmail.modify&access_type=offline&include_granted_scopes=true&response_type=code&redirect_uri=https://us-central1-social-inbox-7390f.cloudfunctions.net/api/callback/gmail&client_id=381284035418-bq0is08h42d8rv1u9akmfphlkri1681b.apps.googleusercontent.com&state="+window.location.href,children:R.jsx("div",{className:"div",children:"Sign in with Google"})})]})})]})};function W7(){var t={apiKey:"AIzaSyB23rpD8DI3x-spPp655x8ypNoW1ywbVfU",authDomain:"social-inbox-7390f.firebaseapp.com",projectId:"social-inbox-7390f",storageBucket:"social-inbox-7390f.appspot.com",messagingSenderId:"409687560963",appId:"1:409687560963:web:4d7202dd36907ddbb84f36"};yt.initializeApp(t);let e=Lh();return w.useEffect(()=>{const n=yt.auth().onAuthStateChanged(r=>{e(r?"/":"/login")});return()=>n()},[]),R.jsxs(E2,{children:[R.jsxs(qa,{path:"/login",children:[R.jsx(qa,{path:":token",element:R.jsx(OI,{})}),R.jsx(qa,{path:"",element:R.jsx(OI,{})})]}),R.jsx(qa,{path:"/",element:R.jsx(H7,{})})]})}cm.createRoot(document.getElementById("root")).render(R.jsx(qI.StrictMode,{children:R.jsx(I2,{children:R.jsx(W7,{})})}));
